"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[7553],{18720:function(t,e,i){i.d(e,{Z:function(){return N}});var n,s=i(38669),o=i(80811),l=i(35430),c=i.n(l),a=i(6403),r=i(85228),h=i(72681),u=i(92168),d=i(47508),m=i(8730),f=i(14737),g=(0,a.d)("goods-action"),p=g[0],v=g[1],k=p({mixins:[(0,f.G)("vanGoodsAction")],props:{safeAreaInsetBottom:{type:Boolean,default:!0}},render:function(){var t=arguments[0];return t("div",{class:v({unfit:!this.safeAreaInsetBottom})},[this.slots()])}}),C=i(60803),b=(0,a.d)("goods-action-button"),y=b[0],x=b[1],A=y({mixins:[(0,f.j)("vanGoodsAction")],props:(0,s.Z)({},C.g2,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),computed:{isFirst:function(){var t=this.parent&&this.parent.children[this.index-1];return!t||t.$options.name!==this.$options.name},isLast:function(){var t=this.parent&&this.parent.children[this.index+1];return!t||t.$options.name!==this.$options.name}},methods:{onClick:function(t){this.$emit("click",t),(0,C.BC)(this.$router,this)}},render:function(){var t=arguments[0];return t(m.Z,{class:x([{first:this.isFirst,last:this.isLast},this.type]),attrs:{size:"large",type:this.type,icon:this.icon,color:this.color,loading:this.loading,disabled:this.disabled},on:{click:this.onClick}},[this.slots()||this.text])}}),$=(0,a.d)("dialog"),B=$[0],_=$[1],I=$[2],w=B({mixins:[(0,d.e)()],props:{title:String,theme:String,width:[Number,String],message:String,className:null,callback:Function,beforeClose:Function,messageAlign:String,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showCancelButton:Boolean,overlay:{type:Boolean,default:!0},allowHtml:{type:Boolean,default:!0},transition:{type:String,default:"van-dialog-bounce"},showConfirmButton:{type:Boolean,default:!0},closeOnPopstate:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{onClickOverlay:function(){this.handleAction("overlay")},handleAction:function(t){var e=this;this.$emit(t),this.value&&(this.beforeClose?(this.loading[t]=!0,this.beforeClose(t,(function(i){!1!==i&&e.loading[t]&&e.onClose(t),e.loading.confirm=!1,e.loading.cancel=!1}))):this.onClose(t))},onClose:function(t){this.close(),this.callback&&this.callback(t)},onOpened:function(){var t=this;this.$emit("opened"),this.$nextTick((function(){var e;null==(e=t.$refs.dialog)||e.focus()}))},onClosed:function(){this.$emit("closed")},onKeydown:function(t){var e=this;if("Escape"===t.key||"Enter"===t.key){if(t.target!==this.$refs.dialog)return;var i={Enter:this.showConfirmButton?function(){return e.handleAction("confirm")}:r.ZT,Escape:this.showCancelButton?function(){return e.handleAction("cancel")}:r.ZT};i[t.key](),this.$emit("keydown",t)}},genRoundButtons:function(){var t=this,e=this.$createElement;return e(k,{class:_("footer")},[this.showCancelButton&&e(A,{attrs:{size:"large",type:"warning",text:this.cancelButtonText||I("cancel"),color:this.cancelButtonColor,loading:this.loading.cancel},class:_("cancel"),on:{click:function(){t.handleAction("cancel")}}}),this.showConfirmButton&&e(A,{attrs:{size:"large",type:"danger",text:this.confirmButtonText||I("confirm"),color:this.confirmButtonColor,loading:this.loading.confirm},class:_("confirm"),on:{click:function(){t.handleAction("confirm")}}})])},genButtons:function(){var t,e=this,i=this.$createElement,n=this.showCancelButton&&this.showConfirmButton;return i("div",{class:[u.k7,_("footer")]},[this.showCancelButton&&i(m.Z,{attrs:{size:"large",loading:this.loading.cancel,text:this.cancelButtonText||I("cancel"),nativeType:"button"},class:_("cancel"),style:{color:this.cancelButtonColor},on:{click:function(){e.handleAction("cancel")}}}),this.showConfirmButton&&i(m.Z,{attrs:{size:"large",loading:this.loading.confirm,text:this.confirmButtonText||I("confirm"),nativeType:"button"},class:[_("confirm"),(t={},t[u.a8]=n,t)],style:{color:this.confirmButtonColor},on:{click:function(){e.handleAction("confirm")}}})])},genContent:function(t,e){var i=this.$createElement;if(e)return i("div",{class:_("content")},[e]);var n=this.message,s=this.messageAlign;if(n){var o,l,a={class:_("message",(o={"has-title":t},o[s]=s,o)),domProps:(l={},l[this.allowHtml?"innerHTML":"textContent"]=n,l)};return i("div",{class:_("content",{isolated:!t})},[i("div",c()([{},a]))])}}},render:function(){var t=arguments[0];if(this.shouldRender){var e=this.message,i=this.slots(),n=this.slots("title")||this.title,s=n&&t("div",{class:_("header",{isolated:!e&&!i})},[n]);return t("transition",{attrs:{name:this.transition},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[t("div",{directives:[{name:"show",value:this.value}],attrs:{role:"dialog","aria-labelledby":this.title||e,tabIndex:0},class:[_([this.theme]),this.className],style:{width:(0,h.N)(this.width)},ref:"dialog",on:{keydown:this.onKeydown}},[s,this.genContent(n,i),"round-button"===this.theme?this.genRoundButtons():this.genButtons()])])}}});function T(t){return document.body.contains(t)}function S(){n&&n.$destroy(),n=new(o["default"].extend(w))({el:document.createElement("div"),propsData:{lazyRender:!1}}),n.$on("input",(function(t){n.value=t}))}function Z(t){return r.sk?Promise.resolve():new Promise((function(e,i){n&&T(n.$el)||S(),(0,s.Z)(n,Z.currentOptions,t,{resolve:e,reject:i})}))}Z.defaultOptions={value:!0,title:"",width:"",theme:null,message:"",overlay:!0,className:"",allowHtml:!0,lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:null,messageAlign:"",getContainer:"body",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,callback:function(t){n["confirm"===t?"resolve":"reject"](t)}},Z.alert=Z,Z.confirm=function(t){return Z((0,s.Z)({showCancelButton:!0},t))},Z.close=function(){n&&(n.value=!1)},Z.setDefaultOptions=function(t){(0,s.Z)(Z.currentOptions,t)},Z.resetDefaultOptions=function(){Z.currentOptions=(0,s.Z)({},Z.defaultOptions)},Z.resetDefaultOptions(),Z.install=function(){o["default"].use(w)},Z.Component=w,o["default"].prototype.$dialog=Z;var N=Z},46021:function(t,e,i){i(22663),i(64420),i(23434),i(94108),i(32672),i(14628),i(34755)},56199:function(t,e,i){i.r(e),i.d(e,{default:function(){return C}});i(66608);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mall"},[e("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:t.$t("购物车")}}),e("div",{staticStyle:{width:"100%",height:"46px"}}),t.list.length>0?[t._l(t.list,(function(n,s){return e("div",{key:n.key,staticClass:"mall-detail"},[e("van-checkbox",{staticClass:"mall-title",on:{click:function(e){return t.handleCheckItemAll(n.checkedAll,s)}},model:{value:n.checkedAll,callback:function(e){t.$set(n,"checkedAll",e)},expression:"item.checkedAll"}},[t._v(t._s(n.sort))]),e("div",{staticClass:"mall-item"},[e("van-checkbox-group",{on:{change:t.mathMoney},model:{value:n.checkedValue,callback:function(e){t.$set(n,"checkedValue",e)},expression:"item.checkedValue"}},[t._l(n.child,(function(i,o){var l;return[o<n.moreNum?e("van-checkbox",{key:o,staticClass:"mall-item-checkbox",attrs:{name:i.tempId},on:{click:function(e){return t.handlecheckItemClick(n,s,o)}},model:{value:i.selected,callback:function(e){t.$set(i,"selected",e)},expression:"i.selected"}},[e("div",{staticClass:"mall-item-child",on:{touchstart:function(e){return t.handlerTouchstart(s,o,i.id)},touchmove:t.handleClearInterval,touchend:t.handleClearInterval}},[e("div",{staticClass:"mall-item-child-img"},[e("img",{staticClass:"img",attrs:{src:i.coverImg||i.img}})]),e("div",{staticStyle:{width:"75%","margin-left":"6px"}},[e("p",{staticClass:"describe"},[t._v(" "+t._s((null===(l=i.describe)||void 0===l?void 0:l.length)>43?i.describe.slice(0,43)+"...":i.describe)+" ")]),i.attributes?e("p",{staticClass:"sku_box"},t._l(i.attributes.attrs,(function(i,n){return e("span",{key:n,staticClass:"attribute"},[t._v(" "+t._s(i.attrName)+":"+t._s(i.attrValueName))])})),0):t._e(),e("div",{staticClass:"price"},[e("span",[t._v(" $ "+t._s(t.priceFormat(i.price))+" ")]),e("div",{staticClass:"stepper",on:{click:function(e){return e.stopPropagation(),t.mathMoney.apply(null,arguments)}}},[e("van-stepper",{attrs:{"disable-input":!0,disabled:0==n.checkedValue.length,max:t.maxBuyNum,integer:""},on:{change:t.mathMoney,plus:function(e){return t.handleStepper("add")},minus:function(e){return t.handleStepper("minus")}},model:{value:i.count,callback:function(e){t.$set(i,"count",e)},expression:"i.count"}})],1)])])])]):t._e()]})),e("div",{directives:[{name:"show",rawName:"v-show",value:n.child.length>1&&n.moreNum<n.child.length,expression:"item.child.length > 1 && item.moreNum < item.child.length\n                        "}],staticClass:"show-more",on:{click:function(t){n.moreNum+=2}}},[e("p",[t._v(t._s(t.$t("查看更多")))]),e("img",{attrs:{src:i(48457)}})])],2)],1)],1)})),e("div",{staticClass:"mall-bottom"},[t.isNewLine?t._e():e("van-checkbox",{staticClass:"checkbox_cn",on:{click:t.handleCheckAll},model:{value:t.checkedAllTotol,callback:function(e){t.checkedAllTotol=e},expression:"checkedAllTotol"}},[t._v(" "+t._s(t.$t("全选"))+" ")]),e("div",{staticClass:"mid"},[t.isNewLine?e("van-checkbox",{staticClass:"checkbox",on:{click:t.handleCheckAll},model:{value:t.checkedAllTotol,callback:function(e){t.checkedAllTotol=e},expression:"checkedAllTotol"}},[t._v(" "+t._s(t.$t("全选"))+" ")]):t._e(),e("span",[t._v(t._s(t.$t("总计"))+" "),e("span",{staticClass:"price"},[t._v("$"+t._s(t.priceFormat(t.total.money)))])]),e("span",[t._v(t._s(t.$t("选择"))+" "),e("span",{staticClass:"piece"},[t._v(t._s(t.total.piece))]),t._v(" "+t._s(t.$t("个")))])],1),e("van-button",{staticStyle:{"margin-right":"10px"},attrs:{color:"rgba(233, 157, 56, 1)"},on:{click:t.toBuy}},[t._v(" "+t._s(t.$t("立即购买"))+" ")])],1)]:e("div",{staticClass:"mall-empty"},[e("img",{staticClass:"img",attrs:{src:i(907)}}),e("p",{staticClass:"text"},[t._v(t._s(t.$t("购物车空空")))]),e("router-link",{attrs:{to:"/commodity"}},[e("van-button",{staticClass:"button",attrs:{color:"rgba(233, 157, 56, 1)"}},[t._v(t._s(t.$t("立即购物")))])],1)],1),e("div",{staticStyle:{width:"100%",height:"118px"}})],2)},s=[],o=(i(23465),i(17263)),l=(i(46021),i(18720)),c=(i(57746),i(40293)),a=(i(96616),i(23698)),r=(i(81171),i(13122)),h=(i(30678),i(85434)),u=(i(14223),i(27676)),d=(i(73927),i(60702),i(78455)),m=i(80811),f=i(22204),g={setup(){var t=(0,m.ref)(["a","b"]),e=(0,m.ref)(!1),i=(0,m.ref)(!0),n=(0,m.ref)(null),s=function(){n.value.toggleAll(!0)};return{checked:t,checkedAll:e,checkAll:s,checkedAllTotol:i,checkboxGroup:n}},data(){return{priceFormat:f.XY,refreshing:!1,loop:0,list:[],total:{},lang:(0,f.cF)("lang"),isNewLine:["it","de","ms","pt","es","ru","el","tr","fr"].includes((0,f.cF)("lang")),maxBuyNum:localStorage.getItem("maxBuyNum")||500}},components:{[u.Z.name]:u.Z,[h.Z.name]:h.Z,[r.Z.name]:r.Z,[a.Z.name]:a.Z,[c.Z.name]:c.Z,[l.Z.Component.name]:l.Z.Component},created(){(0,f.bg)()&&this.getCartlist(),this.mathMoney()},methods:{handlerTouchstart(t,e,i){var n=this,s=this.$ls.get("productList")||[];this.loop=setTimeout((function(){n.loop=0,l.Z.confirm({title:n.$t("提示"),message:n.$t("确认移除商品吗?"),confirmButtonText:n.$t("确认"),cancelButtonText:n.$t("取消")}).then((function(){1==n.list[t].child.length?n.list.splice(t,1):n.list[t].child.splice(e,1),s.forEach((function(t,e){t.id==i&&s.splice(e,1)})),n.$store.state.qiangdan.count=s.length,n.$ls.set("productList",s),n.getCartlist()}))}),500)},handleClearInterval(){clearTimeout(this.loop),this.loop=0},handleStepper(t){var e=this.total.piece;"add"==t?e+=1:e-=1,this.$store.state.qiangdan.count=e},mathMoney(){var t=this,e=this.$ls.get("productList")||[];this.total={money:0,piece:0},this.list.forEach((function(i){t.total.piece=t.total.piece+=i.checkedValue.length,i.child.length>0&&i.child.forEach((function(n){e.forEach((function(t){t.id==n.id&&(t.count=n.count)})),i.checkedValue.includes(n.tempId)&&(t.total.money+=n.price.toFixed(2)*n.count)}))})),this.total.money=this.total.money.toFixed(2),this.$ls.set("productList",e)},getCartlist(){var t=this;this.list=[];var e=this.$ls.get("productList")||[];if(e&&e.length>0){e.forEach((function(e){if(t.list.length>0)t.list.forEach((function(i){var n=[];if(e.canSelectAttributes&&(n=e.canSelectAttributes.skus.filter((function(t){return t.skuId==e.skuId}))[0]),i.sort==e.storeName){var s=[];e.canSelectAttributes&&(s=e.canSelectAttributes.skus.filter((function(t){return t.skuId==e.skuId}))[0]);var o={coverImg:e.coverImg,skuId:e.skuId,img:e.imgUrl1||t.$defaultGoodsImage,price:e.discountPrice?e.discountPrice:e.sellingPrice,describe:e.name,count:e.count,id:"".concat(e.id),tempId:e.tempId,attributes:s,freightAmount:e.freightAmount||0,goodsTax:e.goodsTax||0,selected:!0};i.child.unshift(o)}else{var l={key:e.sellerId,sort:e.storeName,checkedAll:!0,checkedValue:[],moreNum:2,child:[]},c={coverImg:e.coverImg,skuId:e.skuId,img:e.imgUrl1||t.$defaultGoodsImage,price:e.discountPrice?e.discountPrice:e.sellingPrice,describe:e.name,count:e.count,id:"".concat(e.id),tempId:e.tempId,freightAmount:e.freightAmount||0,goodsTax:e.goodsTax||0,selected:!0,attributes:n};l.child.unshift(c),t.list.push(l)}}));else{var i=[];e.canSelectAttributes&&(i=e.canSelectAttributes.skus.filter((function(t){return t.skuId==e.skuId}))[0]);var n={key:e.sellerId,sort:e.storeName,checkedAll:!0,checkedValue:[],moreNum:2,child:[]},s={coverImg:e.coverImg,skuId:e.skuId,img:e.imgUrl1||t.$defaultGoodsImage,price:e.discountPrice?e.discountPrice:e.sellingPrice,describe:e.name,count:e.count,id:e.id,freightAmount:e.freightAmount||0,goodsTax:e.goodsTax||0,selected:!0,attributes:i};n.child.unshift(s),t.list.unshift(n)}}));for(var i=0;i<this.list.length-1;i++)for(var n=i+1;n<this.list.length;n++)this.list[i].sort==this.list[n].sort&&(this.list.splice(n,1),n--);this.$ls.set("cartList",this.list)}this.handleCheckAll()},toBuy(){var t=this.list.find((function(t){return t.child.find((function(t){return t.selected}))}));if(!t)return(0,o.Z)(this.$t("未选中任何商品"));var e=[];this.list.forEach((function(t){t.checkedAll&&(t.child=t.child.filter((function(t){return t.selected})),e.push(t))})),this.$ls.set("cartList",e),this.list=[],this.$router.push("/orderComnfirmation?isCart=1")},handlecheckItemClick(t,e,i){var n=this;this.list[e].child[i].selected=!this.list[e].child[i].selected;var s=0,o=0,l=this.list[e].child.length;this.list[e].child.forEach((function(t){t.selected?s+=1:o+=1,0!=s&&(n.list[e].checkedAll=!0),o==l&&(n.list[e].checkedAll=!1)}))},handleCheckItemAll(t,e){var i=this;this.list[e].checkedValue=[],this.$nextTick((function(){i.list[e].child.forEach((function(n,s){n.selected=t,t&&i.list[e].checkedValue.push(n.tempId)}))}))},handleCheckAll(){var t=this;this.list.forEach((function(e){var i;e.checkedValue=[],e.checkedAll=t.checkedAllTotol,null===(i=e.child)||void 0===i||i.forEach((function(i){i.selected=t.checkedAllTotol,t.checkedAllTotol&&e.checkedValue.push(i.tempId)}))}))},onRefresh(){this.finished=!1,this.list=[],this.loading=!0,this.onLoad()},onLoad(){this.refreshing&&(this.list=[],this.refreshing=!1),this.getCartlist()},qiehuan(){this.list=[],this.loading=!1,this.finished=!1,this.refreshing=!1,this.page_no=0},goods_points_action(){var t=this;this.show=!0,(0,d.cy)({}).then((function(e){t.show=!1,t.goods_points_action_data=e.points}))},touzi(t){this.$router.push("/InvestmentDetails?goodsId="+t)},onClickLeft(){this.$router.push("/me")}},watch:{list:{handler(t){this.checkedAllTotol=t.every((function(t){return t.child.every((function(t){return t.selected}))}))},deep:!0}}},p=g,v=i(48703),k=(0,v.Z)(p,n,s,!1,null,"690e01b7",null),C=k.exports},907:function(t,e,i){t.exports=i.p+"img/gouwuche1.19a2de40.png"}}]);