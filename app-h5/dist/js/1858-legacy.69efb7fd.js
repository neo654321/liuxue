"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[1858],{44322:function(t,a,e){e.r(a),e.d(a,{default:function(){return f}});e(70560);var s=function(){var t,a=this,e=a._self._c;return e("div",{staticClass:"page-content"},[a.currentData?e("cancel-dialog",{attrs:{"dialog-show":a.cancelShow,"dialog-data":a.currentData},on:{"update:dialogShow":function(t){a.cancelShow=t},"update:dialog-show":function(t){a.cancelShow=t},done:function(){return a.$router.back()}}}):a._e(),a.currentData?e("reminds-dialog",{attrs:{"dialog-show":a.remindShow,"dialog-data":a.currentData},on:{"update:dialogShow":function(t){a.remindShow=t},"update:dialog-show":function(t){a.remindShow=t}}}):a._e(),e("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:a.$t("订单详情"),"left-arrow":""},on:{"click-left":function(){return a.$router.push({path:"/order",dir:"left",query:{type:a.$route.query.index}})}}}),e("div",{staticStyle:{width:"100%",height:"46px"}}),a.currentData?e("div",{staticClass:"info-content"},[e("div",{staticClass:"order-info-content"},[e("div",{staticClass:"item"},[e("p",{staticClass:"p80"},[a._v(a._s(a.$t("流水号"))+"：")]),e("div",[e("div",{staticClass:"copy",on:{click:function(t){return a.copyHandle(a.currentData.id)}}},[e("span",{staticClass:"nowrap",staticStyle:{width:"200px"}},[a._v(a._s(a.currentData.id))]),e("img",{attrs:{src:a.copyIcon,alt:""}})]),e("p",{staticClass:"tips"},[a._v(a._s(a.$formatZoneDate(a.currentData.createTime)))])])]),e("div",{staticClass:"item"},[e("p",{staticClass:"p80"},[a._v(a._s(a.$t("收件地址"))+"：")]),e("div",[e("p",[a._v(" "+a._s(a.currentData.postcode)+" "+a._s(a.currentData.province)+" "+a._s(a.currentData.city)+" ")]),e("p",[a._v(a._s(a.currentData.country))]),e("p",[a._v(a._s(a.currentData.address))]),e("p",[a._v(a._s(a.currentData.contacts))]),e("p",[a._v(" "+a._s((null===(t=a.currentData.phone)||void 0===t?void 0:t.indexOf("|"))>-1?a.currentData.phone.split("|")[1]:a.currentData.phone)+" ")])])]),e("div",{staticClass:"item"},[e("p",{staticClass:"p80"},[a._v(a._s(a.$t("商品数量"))+"：")]),e("div",[a._v(a._s(a.goodsTotalNum))])]),e("div",{staticClass:"item"},[e("p",{staticClass:"p80"},[a._v(a._s(a.$t("订单总额"))+"：")]),e("div",{staticClass:"money"},[a._v(" $"+a._s(a.priceFormat(a.totalPrice+a.currentData.tax+a.currentData.fees))+" ")])]),e("div",{staticClass:"item"},[e("p",{staticClass:"p80"},[a._v(a._s(a.$t("税费"))+"：")]),e("div",{staticClass:"money"},[a._v("$"+a._s(a.currentData.tax?a.priceFormat(a.currentData.tax):"0.00"))])]),e("div",{staticClass:"item"},[e("p",{staticClass:"p80"},[a._v(a._s(a.$t("运费"))+"：")]),e("div",{staticClass:"money"},[a._v("$"+a._s(a.currentData.fees?a.priceFormat(a.currentData.fees):"0.00"))])]),e("div",{staticClass:"item"},[e("p",{staticClass:"p80"},[a._v(a._s(a.$t("总金额"))+"：")]),e("div",{staticClass:"money"},[a._v(" $"+a._s(a.priceFormat(a.$plus(a.$plus(a.totalPrice,a.currentData.tax),a.currentData.fees)))+" ")])])]),a.currentData?e("div",{staticClass:"goods-info-content"},a._l(a.goodsData,(function(t,s){return e("div",{key:s,staticClass:"order-info-content"},[e("div",{staticClass:"goods-item",on:{click:function(e){return a.repeatPurchase(t)}}},[e("div",{staticClass:"poster"},[e("img",{attrs:{src:t.goodsIcon,alt:""}})]),e("div",{staticClass:"name"},[e("div",{staticClass:"title"},[a._v(a._s(t.goodsName))]),t.attributes?e("div",{},a._l(t.attributes,(function(t,s){return t.attrName&&t.attrValue?e("span",{key:s,staticClass:"attribute"},[a._v(" "+a._s(t.attrName)+":"+a._s(t.attrValue))]):a._e()})),0):a._e()])]),e("div",{staticClass:"item"},[e("p",[a._v(a._s(a.$t("数量"))+"：")]),e("div",[a._v(a._s(t.goodsNum))])]),e("div",{staticClass:"item"},[e("p",[a._v(a._s(a.$t("单价"))+"：")]),e("div",{staticClass:"money"},[a._v("$"+a._s(a.priceFormat(t.goodsReal)))])]),e("div",{staticClass:"item"},[e("p",[a._v(a._s(a.$t("总价"))+"：")]),e("div",{staticClass:"money"},[a._v(" $"+a._s(a.priceFormat(a.$operation(t.goodsReal,t.goodsNum,"times")))+" ")])]),e("div",{staticClass:"item"},[e("p",[a._v(a._s(a.$t("税费"))+"：")]),e("div",{staticClass:"money"},[a._v("$"+a._s(t.tax?a.priceFormat(t.tax):"0.00"))])]),e("div",{staticClass:"item"},[e("p",[a._v(a._s(a.$t("运费"))+"：")]),e("div",{staticClass:"money"},[a._v("$"+a._s(t.fees?a.priceFormat(t.fees):"0.00"))])]),e("div",{staticClass:"item"},[e("p",[a._v(a._s(a.$t("总计"))+"：")]),e("div",{staticClass:"money"},[a._v(" "+a._s(a.priceFormat(t.goodsReal*t.goodsNum+t.tax+t.fees))+" ")])])])})),0):a._e()]):a._e(),a.currentData&&-1!==Number(a.currentData.status)?e("div",{staticClass:"page-footer"},[0===Number(a.currentData.status)?e("div",{staticClass:"btn",on:{click:function(t){a.cancelShow=!0}}},[a._v(" "+a._s(a.$t("取消订单"))+" ")]):a._e(),0===Number(a.currentData.status)?e("div",{staticClass:"btn color",on:{click:function(t){return a.openPeddingPay(a.currentData)}}},[a._v(" "+a._s(a.$t("立即付款"))+" ")]):a._e(),1===Number(a.currentData.status)?e("div",{staticClass:"btn color",on:{click:function(t){return a.remindHandle(a.currentData)}}},[a._v(" "+a._s(a.$t("提醒发货"))+" ")]):a._e(),3===Number(a.currentData.status)?e("div",{staticClass:"btn",on:{click:function(t){return a.openPage("/orderRefund",{id:a.currentData.id,a:a.currentData.prizeReal})}}},[a._v(" "+a._s(a.$t("申请退货"))+" ")]):a._e(),3===Number(a.currentData.status)?e("div",{staticClass:"btn color",on:{click:function(t){return a.orderPick(a.currentData)}}},[a._v(" "+a._s(a.$t("确认收货"))+" ")]):a._e(),Number(a.currentData.status)>0?e("div",{staticClass:"btn",on:{click:function(t){return a.openPage("/order/logistics",{id:a.currentData.id})}}},[a._v(" "+a._s(a.$t("查看物流"))+" ")]):a._e(),4===Number(a.currentData.status)?e("div",{staticClass:"btn",on:{click:function(t){return a.openPage("/orderEvaluate",{id:a.currentData.id})}}},[a._v(" "+a._s(a.$t("立即评价"))+" ")]):a._e(),6===Number(a.currentData.status)?e("div",{staticClass:"tips"},[Boolean(a.$route.query.returnStatus)?a._e():e("span",[a._v(a._s(a.$t("未退款"))+" ")]),1===Number(a.$route.query.returnStatus)?e("span",{staticClass:"running"},[a._v(a._s(a.$t("退款中")))]):a._e(),2===Number(a.$route.query.returnStatus)?e("span",{staticClass:"success"},[a._v(a._s(a.$t("退款成功")))]):a._e(),3===Number(a.$route.query.returnStatus)?e("span",{staticClass:"fail"},[a._v(a._s(a.$t("退款失败")))]):a._e()]):a._e()]):a._e()],1)},r=[],i=(e(23324),e(75705)),n=(e(37850),e(88848)),o=(e(83627),e(90797)),c=(e(76801),e(48324),e(60228),e(43843),e(47522),e(32169)),u=e(87177),d=e(10408),l=e(14970),v=e(15941),_={name:"OrderDetails",components:{[o.Z.name]:o.Z,[n.Z.name]:n.Z,[i.Z.name]:i.Z,CancelDialog:c.Z,RemindsDialog:u.Z},data(){return{copyIcon:e(78481),cancelShow:!1,remindShow:!1,currentData:null,orderId:null,totalPrice:0,goodsData:[],timezone:""}},computed:{goodsTotalNum(){var t=0;return this.goodsData.forEach((function(a){t+=a.goodsNum})),t}},mounted(){var t=this;this.$nextTick((function(){var a=t.$route.query.id;a?(t.orderId=a,t.getDataInfo(),t.getOrderGoods()):((0,n.Z)(t.$t("订单号不存在")),setTimeout((function(){t.$router.back()}),1500))})),this.timezone=localStorage.getItem("timeZone")},methods:{repeatPurchase(t){if(1!=(null===t||void 0===t?void 0:t.isShelf)||1!=(null===t||void 0===t?void 0:t.isValid))return this.$notify(this.$t("该商品已下架"),"warning");this.$router.push("/CommodityDetails?sellerGoodsId="+t.goodsId)},time(t){var a=this.dayjs;return a().tz(this.timezone).format(t)},priceFormat(t){return(0,d.XY)(t)},copyHandle(t){var a=this;this.$copyText(t).then((function(){(0,n.Z)(a.$t("复制成功"))}),(function(){(0,n.Z)(a.$t("复制失败"))}))},getDataInfo(){var t=this;n.Z.loading({duration:0,forbidClick:!0}),(0,l.nJ)({orderId:this.orderId,type:1}).then((function(a){t.currentData=a.orderInfo,n.Z.clear()})).catch((function(){n.Z.clear()}))},getOrderGoods(){var t=this;(0,l.K7)({orderId:this.orderId}).then((function(a){t.goodsData=a.pageList||[],t.goodsData.forEach((function(a){t.totalPrice+=a.goodsReal*a.goodsNum}))}))},openPeddingPay(t){var a=[{orderList:t.id}];this.$router.push({path:"/PendingPayment",query:{orderList:JSON.stringify(a),total:this.$operation(t.discountPrice,t.goodsCount,"times")||this.$operation(t.priceReal,t.goodsCount,"times")}})},remindHandle(t){var a=localStorage.getItem("remindStore")?JSON.parse(localStorage.getItem("remindStore")):[];a.includes(t.id)?(0,n.Z)(this.$t("该订单已提醒过啦~")):this.remindShow=!0},openPage(t,a){var e={path:t};a&&(e.query=a),this.$router.push(e)},orderPick(t){var a=this;i.Z.confirm({title:this.$t("提示"),message:this.$t("确认收货吗？"),confirmButtonText:this.$t("确认"),cancelButtonText:this.$t("取消")}).then((function(){n.Z.loading({duration:0,message:a.$t("提交中"),forbidClick:!0});var e={orderId:t.id};(0,l.lI)(e).then((function(){n.Z.clear(),a.currentData=null,a.getDataInfo()})).catch((function(){n.Z.clear()}))})).catch((function(){v.log("cancel")}))}}},p=_,m=e(1001),h=(0,m.Z)(p,s,r,!1,null,"e957a374",null),f=h.exports}}]);