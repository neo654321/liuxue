"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[6973],{45155:function(t,i,a){a(22663),a(23434),a(94108)},66195:function(t,i,a){a.r(i),a.d(i,{default:function(){return m}});var n=function(){var t=this,i=t._self._c;return i("div",{staticClass:"recharge",staticStyle:{"min-height":"100vh"}},[i("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:"Hive"==t.itemName?t.$t("加值"):t.$t("充值"),"left-arrow":"","right-text":t.$t("记录")},on:{"click-left":t.onClickLeft,"click-right":t.onClick1}}),i("div",{staticClass:"h46",staticStyle:{width:"100%"}}),i("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("区块链网络")))]),i("div",{staticClass:"duoxuan"},t._l(t.tongdao,(function(a,n){return i("div",{key:n,staticClass:"xuan1",class:t.tongdao_xuanzhong.blockchain_name===a.blockchain_name?"xuanzhong":"weixuan",on:{click:function(i){return t.tongdao_qiehuan(a)}}},[t._v(t._s(a.blockchain_name)+" "),t.tongdao_xuanzhong.blockchain_name===a.blockchain_name?i("van-icon",{staticClass:"xuanzhong-img rtl_selected",attrs:{"class-prefix":"icon",name:"xuanzejiaobiao"}}):t._e()],1)})),0),i("div",{staticClass:"qrcode",staticStyle:{display:"flex","justify-content":"center","margin-top":"20px",width:"100%",float:"left"}},[i("canvas",{staticStyle:{display:"none"},attrs:{id:"canvas"}}),i("img",{staticStyle:{width:"150px",height:"150px"},attrs:{src:t.imgUrl}})]),i("div",{staticClass:"baocunerweima"},[i("div",{staticClass:"baocunerweima-buuon",on:{click:t.baocunhaibao}},[t._v(t._s(t.$t("保存二维码")))])]),i("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("充值地址")))]),i("div",{staticClass:"chongzhifuzhi"},[i("div",{staticClass:"chongzhifuzhi2"},[i("div",{staticClass:"dizhi"},[t._v(t._s(t.tongdao_xuanzhong.address))]),i("div",{staticStyle:{flex:"1"}}),i("div",{staticClass:"fuzhi11",staticStyle:{color:"var(--main-color)"},on:{click:function(i){return t.copyData(t.tongdao_xuanzhong.address)}}},[t._v(t._s(t.$t("复制"))+" ")])])]),i("div",{staticClass:"biaoti",staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(t.$t("充值数量")))]),i("div",{staticClass:"shuru"},[i("el-input",{attrs:{placeholder:t.$t("请输入充值数量"),type:"number",clearable:""},on:{input:t.handleInput},model:{value:t.it.input1,callback:function(i){t.$set(t.it,"input1",i)},expression:"it.input1"}})],1),i("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("预计到账"))+"("+t._s(t.$t("当前汇率"))+" 1 : "+t._s(t.tongdao_xuanzhong.fee>1?t.priceFormat(t.tongdao_xuanzhong.fee):t.tongdao_xuanzhong.fee)+")")]),i("div",{staticClass:"chongzhifuzhi"},[i("div",{staticClass:"chongzhifuzhi2"},[i("div",{staticClass:"dizhi"},[t._v(t._s(t.priceFormat(t.it.input1*t.tongdao_xuanzhong.fee)))]),i("div",{staticStyle:{flex:"1"}}),i("div",{staticClass:"fuzhi11"},[t._v("USDT")])])]),i("div",{staticClass:"biaoti",staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(t.$t("上传图片（上传支付详情截图）")))]),i("div",{staticClass:"shangchaun",staticStyle:{"margin-left":"15px",width:"100%",float:"left"}},[i("van-uploader",{attrs:{multiple:"","max-count":1,"preview-size":"120px","after-read":t.afterRead,accept:".png,.jpg,.jpeg"},model:{value:t.fileList,callback:function(i){t.fileList=i},expression:"fileList"}})],1),i("div",{staticClass:"tijiao"},[i("div",{staticClass:"tijiao2",on:{click:t.biaodan_tijiao}},[t._v(t._s(t.$t("提交")))])])],1)},e=[],s=(a(23465),a(17263)),o=(a(71131),a(32984)),c=(a(45155),a(76174)),h=(a(58549),a(73927),a(93019),a(3761),a(68063),a(46740)),l=a(22204),r=a(78455),u={data(){return{priceFormat:l.XY,itemName:"EShop",data:{},codes:"",tongdao_xuanzhong:{},imgUrl:null,tongdao:[],it:{input1:""},fileList:[],shangchuanurl:"",session_token:""}},components:{QRCode:h,[c.Z.name]:c.Z,[o.Z.name]:o.Z},created(){this.zhifutongdao()},methods:{handleInput(){this.it.input1=this.it.input1.replace(/[^\d.]/g,""),this.it.input1=this.it.input1.replace(/\.{2,}/g,"."),this.it.input1=this.it.input1.replace(/^\./g,""),this.it.input1=this.it.input1.replace(".","$#$").replace(/\./g,"").replace("$#$","."),["BTC","ETH"].includes(this.$route.query.type)?(this.it.input1=this.it.input1.replace(/^(\-)*(\d+)\.(\d{0,10}).*$/,"$1$2.$3"),this.it.input1=this.it.input1.replace(/^\D*(\d{0,10}(?:\.\d{0,10})?).*$/g,"$1")):this.it.input1=this.it.input1.replace(/^(\-)*(\d+)\.(\d{0,2}).*$/,"$1$2.$3")},biaodan_tijiao(){var t=this,i=this;""!==this.it.input1?""!==this.shangchuanurl?(this.it.input1*this.tongdao_xuanzhong.fee).toFixed(2)<this.tongdao_xuanzhong.recharge_limit_min?(0,s.Z)(i.$t("充值价值不得小于最小限额")+this.tongdao_xuanzhong.recharge_limit_min+"usdt"):(this.it.input1*this.tongdao_xuanzhong.fee).toFixed(2)>this.tongdao_xuanzhong.recharge_limit_max?(0,s.Z)(i.$t("充值价值不得大于最大限额")+this.tongdao_xuanzhong.recharge_limit_max+"usdt"):(0,r.BX)({}).then((function(i){t.session_token=i.session_token,t.chongzhitijiao()})):(0,s.Z)(i.$t("请上传图片")):(0,s.Z)(i.$t("请输入充值数量"))},chongzhitijiao(){var t=this,i={session_token:this.session_token,amount:this.it.input1,from:"123",blockchain_name:this.tongdao_xuanzhong.blockchain_name,img:this.shangchuanurl,coin:this.tongdao_xuanzhong.coin,channel_address:this.tongdao_xuanzhong.address,tx:"123"};s.Z.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:""}),(0,r.HO)(i).then((function(i){s.Z.clear(),(0,s.Z)(t.$t("提交成功")),t.it.input1="",t.fileList=[],t.shangchuanurl="",t.$router.push("/SubmitCompleted?path=rechargeRecord")})).catch((function(t){s.Z.clear()}))},tongdao_qiehuan(t){this.tongdao_xuanzhong=t,this.useqrcode1()},zhifutongdao(){var t=this;(0,r.mo)({}).then((function(i){for(var a=0;a<i.length;a++)i[a]["coin"]===t.$route.query.type&&t.tongdao.push(i[a]);t.tongdao_xuanzhong=t.tongdao[0],t.useqrcode1()}))},afterRead(t){var i=this;s.Z.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:""});var a=new FormData;a.append("file",t.file),a.append("moduleName","recharge"),(0,r.Eg)(a).then((function(t){s.Z.clear(),i.shangchuanurl=t})).catch((function(t){s.Z.clear(),(0,s.Z)(this.$t("添加失败")),this.fileList=[]}))},copyData(t){var i=this;this.$copyText(t).then((function(t){(0,s.Z)(i.$t("复制成功"))}),(function(t){(0,s.Z)(this.$t("复制失败"))}))},copyData2(t){this.$copyText(t).then((function(t){}),(function(t){}))},useqrcode1(){var t=document.getElementById("canvas"),i=this.tongdao_xuanzhong.address;h.toCanvas(t,i,(function(t){})),this.saveImg()},baocunhaibao(){var t=document.getElementsByTagName("canvas");this.imgUrl=t[0].toDataURL("image/png"),this.getUrlBase64(this.imgUrl).then((function(t){var i=document.createElement("a");i.href=t,i.download="qrCode.png",i.click()}))},getUrlBase64(t){return new Promise((function(i){var a=document.createElement("canvas"),n=a.getContext("2d"),e=new Image;e.crossOrigin="Anonymous",e.src=t,e.onload=function(){a.height=300,a.width=300,n.drawImage(e,0,0,300,300);var t=a.toDataURL("image/png");a=null,i(t)}}))},saveImg(){var t=document.getElementsByTagName("canvas");this.imgUrl=t[0].toDataURL("image/png")},onClickLeft(){this.$router.push({path:"/rechargeList",dir:"left"})},onClick1(){this.$router.push({path:"/rechargeRecord"})}}},d=u,g=a(48703),p=(0,g.Z)(d,n,e,!1,null,"5aa36d25",null),m=p.exports}}]);