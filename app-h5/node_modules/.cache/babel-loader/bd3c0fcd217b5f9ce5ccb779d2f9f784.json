{"ast":null,"code":"import _objectSpread from \"/Users/neo/Desktop/mall_vue/app-h5/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"CustomerService\",\n  data() {\n    return {\n      isFirstRequest: true,\n      token: \"\",\n      serviceUrl: \"\",\n      pageHeight: \"\",\n      lang: \"\",\n      sellerId: \"\",\n      storeName: \"\",\n      isApp: window.plus ? true : false,\n      path: \"\",\n      localIsList: false,\n      isShowIcon: false\n    };\n  },\n  components: {\n    [_Icon.name]: _Icon\n  },\n  computed: _objectSpread({}, mapGetters({\n    userInfo: \"userInfo\"\n  })),\n  mounted() {\n    var _this = this;\n    // this.$refs.header.$refs.navBar.offsetHeight - 44;\n    this.init();\n    // this.localIsList = this.$route.query?.path == 'contacts'\n    // 监听 message 事件\n    window.addEventListener('message', function (e) {\n      e.data == 'back' && _this.$router.push('/');\n      // this.localIsList = this.isShowIcon = e.data == '/h5/message/yellow'\n    });\n  },\n  methods: {\n    onClickLeft() {\n      // 返回\n      this.$router.push('/');\n    },\n    onClickRight() {\n      var base_url = process.env.VUE_APP_IS_APP ? this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME].app_url : location.origin;\n      this.$refs.frame.contentWindow.postMessage('toContacts', base_url);\n      // this.$refs.frame.contentWindow.postMessage('toContacts', 'https://thsjbvh.site');\n\n      // this.$refs.frame.contentWindow.postMessage('toContacts', 'http://localhost:3000');\n    },\n    init() {\n      var _this$$route$query, _this$$route$query2, _this$$route$query3, _this$$route$query4, _this$$route$query5, _this$userInfo;\n      this.token = localStorage.getItem(\"token\");\n      this.lang = localStorage.getItem(\"lang\");\n      // this.lang = this.lang?.replace('\"', \"\")?.replace('\"', \"\");\n      this.pageHeight = document.documentElement.clientHeight - 44;\n      this.sellerId = (_this$$route$query = this.$route.query) !== null && _this$$route$query !== void 0 && _this$$route$query.path ? '' : localStorage.getItem(\"sellerId\");\n      this.storeName = (_this$$route$query2 = this.$route.query) !== null && _this$$route$query2 !== void 0 && _this$$route$query2.path ? '' : localStorage.getItem(\"storeName\");\n      // this.lang = this.lang == \"cn\" ? \"cn\" : this.lang == \"en\" ? \"en\" : \"tw\";\n      var shopName = (_this$$route$query3 = this.$route.query) !== null && _this$$route$query3 !== void 0 && _this$$route$query3.path ? this.$t('消息') : sessionStorage.getItem('shopName');\n      var goodsId = (_this$$route$query4 = this.$route.query) === null || _this$$route$query4 === void 0 ? void 0 : _this$$route$query4.goodsId;\n      var base_url = process.env.VUE_APP_IS_APP ? this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME].app_url : location.origin;\n      var qs = this.sellerId ? \"?partyid=\".concat(this.sellerId, \"&name=\").concat(this.storeName, \"&token=\").concat(this.token, \"&lang=\").concat(this.lang, \"&height=\").concat(this.pageHeight, \"px\") : \"?token=\".concat(this.token, \"&lang=\").concat(this.lang, \"&height=100%\");\n      this.serviceUrl = \"\".concat(base_url, \"/chat/#/h5/\").concat(((_this$$route$query5 = this.$route.query) === null || _this$$route$query5 === void 0 ? void 0 : _this$$route$query5.path) || \"message\", \"/yellow\").concat(qs, \"&loginType=user&nohead=true&isH5=true&selfimg=\").concat(((_this$userInfo = this.userInfo) === null || _this$userInfo === void 0 ? void 0 : _this$userInfo.avatar) || 1).concat(shopName && '&shopName=' + shopName).concat(goodsId && goodsId != 'undefined' ? '&productId=' + goodsId : '');\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","name","data","isFirstRequest","token","serviceUrl","pageHeight","lang","sellerId","storeName","isApp","window","plus","path","localIsList","isShowIcon","components","_Icon","computed","_objectSpread","userInfo","mounted","_this","init","addEventListener","e","$router","push","methods","onClickLeft","onClickRight","base_url","process","env","VUE_APP_IS_APP","$store","state","multiItem","VUE_APP_ITEM_NAME","app_url","location","origin","$refs","frame","contentWindow","postMessage","_this$$route$query","_this$$route$query2","_this$$route$query3","_this$$route$query4","_this$$route$query5","_this$userInfo","localStorage","getItem","document","documentElement","clientHeight","$route","query","shopName","$t","sessionStorage","goodsId","qs","concat","avatar"],"sources":["src/page/customerService/index.vue"],"sourcesContent":["<template>\n    <div class=\"service-box\" :style=\"isApp ? { height: '93%' } : null\">\n        <!-- <van-nav-bar safe-area-inset-top :title=\"$t('在线客服')\" left-arrow @click-left=\"onClickLeft\" fixed @click-right=\"onClickRight\"\n            ref=\"header\">\n            <template #right v-if=\"isShowIcon\">\n                <van-icon  name=\"chat-o\" size=\"20\" />\n            </template>\n            <template #right v-else>\n            </template>\n        </van-nav-bar> -->\n        <!-- <div style=\"width: 100%; height: 46px\"></div> -->\n        <!--      <div class=\"h-10 bg-grey w-full\"></div> -->\n        <div class=\"back\" @click=\"$router.go(-1)\">\n            <!-- <img src=\"@/assets/image/back.png\" alt=\"\"> -->\n        </div>\n        <iframe ref=\"frame\" :src=\"serviceUrl\" frameborder=\"0\" width=\"100%\" height=\"100%\"\n            :class=\"[this.localIsList && 'local_list']\"></iframe>\n    </div>\n</template>\n\n<script>\nimport { Icon } from 'vant';\nimport { mapGetters } from \"vuex\";\nexport default {\n    name: \"CustomerService\",\n    data() {\n        return {\n            isFirstRequest: true,\n            token: \"\",\n            serviceUrl: \"\",\n            pageHeight: \"\",\n            lang: \"\",\n            sellerId: \"\",\n            storeName: \"\",\n            isApp: window.plus ? true : false,\n            path: \"\",\n            localIsList: false,\n            isShowIcon: false\n        };\n    },\n    components: {\n        [Icon.name]: Icon,\n    },\n    computed: {\n        ...mapGetters({\n            userInfo: \"userInfo\",\n        }),\n    },\n    mounted() {\n        // this.$refs.header.$refs.navBar.offsetHeight - 44;\n        this.init()\n        // this.localIsList = this.$route.query?.path == 'contacts'\n        // 监听 message 事件\n        window.addEventListener('message', (e) => {\n            e.data == 'back' && this.$router.push('/');\n            // this.localIsList = this.isShowIcon = e.data == '/h5/message/yellow'\n        });\n    },\n    methods: {\n        onClickLeft() {\n            // 返回\n            this.$router.push('/');\n        },\n        onClickRight() {\n            const base_url = process.env.VUE_APP_IS_APP ? this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME].app_url : location.origin\n            this.$refs.frame.contentWindow.postMessage('toContacts', base_url);\n            // this.$refs.frame.contentWindow.postMessage('toContacts', 'https://thsjbvh.site');\n\n            // this.$refs.frame.contentWindow.postMessage('toContacts', 'http://localhost:3000');\n        },\n        init() {\n            this.token = localStorage.getItem(\"token\");\n            this.lang = localStorage.getItem(\"lang\");\n            // this.lang = this.lang?.replace('\"', \"\")?.replace('\"', \"\");\n            this.pageHeight = document.documentElement.clientHeight - 44\n            this.sellerId = this.$route.query?.path ? '' : localStorage.getItem(\"sellerId\");\n            this.storeName = this.$route.query?.path ? '' : localStorage.getItem(\"storeName\");\n            // this.lang = this.lang == \"cn\" ? \"cn\" : this.lang == \"en\" ? \"en\" : \"tw\";\n            const shopName = this.$route.query?.path ? this.$t('消息') : sessionStorage.getItem('shopName')\n            const goodsId = this.$route.query?.goodsId\n            const base_url = process.env.VUE_APP_IS_APP ? this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME].app_url : location.origin\n            const qs = this.sellerId\n                ? `?partyid=${this.sellerId}&name=${this.storeName}&token=${this.token}&lang=${this.lang}&height=${this.pageHeight}px`\n                : `?token=${this.token}&lang=${this.lang}&height=100%`;\n\n            this.serviceUrl = `${base_url}/chat/#/h5/${this.$route.query?.path || \"message\"\n                }/yellow${qs}&loginType=user&nohead=true&isH5=true&selfimg=${this.userInfo?.avatar || 1}${shopName && '&shopName=' + shopName}${(goodsId && goodsId != 'undefined') ? '&productId=' + goodsId : ''}`;\n        }\n    },\n};\n</script>\n<style lang=\"scss\" scoped>\n// iframe {\n//     transform: translateY(44px);\n// }\n// .local_list {\n//     transform: translateY(0) !important;\n// }\n.back {\n    width: 44px;\n    height: 44px;\n    position: fixed;\n    top: 0;\n    left: 0;\n    background: transparent;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n}\n\n.service-box {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n}\n\n.time {\n    padding-top: 0;\n    padding-bottom: 10px;\n    padding-left: 54px;\n\n    &.justify-end {\n        padding-right: 54px;\n    }\n}\n\n.content {\n    overflow-y: scroll;\n    height: calc(100vh - 110px);\n    position: fixed;\n    width: 100%;\n}\n\n.break-word {\n    word-break: break-word;\n}\n\n// .max-w-230 {\n//   //max-width: 230px;\n// }\n.responser {\n    position: relative;\n    //&::after {\n    //    content: '';\n    //    width:0;\n    //    height:0;\n    //    border-top:10px solid transparent;\n    //    border-bottom:10px solid transparent;\n    //    border-right:20px solid #f3f3f3;\n    //    position: absolute;\n    //    left: -20px;\n    //    top: 20px;\n    //}\n}\n\n.fasong {\n    width: 74px;\n    height: 34px;\n    font-style: normal;\n    font-weight: 400;\n    font-size: 14px;\n    line-height: 34px;\n    text-align: center;\n    color: #ffffff;\n    // background: var(--main-color);\n    background: var(--main-color);\n    border-radius: 45px;\n}\n\n.etyaak0 {\n    position: absolute;\n    left: 0;\n    bottom: 784px;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}