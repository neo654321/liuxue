{"ast":null,"code":"import _objectSpread from \"/Users/neo/Desktop/liuxue/app-h5/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"/Users/neo/Desktop/liuxue/app-h5/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/neo/Desktop/liuxue/app-h5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"vant/es/dialog/style\";\nimport _Dialog from \"vant/es/dialog\";\nimport \"vant/es/popup/style\";\nimport _Popup from \"vant/es/popup\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport { mapGetters } from 'vuex';\nimport { gerenxinxi_post, apilogoff, huoquyue_post } from '@/API/user';\nimport EnterPassword from \"@/components/EnterPassword/index.vue\";\nexport default {\n  components: {\n    EnterPassword,\n    [_Popup.name]: _Popup,\n    [_Dialog.name]: _Dialog\n  },\n  data() {\n    return {\n      itemName: process.env.VUE_APP_ITEM_NAME,\n      formLabelAlign: {\n        account: '',\n        reason: '',\n        cashPassword: ''\n      },\n      pwtStatus: false\n    };\n  },\n  created() {\n    var _this = this;\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _yield$gerenxinxi_pos, username;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return gerenxinxi_post({});\n          case 2:\n            _yield$gerenxinxi_pos = _context.sent;\n            username = _yield$gerenxinxi_pos.username;\n            _this.formLabelAlign.account = username;\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }))();\n  },\n  computed: _objectSpread({}, mapGetters({\n    userInfo: \"userInfo\",\n    userMoney: \"userMoney\"\n  })),\n  methods: {\n    onClickLeft() {\n      this.$router.go(-1);\n    },\n    onLogout() {\n      var _this2 = this;\n      if (this.formLabelAlign.account.trim() == '') {\n        this.$notify(this.$t('请输入您的账号'), 'warning');\n        return;\n      }\n      if (this.formLabelAlign.reason.trim() == '') {\n        this.$notify(this.$t('请输入您的离开原因'), 'warning');\n        return;\n      }\n      var message = this.$t('警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后可能几天内无法注册。');\n      if (process.env.VUE_APP_PUT_ON_SHELVES) {\n        message = this.$t('警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后72小时内无法注册。');\n      }\n      _Dialog.alert({\n        title: this.$t('您确认要注销账号吗？'),\n        message,\n        messageAlign: 'left',\n        showCancelButton: true,\n        confirmButtonText: this.$t('同意注销'),\n        confirmButtonColor: '#FF0000',\n        cancelButtonText: this.$t('取消'),\n        cancelButtonColor: '#999999'\n      }).then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _this2.$toast.loading();\n              // const { money } = await huoquyue_post()\n              // if (money !== 0) {\n              //     this.$notify(this.$t('该账号存在可用余额, 不可注销!'), 'warning')\n              //     this.$toast.clear()\n              //     return\n              // }\n              if (!(_this2.userMoney.money > 0)) {\n                _context2.next = 4;\n                break;\n              }\n              _this2.$notify(_this2.$t('您还有余额,不能注销账号'), 'warning');\n              return _context2.abrupt(\"return\");\n            case 4:\n              if (_this2.userInfo.safeword == 0) {\n                _this2.getPassword(null);\n              } else {\n                _this2.pwtStatus = true;\n              }\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      })));\n    },\n    getPassword(value) {\n      var _this3 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _this3.formLabelAlign.cashPassword = value;\n              _this3.$toast.loading();\n              if (!(value == '')) {\n                _context3.next = 6;\n                break;\n              }\n              _this3.$notify(_this3.$t('请输入密码'), 'warning');\n              _this3.$toast.clear();\n              return _context3.abrupt(\"return\");\n            case 6:\n              _context3.prev = 6;\n              _context3.next = 9;\n              return apilogoff(_this3.formLabelAlign);\n            case 9:\n              res = _context3.sent;\n              _this3.$toast.clear();\n              _this3.$notify(_this3.$t('注销成功'), 'success');\n              _this3.$router.replace('/login');\n              _context3.next = 18;\n              break;\n            case 15:\n              _context3.prev = 15;\n              _context3.t0 = _context3[\"catch\"](6);\n              console.log(\"error ::->\", _context3.t0);\n            case 18:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[6, 15]]);\n      }))();\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}