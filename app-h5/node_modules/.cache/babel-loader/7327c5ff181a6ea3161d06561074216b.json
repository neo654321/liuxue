{"ast":null,"code":"var _regeneratorRuntime = require(\"/Users/neo/Desktop/mallV2/app-h5/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\nrequire(\"core-js/modules/es.symbol.description.js\");\nrequire(\"core-js/modules/es.regexp.exec.js\");\nrequire(\"core-js/modules/web.dom-exception.constructor.js\");\nrequire(\"core-js/modules/web.dom-exception.stack.js\");\nrequire(\"core-js/modules/web.dom-exception.to-string-tag.js\");\nrequire(\"core-js/modules/es.array-buffer.slice.js\");\nrequire(\"core-js/modules/es.typed-array.uint8-array.js\");\nrequire(\"core-js/modules/es.typed-array.at.js\");\nrequire(\"core-js/modules/es.typed-array.fill.js\");\nrequire(\"core-js/modules/es.typed-array.set.js\");\nrequire(\"core-js/modules/es.typed-array.sort.js\");\nrequire(\"core-js/modules/esnext.typed-array.find-last.js\");\nrequire(\"core-js/modules/esnext.typed-array.find-last-index.js\");\nrequire(\"core-js/modules/es.error.cause.js\");\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\nrequire(\"core-js/modules/web.url.js\");\nrequire(\"core-js/modules/web.url-search-params.js\");\nrequire(\"core-js/modules/es.array.sort.js\");\n!function (t, e) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = e() : \"function\" == typeof define && define.amd ? define([], e) : \"object\" == typeof exports ? exports.imageConversion = e() : t.imageConversion = e();\n}(this, function () {\n  return function (t) {\n    var e = {};\n    function n(r) {\n      if (e[r]) return e[r].exports;\n      var o = e[r] = {\n        i: r,\n        l: !1,\n        exports: {}\n      };\n      return t[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports;\n    }\n    return n.m = t, n.c = e, n.d = function (t, e, r) {\n      n.o(t, e) || Object.defineProperty(t, e, {\n        enumerable: !0,\n        get: r\n      });\n    }, n.r = function (t) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n    }, n.t = function (t, e) {\n      if (1 & e && (t = n(t)), 8 & e) return t;\n      if (4 & e && \"object\" == typeof t && t && t.__esModule) return t;\n      var r = Object.create(null);\n      if (n.r(r), Object.defineProperty(r, \"default\", {\n        enumerable: !0,\n        value: t\n      }), 2 & e && \"string\" != typeof t) for (var o in t) {\n        n.d(r, o, function (e) {\n          return t[e];\n        }.bind(null, o));\n      }\n      return r;\n    }, n.n = function (t) {\n      var e = t && t.__esModule ? function () {\n        return t.default;\n      } : function () {\n        return t;\n      };\n      return n.d(e, \"a\", e), e;\n    }, n.o = function (t, e) {\n      return Object.prototype.hasOwnProperty.call(t, e);\n    }, n.p = \"\", n(n.s = 0);\n  }([function (t, e, n) {\n    \"use strict\";\n\n    var r;\n    function o(t) {\n      return [\"image/png\", \"image/jpeg\", \"image/gif\"].some(function (e) {\n        return e === t;\n      });\n    }\n    n.r(e), n.d(e, \"canvastoDataURL\", function () {\n      return a;\n    }), n.d(e, \"canvastoFile\", function () {\n      return c;\n    }), n.d(e, \"dataURLtoFile\", function () {\n      return s;\n    }), n.d(e, \"dataURLtoImage\", function () {\n      return l;\n    }), n.d(e, \"downloadFile\", function () {\n      return d;\n    }), n.d(e, \"filetoDataURL\", function () {\n      return f;\n    }), n.d(e, \"imagetoCanvas\", function () {\n      return g;\n    }), n.d(e, \"urltoBlob\", function () {\n      return w;\n    }), n.d(e, \"urltoImage\", function () {\n      return m;\n    }), n.d(e, \"compress\", function () {\n      return p;\n    }), n.d(e, \"compressAccurately\", function () {\n      return b;\n    }), n.d(e, \"EImageType\", function () {\n      return r;\n    }), function (t) {\n      t.PNG = \"image/png\", t.JPEG = \"image/jpeg\", t.GIF = \"image/gif\";\n    }(r || (r = {}));\n    var i = function i(t, e, n, r) {\n      return new (n || (n = Promise))(function (o, i) {\n        function a(t) {\n          try {\n            u(r.next(t));\n          } catch (t) {\n            i(t);\n          }\n        }\n        function c(t) {\n          try {\n            u(r.throw(t));\n          } catch (t) {\n            i(t);\n          }\n        }\n        function u(t) {\n          var e;\n          t.done ? o(t.value) : (e = t.value, e instanceof n ? e : new n(function (t) {\n            t(e);\n          })).then(a, c);\n        }\n        u((r = r.apply(t, e || [])).next());\n      });\n    };\n    function a(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .92;\n      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : r.JPEG;\n      return i(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", (o(n) || (n = r.JPEG), t.toDataURL(n, e)));\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n    }\n    function c(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .92;\n      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : r.JPEG;\n      return new Promise(function (r) {\n        return t.toBlob(function (t) {\n          return r(t);\n        }, n, e);\n      });\n    }\n    var u = function u(t, e, n, r) {\n      return new (n || (n = Promise))(function (o, i) {\n        function a(t) {\n          try {\n            u(r.next(t));\n          } catch (t) {\n            i(t);\n          }\n        }\n        function c(t) {\n          try {\n            u(r.throw(t));\n          } catch (t) {\n            i(t);\n          }\n        }\n        function u(t) {\n          var e;\n          t.done ? o(t.value) : (e = t.value, e instanceof n ? e : new n(function (t) {\n            t(e);\n          })).then(a, c);\n        }\n        u((r = r.apply(t, e || [])).next());\n      });\n    };\n    function s(t, e) {\n      return u(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var n, r, i, a, c;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                n = t.split(\",\");\n                r = n[0].match(/:(.*?);/)[1];\n                i = atob(n[1]);\n                a = i.length;\n                c = new Uint8Array(a);\n                for (; a--;) {\n                  c[a] = i.charCodeAt(a);\n                }\n                return _context2.abrupt(\"return\", (o(e) && (r = e), new Blob([c], {\n                  type: r\n                })));\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n    }\n    function l(t) {\n      return new Promise(function (e, n) {\n        var r = new Image();\n        r.onload = function () {\n          return e(r);\n        }, r.onerror = function () {\n          return n(new Error(\"dataURLtoImage(): dataURL is illegal\"));\n        }, r.src = t;\n      });\n    }\n    function d(t, e) {\n      var n = document.createElement(\"a\");\n      n.href = window.URL.createObjectURL(t), n.download = e || Date.now().toString(36), document.body.appendChild(n);\n      var r = document.createEvent(\"MouseEvents\");\n      r.initEvent(\"click\", !1, !1), n.dispatchEvent(r), document.body.removeChild(n);\n    }\n    function f(t) {\n      return new Promise(function (e) {\n        var n = new FileReader();\n        n.onloadend = function (t) {\n          return e(t.target.result);\n        }, n.readAsDataURL(t);\n      });\n    }\n    var h = function h(t, e, n, r) {\n      return new (n || (n = Promise))(function (o, i) {\n        function a(t) {\n          try {\n            u(r.next(t));\n          } catch (t) {\n            i(t);\n          }\n        }\n        function c(t) {\n          try {\n            u(r.throw(t));\n          } catch (t) {\n            i(t);\n          }\n        }\n        function u(t) {\n          var e;\n          t.done ? o(t.value) : (e = t.value, e instanceof n ? e : new n(function (t) {\n            t(e);\n          })).then(a, c);\n        }\n        u((r = r.apply(t, e || [])).next());\n      });\n    };\n    function g(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return h(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var n, r, o, i, a, _t, _e;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                n = Object.assign({}, e), r = document.createElement(\"canvas\"), o = r.getContext(\"2d\");\n                for (_t in n) {\n                  Object.prototype.hasOwnProperty.call(n, _t) && (n[_t] = Number(n[_t]));\n                }\n                if (n.scale) {\n                  _e = n.scale > 0 && n.scale < 10 ? n.scale : 1;\n                  a = t.width * _e, i = t.height * _e;\n                } else a = n.width || n.height * t.width / t.height || t.width, i = n.height || n.width * t.height / t.width || t.height;\n                _context3.t0 = ([5, 6, 7, 8].some(function (t) {\n                  return t === n.orientation;\n                }) ? (r.height = a, r.width = i) : (r.height = i, r.width = a), n.orientation);\n                _context3.next = _context3.t0 === 3 ? 6 : _context3.t0 === 6 ? 8 : _context3.t0 === 8 ? 10 : _context3.t0 === 2 ? 12 : _context3.t0 === 4 ? 14 : _context3.t0 === 5 ? 16 : _context3.t0 === 7 ? 18 : 20;\n                break;\n              case 6:\n                o.rotate(180 * Math.PI / 180), o.drawImage(t, -r.width, -r.height, r.width, r.height);\n                return _context3.abrupt(\"break\", 21);\n              case 8:\n                o.rotate(90 * Math.PI / 180), o.drawImage(t, 0, -r.width, r.height, r.width);\n                return _context3.abrupt(\"break\", 21);\n              case 10:\n                o.rotate(270 * Math.PI / 180), o.drawImage(t, -r.height, 0, r.height, r.width);\n                return _context3.abrupt(\"break\", 21);\n              case 12:\n                o.translate(r.width, 0), o.scale(-1, 1), o.drawImage(t, 0, 0, r.width, r.height);\n                return _context3.abrupt(\"break\", 21);\n              case 14:\n                o.translate(r.width, 0), o.scale(-1, 1), o.rotate(180 * Math.PI / 180), o.drawImage(t, -r.width, -r.height, r.width, r.height);\n                return _context3.abrupt(\"break\", 21);\n              case 16:\n                o.translate(r.width, 0), o.scale(-1, 1), o.rotate(90 * Math.PI / 180), o.drawImage(t, 0, -r.width, r.height, r.width);\n                return _context3.abrupt(\"break\", 21);\n              case 18:\n                o.translate(r.width, 0), o.scale(-1, 1), o.rotate(270 * Math.PI / 180), o.drawImage(t, -r.height, 0, r.height, r.width);\n                return _context3.abrupt(\"break\", 21);\n              case 20:\n                o.drawImage(t, 0, 0, r.width, r.height);\n              case 21:\n                return _context3.abrupt(\"return\", r);\n              case 22:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n    }\n    function w(t) {\n      return fetch(t).then(function (t) {\n        return t.blob();\n      });\n    }\n    function m(t) {\n      return new Promise(function (e, n) {\n        var r = new Image();\n        r.onload = function () {\n          return e(r);\n        }, r.onerror = function () {\n          return n(new Error(\"urltoImage(): Image failed to load, please check the image URL\"));\n        }, r.src = t;\n      });\n    }\n    var y = function y(t, e, n, r) {\n      return new (n || (n = Promise))(function (o, i) {\n        function a(t) {\n          try {\n            u(r.next(t));\n          } catch (t) {\n            i(t);\n          }\n        }\n        function c(t) {\n          try {\n            u(r.throw(t));\n          } catch (t) {\n            i(t);\n          }\n        }\n        function u(t) {\n          var e;\n          t.done ? o(t.value) : (e = t.value, e instanceof n ? e : new n(function (t) {\n            t(e);\n          })).then(a, c);\n        }\n        u((r = r.apply(t, e || [])).next());\n      });\n    };\n    function p(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return y(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n        var n, i, c, u, d, h, w;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                if (t instanceof Blob) {\n                  _context4.next = 2;\n                  break;\n                }\n                throw new Error(\"compress(): First arg must be a Blob object or a File object.\");\n              case 2:\n                if (!(\"object\" != typeof e && (e = Object.assign({\n                  quality: e\n                })), e.quality = Number(e.quality), Number.isNaN(e.quality))) {\n                  _context4.next = 4;\n                  break;\n                }\n                return _context4.abrupt(\"return\", t);\n              case 4:\n                _context4.next = 6;\n                return f(t);\n              case 6:\n                n = _context4.sent;\n                i = n.split(\",\")[0].match(/:(.*?);/)[1], c = r.JPEG;\n                o(e.type) && (c = e.type, i = e.type);\n                _context4.next = 11;\n                return l(n);\n              case 11:\n                u = _context4.sent;\n                _context4.next = 14;\n                return g(u, Object.assign({}, e));\n              case 14:\n                d = _context4.sent;\n                _context4.next = 17;\n                return a(d, e.quality, c);\n              case 17:\n                h = _context4.sent;\n                _context4.next = 20;\n                return s(h, i);\n              case 20:\n                w = _context4.sent;\n                return _context4.abrupt(\"return\", w.size > t.size ? t : w);\n              case 22:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n    }\n    function b(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return y(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var n, i, c, u, d, h, w, m, y, p, b, _t2, _e2, v;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (t instanceof Blob) {\n                  _context5.next = 2;\n                  break;\n                }\n                throw new Error(\"compressAccurately(): First arg must be a Blob object or a File object.\");\n              case 2:\n                if (!(\"object\" != typeof e && (e = Object.assign({\n                  size: e\n                })), e.size = Number(e.size), Number.isNaN(e.size))) {\n                  _context5.next = 4;\n                  break;\n                }\n                return _context5.abrupt(\"return\", t);\n              case 4:\n                if (!(1024 * e.size > t.size)) {\n                  _context5.next = 6;\n                  break;\n                }\n                return _context5.abrupt(\"return\", t);\n              case 6:\n                e.accuracy = Number(e.accuracy), (!e.accuracy || e.accuracy < .8 || e.accuracy > .99) && (e.accuracy = .95);\n                n = e.size * (2 - e.accuracy) * 1024;\n                i = 1024 * e.size;\n                c = e.size * e.accuracy * 1024;\n                _context5.next = 12;\n                return f(t);\n              case 12:\n                u = _context5.sent;\n                d = u.split(\",\")[0].match(/:(.*?);/)[1], h = r.JPEG;\n                o(e.type) && (h = e.type, d = e.type);\n                _context5.next = 17;\n                return l(u);\n              case 17:\n                w = _context5.sent;\n                _context5.next = 20;\n                return g(w, Object.assign({}, e));\n              case 20:\n                m = _context5.sent;\n                p = .5;\n                b = [null, null];\n                _t2 = 1;\n              case 24:\n                if (!(_t2 <= 7)) {\n                  _context5.next = 42;\n                  break;\n                }\n                _context5.next = 27;\n                return a(m, p, h);\n              case 27:\n                y = _context5.sent;\n                _e2 = .75 * y.length;\n                if (!(7 === _t2)) {\n                  _context5.next = 32;\n                  break;\n                }\n                (n < _e2 || c > _e2) && (y = [y].concat(b).filter(function (t) {\n                  return t;\n                }).sort(function (t, e) {\n                  return Math.abs(.75 * t.length - i) - Math.abs(.75 * e.length - i);\n                })[0]);\n                return _context5.abrupt(\"break\", 42);\n              case 32:\n                if (!(n < _e2)) {\n                  _context5.next = 36;\n                  break;\n                }\n                b[1] = y, p -= Math.pow(.5, _t2 + 1);\n                _context5.next = 39;\n                break;\n              case 36:\n                if (c > _e2) {\n                  _context5.next = 38;\n                  break;\n                }\n                return _context5.abrupt(\"break\", 42);\n              case 38:\n                b[0] = y, p += Math.pow(.5, _t2 + 1);\n              case 39:\n                _t2++;\n                _context5.next = 24;\n                break;\n              case 42:\n                _context5.next = 44;\n                return s(y, d);\n              case 44:\n                v = _context5.sent;\n                return _context5.abrupt(\"return\", v.size > t.size ? t : v);\n              case 46:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n    }\n  }]);\n});","map":null,"metadata":{},"sourceType":"script"}