{"ast":null,"code":"import _regeneratorRuntime from \"/Users/neo/Desktop/mallV2/app-h5/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/neo/Desktop/mallV2/app-h5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _defineProperty from \"/Users/neo/Desktop/mallV2/app-h5/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"vant/es/overlay/style\";\nimport _Overlay from \"vant/es/overlay\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/web.timers.js\";\nimport { mapMutations, mapGetters } from \"vuex\";\nimport { apiHeartbeat, apiGetMaxBuyNum, apiGetCustomerService } from '@/API/common';\nimport { apiApplyLoan } from \"./API/loan\";\nexport default {\n  name: \"App\",\n  data: function data() {\n    return {\n      show: false,\n      timer: \"\",\n      itemData: this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME],\n      itemName: process.env.VUE_APP_ITEM_NAME,\n      mainColor: process.env.VUE_APP_MAIN_COLOR\n    };\n  },\n  components: _defineProperty({}, _Overlay.name, _Overlay),\n  created: function created() {\n    if (this.$route.query.lang) {\n      if (this.$route.query.lang == \"cn\") {\n        this.handleSetLang(\"cn\");\n      } else {\n        this.handleSetLang(\"en\");\n      }\n    }\n    if (window.plus) {\n      this.plusReady();\n    } else {\n      document.addEventListener(\"plusready\", this.plusReady, false);\n    }\n    var link = document.head.querySelector(\"link\");\n    link.href = require(\"@/assets/\".concat(this.itemName, \"/favicon.png\"));\n    document.title = this.itemName;\n    // 刷新事件\n    window.addEventListener(\"beforeunload\", function () {\n      sessionStorage.removeItem(\"scrollTopCount\");\n      // sessionStorage.removeItem(\"showLoading\")\n    });\n    if (localStorage.getItem('lang') == 'en-US') localStorage.setItem('lang', 'en');\n    setInterval(function () {\n      var token = localStorage.getItem(\"token\");\n      token && apiHeartbeat();\n    }, 1000 * 60 * 5);\n    this.getMaxBuyNum();\n    this.getCustomerService();\n  },\n  methods: {\n    plusReady: function plusReady() {\n      // H5 plus事件处理\n      // eslint-disable-next-line no-undef\n      plus.screen.lockOrientation(\"portrait-primary\");\n\n      // 设置系统状态栏背景为红色\n      // eslint-disable-next-line no-undef\n      // var type = plus.os.name;\n      // if (type === \"Android\" || type === \"iOS\") {\n      //     switch (this.$route.path) {\n      //         case \"/me\":\n      //             // eslint-disable-next-line no-undef\n      //             plus.navigator.setStatusBarStyle(\"light\");\n      //             // eslint-disable-next-line no-undef\n      //             plus.navigator.setStatusBarBackground(this.mainColor);\n      //             break;\n      //         default:\n      //             // eslint-disable-next-line no-undef\n      //             plus.navigator.setStatusBarStyle(\"dark\");\n      //             // eslint-disable-next-line no-undef\n      //             plus.navigator.setStatusBarBackground(\"#ffffff\");\n      //     }\n      // }\n    },\n    // 获取商品最大购买数\n    getMaxBuyNum: function getMaxBuyNum() {\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _yield$apiGetMaxBuyNu, mall_max_goods_number_in_order;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return apiGetMaxBuyNum({\n                  code: 'mall_max_goods_number_in_order'\n                });\n              case 2:\n                _yield$apiGetMaxBuyNu = _context.sent;\n                mall_max_goods_number_in_order = _yield$apiGetMaxBuyNu.mall_max_goods_number_in_order;\n                localStorage.setItem('maxBuyNum', mall_max_goods_number_in_order);\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    // 获取客服地址\n    getCustomerService: function getCustomerService() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _yield$apiGetCustomer, customer_service_url;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return apiGetCustomerService('?code=customer_service_url');\n              case 2:\n                _yield$apiGetCustomer = _context2.sent;\n                customer_service_url = _yield$apiGetCustomer.customer_service_url;\n                if (customer_service_url) {\n                  _this.$store.state.multiItem[_this.itemName].customer_service = customer_service_url;\n                }\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    },\n    handleSetLang: function handleSetLang(lang) {\n      // 设置i18n.locale 组件库会按照上面的配置使用对应的文案文件\n      this.$i18n.locale = lang;\n      // 提交mutations\n      this.setLanguage(lang);\n    }\n  },\n  watch: {\n    \"$store.state\": function $storeState(newVal) {\n      if ($store.state.qiangdan.qiangdan_status) {\n        this.show = true;\n      }\n    },\n    $route: function $route(to, from) {\n      if (to.name !== 'home') {\n        document.body.scrollTop = 0;\n        document.documentElement.scrollTop = 0;\n      } else {\n        setTimeout(function () {\n          window.scrollTo({\n            top: sessionStorage.getItem(\"scrollTopCount\"),\n            behavior: \"smooth\"\n          });\n        }, 500);\n      }\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearInterval(this.timer);\n  }\n};","map":null,"metadata":{},"sourceType":"module"}