{"ast":null,"code":"import \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport _Option2 from \"element-ui/lib/theme-chalk/option.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Option from \"element-ui/lib/option\";\nimport _Select2 from \"element-ui/lib/theme-chalk/select.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Select from \"element-ui/lib/select\";\nimport \"vant/es/uploader/style\";\nimport _Uploader from \"vant/es/uploader\";\nimport _Input2 from \"element-ui/lib/theme-chalk/input.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Input from \"element-ui/lib/input\";\nimport _FormItem2 from \"element-ui/lib/theme-chalk/form-item.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _FormItem from \"element-ui/lib/form-item\";\nimport _Form2 from \"element-ui/lib/theme-chalk/form.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Form from \"element-ui/lib/form\";\nimport \"vant/es/button/style\";\nimport _Button from \"vant/es/button\";\nimport \"vant/es/checkbox/style\";\nimport _Checkbox from \"vant/es/checkbox\";\nimport _Dropdown2 from \"element-ui/lib/theme-chalk/dropdown.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _Dropdown from \"element-ui/lib/dropdown\";\nimport _DropdownItem2 from \"element-ui/lib/theme-chalk/dropdown-item.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _DropdownItem from \"element-ui/lib/dropdown-item\";\nimport _DropdownMenu2 from \"element-ui/lib/theme-chalk/dropdown-menu.css\";\nimport \"element-ui/lib/theme-chalk/base.css\";\nimport _DropdownMenu from \"element-ui/lib/dropdown-menu\";\nimport _objectSpread from \"/Users/neo/Desktop/node/liuxue/app-h5/node_modules/.pnpm/@babel+runtime@7.20.7/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport merChantHeader from \"./components/mer-chant-header\";\nimport merChantFooter from \"./components/mer-chant-footer\";\nimport submitSuccess from \"./components/submit-success.vue\";\nimport { mapGetters, mapMutations } from \"vuex\";\nimport { sellerRegister, uploadimg, getStatus } from \"@/API/commodity\";\nimport NationalityList from '@/components/NationalityList';\nimport { ref } from \"vue\";\nimport cropperjs from './components/cropperjs.vue';\nexport default {\n  name: \"merchantSettled\",\n  data() {\n    return {\n      mainColor: process.env.VUE_APP_MAIN_COLOR,\n      isCutting: false,\n      // 是否裁剪\n      imgFile: 'https://bpic.588ku.com/element_water_img/18/06/12/b2887846cb19ff36a5502401ac918809.jpg',\n      ratioWidth: 1,\n      // 裁剪比例：长 自由比例设置为: 0 即可\n      ratioHeight: 1,\n      // 裁剪比例：宽 自由比例设置为: 0 即可\n      step: 1,\n      checked: false,\n      screenWidth: document.body.clientWidth,\n      type: 'Email',\n      //Email/Moblie\n      uploadCheckIndex: 1,\n      areaCode: 1,\n      ruleForm: {\n        type: 1,\n        //1/手机；2/邮箱；\n        usercode: '',\n        name: '',\n        idimg_1: '',\n        idimg_2: '',\n        idimg_3: '',\n        idname: '身份证',\n        idnumber: '',\n        nationality: '',\n        sellerImg: '',\n        username: '',\n        password: '',\n        re_password: '',\n        sellerName: '',\n        sellerAddress: ''\n      },\n      labelPosition: 'top',\n      isCode: true,\n      rules: {\n        idname: [{\n          required: true,\n          message: this.$t('请输入身份证或者护照号'),\n          trigger: 'blur'\n        }],\n        idimg_1: [{\n          required: true,\n          message: this.$t('请上传身份证正面'),\n          trigger: 'blur'\n        }],\n        idimg_2: [{\n          required: true,\n          message: this.$t('请上传身份证反面'),\n          trigger: 'blur'\n        }],\n        idimg_3: [{\n          required: true,\n          message: this.$t('请上传手持身份证'),\n          trigger: 'blur'\n        }],\n        re_password: [{\n          required: true,\n          message: this.$t('请确认输入登录密码'),\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: this.$t('请输入登录密码'),\n          trigger: 'blur'\n        }],\n        sellerImg: [{\n          required: true,\n          message: this.$t('请上传店铺logo'),\n          trigger: 'blur'\n        }],\n        username: [{\n          required: true,\n          message: this.$t('请输入正确的数据'),\n          trigger: 'blur'\n        }],\n        idnumber: [{\n          required: true,\n          message: this.$t('请输入身份证或者护照号'),\n          trigger: 'blur'\n        }],\n        name: [{\n          required: true,\n          message: this.$t('请输入真实姓名'),\n          trigger: 'blur'\n        }],\n        sellerName: [{\n          required: true,\n          message: this.$t('请输入店铺名称'),\n          trigger: 'blur'\n        }],\n        sellerAddress: [{\n          required: true,\n          message: this.$t('请输入店铺地址'),\n          trigger: 'blur'\n        }],\n        usercode: [{\n          required: true,\n          message: this.$t('请输入邀请码'),\n          trigger: 'blur'\n        }]\n      },\n      options: [{\n        label: this.$t('身份证'),\n        value: '身份证'\n      }, {\n        label: this.$t('护照'),\n        value: '护照'\n      }],\n      fileList1: [],\n      fileList2: [],\n      fileList3: [],\n      fileList4: [],\n      CountryList: [{\n        label: '中国',\n        value: 'cn',\n        icon: require('@/assets/image/language/cn.png')\n      }],\n      tabList: [this.$t('电子邮箱'), this.$t('手机号')],\n      tabIndex: 0,\n      lang: [{\n        title: '简体中文',\n        key: 'cn',\n        icon: require('@/assets/image/language/cn.png')\n      }, {\n        title: 'English',\n        key: 'en',\n        icon: require('@/assets/image/language/usa.png')\n      }, {\n        title: '繁体中文',\n        key: 'tw',\n        icon: require('@/assets/image/language/tw.png')\n      }],\n      pageDiaCode: true\n    };\n  },\n  computed: _objectSpread({\n    languageIcon() {\n      var language = this.$store.getters.language || 'tw';\n      var icon = {\n        'cn': require('@/assets/image/language/cn.png'),\n        'en': require('@/assets/image/language/usa.png'),\n        'tw': require('@/assets/image/language/tw.png')\n      };\n      return icon[language];\n    }\n  }, mapGetters({\n    activeLang: 'language'\n  })),\n  components: {\n    cropperjs,\n    merChantHeader,\n    NationalityList,\n    merChantFooter,\n    submitSuccess,\n    [_DropdownMenu.name]: _DropdownMenu,\n    [_DropdownItem.name]: _DropdownItem,\n    [_Dropdown.name]: _Dropdown,\n    [_Checkbox.name]: _Checkbox,\n    [_Button.name]: _Button,\n    [_Form.name]: _Form,\n    [_FormItem.name]: _FormItem,\n    [_Input.name]: _Input,\n    [_Uploader.name]: _Uploader,\n    [_Select.name]: _Select,\n    [_Option.name]: _Option,\n    [_Toast.name]: _Toast\n  },\n  created() {\n    if (this.screenWidth >= 500) {\n      this.labelPosition = \"left\";\n    } else {\n      this.labelPosition = \"top\";\n    }\n  },\n  watch: {\n    tabIndex(val, old) {\n      if (val === old) return;\n      this.ruleForm.username = '';\n      this.ruleForm.password = '';\n      this.ruleForm.re_password = '';\n    }\n  },\n  methods: _objectSpread(_objectSpread({\n    // 裁剪\n    handleCutting() {\n      this.isCutting = true;\n    },\n    // 取消\n    handleCancel() {\n      this.isCutting = false;\n      this.fileList1 = [];\n    },\n    // 上传\n    handleUpload(data) {\n      var _this = this;\n      var fileOfBlob = new File([data], \"logo.png\"); // 重命名\n      _Toast.loading({\n        duration: 0,\n        message: this.$t('上传中'),\n        forbidClick: true\n      });\n      var formData = new FormData(); //通过formdata上传\n      formData.append('file', fileOfBlob);\n      formData.append('moduleName', 'selle');\n      uploadimg(formData).then(function (data) {\n        _this.ruleForm.sellerImg = data;\n        _this.isCutting = false;\n        _this.fileList1[0].content = data;\n        // this.fileList1[0].file=fileOfBlob\n      }).finally(function () {\n        _Toast.clear();\n      });\n    },\n    // 裁剪\n    handleCropData(data) {\n      console.log('裁剪数据');\n      console.log(data);\n    }\n  }, mapMutations(['setLanguage'])), {}, {\n    handleSetLang(index) {\n      console.log(index);\n      // 设置i18n.locale 组件库会按照上面的配置使用对应的文案文件\n      this.$i18n.locale = this.lang[index].key;\n      // // 提交mutations\n      this.setLanguage(this.lang[index].key);\n    },\n    handleDelete(index) {\n      this[\"fileList\".concat(index)] = [];\n    },\n    //商户注册\n    sellerRegister() {\n      var _this2 = this;\n      // if (this.ruleForm.idname == '身份证') {\n\n      // } else {\n      //   if (!this.ruleForm.idimg_1) {\n      //     Toast(this.$t('请上传护照'))\n      //     return\n      //   }\n      // }\n      if (!this.checked) {\n        _Toast(this.$t('请同意入驻协议'));\n        return;\n      }\n      // if (this.ruleForm.name == '护照') {\n      //   this.ruleForm.idimg_2 = '1111',\n      //   this.ruleForm.idimg_3 = '1111'\n      // }\n      this.ruleForm.type = this.tabIndex === 0 ? 2 : 1;\n      this.$refs['ruleForm'].validate(function (valid) {\n        if (valid) {\n          if (!_this2.ruleForm.idimg_1 || !_this2.ruleForm.idimg_2 || !_this2.ruleForm.idimg_3) {\n            _Toast(_this2.$t('请上传证件照片'));\n          } else {\n            sellerRegister(_this2.ruleForm).then(function (res) {\n              _this2.step = 3;\n              _this2.$el.querySelector('#product').scrollIntoView({\n                behavior: 'smooth'\n              });\n            });\n          }\n        } else {\n          return false;\n        }\n      });\n    },\n    stepFun() {\n      if (!this.checked) {\n        _Toast(this.$t('请同意入驻协议'));\n        return;\n      }\n      this.step = 2;\n      this.$el.querySelector('#product').scrollIntoView({\n        behavior: 'smooth'\n      });\n    },\n    openNationality(index) {\n      if (index === 1) {\n        this.isCode = true;\n      } else {\n        this.isCode = false;\n      }\n      this.$refs.controlChild.open();\n    },\n    getName(params) {\n      if (this.isCode) {\n        this.areaCode = params[2];\n      } else {\n        this.ruleForm.nationality = params[0];\n      }\n    },\n    //文件上传\n    afterRead1(file) {\n      this.imgFile = file.content;\n      this.isCutting = true;\n      // Toast.loading({\n      //   duration: 0,\n      //   message: this.$t('上传中'),\n      //   forbidClick: true,\n      // })\n      // console.log(file)\n      // let formData = new FormData();//通过formdata上传\n      // formData.append('file', file.file)\n      // formData.append('moduleName', 'selle')\n\n      // uploadimg(formData).then((data) => {\n      //   Toast.clear()\n      //   this.ruleForm.sellerImg = data\n      // })\n    },\n\n    //文件上传\n    afterRead2(file) {\n      var _this3 = this;\n      _Toast.loading({\n        duration: 0,\n        message: this.$t('上传中'),\n        forbidClick: true\n      });\n      var formData = new FormData(); //通过formdata上传\n      formData.append('file', file.file);\n      formData.append('moduleName', 'selle');\n      uploadimg(formData).then(function (data) {\n        _this3.ruleForm.idimg_1 = data;\n      }).catch(function (error) {\n        _this3.fileList2 = [];\n        _Toast.fail(_this3.$t('上传失败'));\n      }).finally(function () {\n        _Toast.clear();\n      });\n    },\n    //文件上传\n    afterRead3(file) {\n      var _this4 = this;\n      _Toast.loading({\n        duration: 0,\n        message: this.$t('上传中'),\n        forbidClick: true\n      });\n      var formData = new FormData(); //通过formdata上传\n      formData.append('file', file.file);\n      formData.append('moduleName', 'selle');\n      uploadimg(formData).then(function (data) {\n        _this4.ruleForm.idimg_2 = data;\n      }).catch(function (error) {\n        _this4.fileList3 = [];\n        _Toast.fail(_this4.$t('上传失败'));\n      }).finally(function () {\n        _Toast.clear();\n      });\n    },\n    //文件上传\n    afterRead4(file) {\n      var _this5 = this;\n      _Toast.loading({\n        duration: 0,\n        message: this.$t('上传中'),\n        forbidClick: true\n      });\n      var formData = new FormData(); //通过formdata上传\n      formData.append('file', file.file);\n      formData.append('moduleName', 'selle');\n      uploadimg(formData).then(function (data) {\n        _this5.ruleForm.idimg_3 = data;\n      }).catch(function (error) {\n        _this5.fileList4 = [];\n        _Toast.fail(_this5.$t('上传失败'));\n      }).finally(function () {\n        _Toast.clear();\n      });\n    }\n  })\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}