{"ast":null,"code":"import _regeneratorRuntime from \"/Users/neo/Desktop/mall_vue/app-h5/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/neo/Desktop/mall_vue/app-h5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"vant/es/empty/style\";\nimport _Empty from \"vant/es/empty\";\nimport \"core-js/modules/es.array.push.js\";\nimport { apiLoanMy, apiLoanMyRecord, apiCheckAvailability } from '@/API/loan';\nimport { getStorage, priceFormat } from '@/utils/utis';\nimport Footer from '@/components/Footer';\nexport default {\n  components: {\n    Footer,\n    [_Empty.name]: _Empty\n  },\n  data() {\n    return {\n      priceFormat,\n      cardList: [{\n        title: this.$t('已贷款'),\n        value: 0\n      }, {\n        title: this.$t('产生利息'),\n        value: '--'\n      }, {\n        title: this.$t('预计还款'),\n        value: '--'\n      }],\n      isEn: getStorage('lang') !== 'cn' || getStorage('lang') !== 'tw',\n      pageNo: 1,\n      loanHistory: [],\n      applyAmount: '--',\n      isCheckAvailability: 'false'\n    };\n  },\n  mounted() {\n    this.requireMyLoan();\n    this.requireMyLoanRecord();\n    this.requireCheckAvailability();\n  },\n  methods: {\n    requireMyLoan() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return apiLoanMy();\n            case 2:\n              res = _context.sent;\n              _this.cardList[0].value = res.alreadyCreditDays;\n              _this.cardList[1].value = _this.priceFormat(res.interest) || '--';\n              _this.cardList[2].value = _this.priceFormat(res.estimatePayment) || '--';\n              _this.applyAmount = _this.priceFormat(res.applyAmount) || '--';\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    },\n    requireMyLoanRecord() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var res;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return apiLoanMyRecord({\n                pageNo: _this2.pageNo\n              });\n            case 2:\n              res = _context2.sent;\n              _this2.loanHistory = res.elements;\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    },\n    // 还款按钮\n    handleRepayment(status, id) {\n      if (status == 2 || status == 3) this.$router.push('/repayment/expected?creditId=' + id);\n      if (status == 4 || status == 5) this.$router.push('/loan/apply?creditId=' + id);\n    },\n    requireCheckAvailability() {\n      var _this3 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return apiCheckAvailability();\n            case 2:\n              _this3.isCheckAvailability = _context3.sent;\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["apiLoanMy","apiLoanMyRecord","apiCheckAvailability","getStorage","priceFormat","Footer","components","_Empty","name","data","cardList","title","$t","value","isEn","pageNo","loanHistory","applyAmount","isCheckAvailability","mounted","requireMyLoan","requireMyLoanRecord","requireCheckAvailability","methods","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","sent","alreadyCreditDays","interest","estimatePayment","stop","_this2","_callee2","_callee2$","_context2","elements","handleRepayment","status","id","$router","push","_this3","_callee3","_callee3$","_context3"],"sources":["src/page/loanMy/index.vue"],"sourcesContent":["<template>\n    <div class=\"my_loan\">\n        <van-nav-bar safe-area-inset-top :title=\"$t('我的贷款')\" left-arrow @click-left=\"$router.go(-1)\" fixed ref=\"header\">\n        </van-nav-bar>\n        <!-- 上方我的贷款 -->\n        <div :class=\"['top_card', isEn && 'en_card']\">\n            <div class=\"tt\">\n                <div class=\"tl\">\n                    <span>{{ $t('我的贷款') }}</span>\n                    <span>{{ applyAmount }}</span>\n                </div>\n                <!-- <div :class=\"['tr', isEn && 'en_tr']\">\n                    <span>{{ $t('申请贷款') }}</span>\n                </div> -->\n            </div>\n            <div class=\"tb\">\n                <div class=\"item\" v-for=\"(item, index) of cardList\" :key=\"index\"\n                    :class=\"isEn && index != 0 && 'en_item'\">\n                    <span>\n                        {{ item.value }}\n                        <em>{{ index == 0 ? $t('天') : '' }}</em>\n                    </span>\n                    <span>{{ item.title }}</span>\n                </div>\n            </div>\n        </div>\n        <!-- 贷款记录 -->\n        <div class=\"loan_history\">\n            <div class=\"title\">{{ $t('贷款记录') }}</div>\n            <ul>\n                <li v-for=\"(item, index) of loanHistory\" :key=\"index\" :class=\"isEn && 'en_li'\">\n                    <img src=\"@/assets/image/locn/icon.png\" alt=\"\">\n                    <div class=\"content\">\n                        <div class=\"top\">\n                            <div class=\"tleft\">\n                                <span>{{ priceFormat(item.applyAmount) }}</span>\n                                <span>{{ $t('申请日期') }}: {{ $formatZoneDate(item.customerSubmitTime) }}</span>\n                            </div>\n                            <div class=\"btn\" @click=\"handleRepayment(item.status, item.id)\" v-if=\"item.status != 1 && item.status != 5\">\n                                <button v-if=\"item.status == 2 || item.status == 3\">{{ $t('还款') }}</button>\n                                <button v-else-if=\"item.status == 4\">\n                                    {{ $t('重新申请') }}\n                                    <!-- :disabled=\"isCheckAvailability == 'false'\"\n                                    :class=\"isCheckAvailability == 'false' && 'disabled'\" -->\n                                </button>\n                            </div>\n                            <div class=\"null\" v-else>--</div>\n                        </div>\n                        <div class=\"btm\">\n                            <span>\n                                {{ $t('还款周期') }}:\n                                {{ item.creditPeriod }}<em>{{ $t('天') }}</em>\n                            </span>\n                            <span>{{ $t('固定利率') }}: {{ Math.floor(item.creditRate * 100) + '%' }}</span>\n                            <!-- <span v-if=\"item.status == 1\">{{ $t('借款成功') }}</span> -->\n                            <span v-if=\"item.status == 1\" style=\"color: var(--main-color);\">{{ $t('申请中') }}</span>\n                            <span v-if=\"item.status == 2\" style=\"color: #2FAA59;\">{{ $t('借款成功') }}</span>\n                            <span v-if=\"item.status == 3\" style=\"color: #E43434;\">{{ $t('已逾期') }}</span>\n                            <span v-if=\"item.status == 4\" style=\"color: #E43434;\">{{ $t('借款失败') }}</span>\n                            <span v-if=\"item.status == 5\" style=\"color: #EB9D38;\">{{ $t('已节清') }}</span>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n            <van-empty v-if=\"!loanHistory.length\" :description=\"$t('暂无数据')\" />\n        </div>\n        <Footer />\n    </div>\n</template>\n<script>\nimport { Empty } from 'vant'\nimport { apiLoanMy, apiLoanMyRecord, apiCheckAvailability } from '@/API/loan'\nimport { getStorage, priceFormat } from '@/utils/utis'\nimport Footer from '@/components/Footer'\nexport default {\n    components: { \n        Footer,\n        [Empty.name]: Empty\n     },\n    data() {\n        return {\n            priceFormat,\n            cardList: [\n                { title: this.$t('已贷款'), value: 0 },\n                { title: this.$t('产生利息'), value: '--' },\n                { title: this.$t('预计还款'), value: '--' },\n            ],\n            isEn: getStorage('lang') !== 'cn' || getStorage('lang') !== 'tw',\n            pageNo: 1,\n            loanHistory: [],\n            applyAmount: '--',\n            isCheckAvailability: 'false'\n        }\n    },\n    mounted() {\n        this.requireMyLoan()\n        this.requireMyLoanRecord()\n        this.requireCheckAvailability()\n    },\n    methods: {\n        async requireMyLoan() {\n            const res = await apiLoanMy()\n            this.cardList[0].value = res.alreadyCreditDays\n            this.cardList[1].value = this.priceFormat(res.interest) || '--'\n            this.cardList[2].value = this.priceFormat(res.estimatePayment) || '--'\n            this.applyAmount = this.priceFormat(res.applyAmount) || '--'\n        },\n        async requireMyLoanRecord() {\n            const res = await apiLoanMyRecord({ pageNo: this.pageNo })\n            this.loanHistory = res.elements\n        },\n        // 还款按钮\n        handleRepayment(status, id) {\n            if (status == 2 || status == 3) this.$router.push('/repayment/expected?creditId=' + id)\n            if (status == 4 || status == 5) this.$router.push('/loan/apply?creditId=' + id)\n        },\n        async requireCheckAvailability() {\n            this.isCheckAvailability = await apiCheckAvailability()\n        },\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.my_loan {\n    width: 100%;\n    min-height: 100vh;\n    background: #F3F5F9;\n    padding-top: 44px;\n    font-size: 14px;\n    // padding-bottom: 80px;\n\n    .top_card {\n        width: 345px;\n        height: 160px;\n        background: #fff;\n        margin: 11px auto;\n        border-radius: 4px;\n        padding: 15px;\n        box-sizing: border-box;\n\n        &.en_card {\n            height: 170px;\n        }\n\n        .tt {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n\n            .tl {\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                justify-content: center;\n                align-items: center;\n\n                span {\n                    &:nth-child(1) {\n                        font-weight: 600;\n                        font-size: 16px;\n\n                    }\n\n                    &:nth-child(2) {\n                        margin-top: 10px;\n                        font-weight: 600;\n                        font-size: 20px;\n                        color: var(--main-color);\n                    }\n                }\n            }\n\n            .tr {\n                width: 109px;\n                height: 34px;\n                background: var(--main-color);\n                border-radius: 4px;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                color: #fff;\n                font-weight: 500;\n                font-size: 14px;\n\n                &.en_tr {\n                    width: 115px;\n                    height: 36px;\n                }\n            }\n        }\n\n        .tb {\n            margin-top: 22px;\n            padding: 0 20px;\n            width: 100%;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            box-sizing: border-box;\n\n            .item {\n                display: flex;\n                flex-direction: column;\n                // justify-content: center;\n                // align-items: center;\n                flex: 0 0 33%;\n                text-align: center;\n\n                &:nth-child(1) {\n                    transform: translateX(-15px);\n                }\n\n                &:nth-child(3) {\n                    transform: translateX(15px);\n                }\n\n                &.en_item {\n\n                    &:nth-child(3) {\n                        transform: translate(15px, 7.5px);\n                    }\n\n                    &:nth-child(2) {\n                        transform: translate(0, 7.5px);\n                    }\n                }\n\n                span {\n                    em {\n                        font-size: 14px;\n                        font-style: normal;\n                    }\n\n                    &:nth-child(1) {\n                        font-weight: 600;\n                        font-size: 18px;\n                        color: var(--main-color);\n                    }\n\n                    &:nth-child(2) {\n                        margin-top: 6px;\n                        font-weight: 400;\n                        font-size: 12px;\n                        color: #999999;\n                    }\n                }\n            }\n        }\n    }\n\n    .loan_history {\n        margin-top: 19px;\n        padding: 0 14px 0 16px;\n        min-height: 55vh;\n\n        .title {\n            margin-bottom: 11px;\n            color: #333;\n            font-size: 12px;\n        }\n\n        ul {\n            width: 100%;\n\n            li {\n                width: 100%;\n                height: 87px;\n                border-radius: 4px;\n                background: #fff;\n                margin-bottom: 12px;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                padding: 0 16px 0 15px;\n                box-sizing: border-box;\n\n                &.en_li {\n                    position: relative;\n                    height: 115px;\n\n                    img {\n                        transform: translateY(-20px);\n                    }\n\n                    .content {\n                        display: flex;\n                        flex-direction: column;\n\n                        .top {\n                            flex: 0 0 50%;\n                            display: flex;\n\n                            .tleft {\n                                span {\n                                    &:nth-child(2) {\n                                        transform: scale(.77) translateX(-28px);\n                                    }\n                                }\n                            }\n                            \n                            .btn {\n                                position: absolute;\n                                top: 11px;\n                                right: 0;\n                                padding: 0 5px;\n                                min-width: 70px;\n                                min-height: 29px;\n                                font-size: 10px;\n                                border-radius: 4px 0 0 4px;\n\n                                span {\n                                    transform: scale(.9);\n                                }\n                            }\n                        }\n\n                        .btm {\n                            flex: 0 0 50%;\n                            display: flex;\n                            flex-direction: column;\n                            position: relative;\n\n                            span {\n                                &:nth-child(1) {\n                                    transform: none;\n                                    font-size: 10px;\n                                    margin-bottom: 4px;\n                                    transform: translateX(-26px) scale(0.8);\n                                    em {\n                                        margin-left: 2px;\n                                        font-size: 10px;\n                                    }\n                                }\n\n                                &:nth-child(2) {\n                                    transform: none;\n                                    font-size: 10px;\n                                    margin: 0;\n                                    transform: translateX(-26px) scale(0.8);\n                                }\n\n                                &:nth-child(3) {\n                                    position: absolute;\n                                    top: 50%;\n                                    right: 7px;\n                                    transform: translateY(-50%) scale(0.8);\n                                }\n                            }\n                        }\n                    }\n                }\n\n                img {\n                    flex: 0 0 30px;\n                    width: 30px;\n                    height: 30px;\n                    margin-right: 10px;\n                    transform: translateY(-14px);\n                }\n\n                .content {\n                    flex: 1;\n                    width: 100%;\n\n                    .top {\n                        display: flex;\n                        justify-content: space-between;\n                        align-items: center;\n                        padding-bottom: 8px;\n                        border-bottom: 1px solid #F3F3F3;\n\n                        .tleft {\n                            display: flex;\n                            flex-direction: column;\n\n                            span {\n                                &:nth-child(1) {\n                                    color: #333;\n                                    font-size: 16px;\n                                    font-weight: 700;\n                                    line-height: 19px;\n                                }\n\n                                &:nth-child(2) {\n                                    margin-top: 1px;\n                                    color: #999;\n                                    font-weight: 500;\n                                    font-size: 12px;\n                                    text-align: start;\n                                    transform: scale(.85) translateX(-15px);\n                                }\n                            }\n                        }\n                        .null {\n                            width: 83px;\n                            height: 24px;\n                            display: flex;\n                            justify-content: center;\n                            align-items: center;\n                        }\n\n                        .btn {\n                            width: 83px;\n                            height: 24px;\n                            background: var(--main-color);\n                            border-radius: 4px;\n                            display: flex;\n                            justify-content: center;\n                            align-items: center;\n                            color: #fff;\n                            font-weight: 500;\n                            font-size: 13px;\n                            // border: 1px solid var(--main-color);\n\n                            button {\n                                width: 83px;\n                                height: 24px;\n                                background: transparent;\n                                border: none;\n                                border-radius: 4px;\n                                font-weight: 400;\n                                &.disabled {\n                                    // opacity: .6;\n                                    background: #EDEDED;\n                                    color: #AEAEAE;\n                                    \n                                }\n                            }\n\n                            &.again {\n                                background: linear-gradient(0deg, #FFF7EC, #FFF7EC), #EEEEEE;\n                                color: var(--main-color);\n                            }\n                        }\n                    }\n\n                    .btm {\n                        margin-top: 6px;\n\n                        span {\n                            color: #999;\n                            font-size: 10px;\n                            line-height: 14px;\n                            transform: scale(.85) translateX(-5px);\n                            display: inline-block;\n\n                            // &:nth-child(2) {\n                            //     margin: 0 30px 0 15px;\n                            // }\n\n                            &:last-child {\n                                color: #3F80FF;\n                                font-size: 12px;\n                                transform: scale(1);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module"}