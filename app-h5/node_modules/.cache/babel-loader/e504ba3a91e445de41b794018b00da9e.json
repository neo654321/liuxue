{"ast":null,"code":"import _toConsumableArray from \"/Users/neo/Desktop/liuxue/app-h5/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"vant/es/pull-refresh/style\";\nimport _PullRefresh from \"vant/es/pull-refresh\";\nimport \"vant/es/swipe-cell/style\";\nimport _SwipeCell from \"vant/es/swipe-cell\";\nimport \"vant/es/empty/style\";\nimport _Empty from \"vant/es/empty\";\nimport \"vant/es/list/style\";\nimport _List from \"vant/es/list\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"core-js/modules/es.array.push.js\";\nimport ShopItemOne from '@/components/ShopItemOne/index.vue';\nimport { isLogin } from '@/utils/utis';\nimport { focusSellerList } from '@/API/user';\nimport { focusSellerDel } from '@/API/shop';\nexport default {\n  name: 'CollectShop',\n  components: {\n    [_NavBar.name]: _NavBar,\n    [_List.name]: _List,\n    [_Empty.name]: _Empty,\n    [_SwipeCell.name]: _SwipeCell,\n    [_PullRefresh.name]: _PullRefresh,\n    ShopItemOne\n  },\n  data() {\n    return {\n      list: [],\n      loading: false,\n      finished: false,\n      refreshing: false,\n      pageNum: 1,\n      pageSize: 10\n    };\n  },\n  created() {\n    if (!isLogin()) {\n      this.$router.push('/');\n    }\n    this.onLoad();\n  },\n  methods: {\n    onRefresh() {\n      // 清空列表数据\n      this.finished = false;\n      this.pageNum = 1;\n      // 重新加载数据\n      // 将 loading 设置为 true，表示处于加载状态\n      this.loading = true;\n      this.onLoad();\n    },\n    onLoad() {\n      if (this.refreshing) {\n        this.list = [];\n        this.refreshing = false;\n      }\n      this.getTableList();\n    },\n    getTableList() {\n      var _this = this;\n      var params = {\n        pageNum: this.pageNum,\n        pageSize: this.pageSize\n      };\n      focusSellerList(params).then(function (res) {\n        var pageList = res.pageList;\n        _this.list = _this.pageNum === 1 ? pageList : [].concat(_toConsumableArray(_this.list), _toConsumableArray(pageList));\n        _this.pageNum++;\n        _this.loading = false;\n        if (pageList.length < _this.pageSize) {\n          _this.finished = true;\n        }\n        var obj = {};\n        _this.list = _this.list.reduce(function (prev, cur) {\n          obj[cur.id] ? \"\" : obj[cur.id] = true && prev.push(cur);\n          return prev;\n        }, []);\n      }).catch(function () {\n        _this.loading = false;\n        _this.finished = true;\n      });\n    },\n    delHandle(data) {\n      var _this2 = this;\n      focusSellerDel({\n        sellerId: data.sellerVo.id\n      }).then(function () {\n        _this2.refreshing = true;\n        _this2.onRefresh();\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}