{"ast":null,"code":"import \"vant/es/collapse-item/style\";\nimport _CollapseItem from \"vant/es/collapse-item\";\nimport \"vant/es/collapse/style\";\nimport _Collapse from \"vant/es/collapse\";\nimport \"vant/es/popup/style\";\nimport _Popup from \"vant/es/popup\";\nimport \"vant/es/pull-refresh/style\";\nimport _PullRefresh from \"vant/es/pull-refresh\";\nimport \"vant/es/list/style\";\nimport _List from \"vant/es/list\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"vant/es/tabs/style\";\nimport _Tabs from \"vant/es/tabs\";\nimport \"vant/es/tab/style\";\nimport _Tab from \"vant/es/tab\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"vant/es/empty/style\";\nimport _Empty from \"vant/es/empty\";\nimport \"vant/es/skeleton/style\";\nimport _Skeleton from \"vant/es/skeleton\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.unshift.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport { apiCategoryTree, home_sellerGoods, home_category } from \"@/API/home\";\nimport { priceFormat, deduplication, priceFormatInt } from \"@/utils/utis\";\nexport default {\n  data() {\n    return {\n      priceFormatInt,\n      itemName: process.env.VUE_APP_ITEM_NAME,\n      isShowTopBtn: false,\n      activeName: '',\n      list: [],\n      loading: false,\n      finished: false,\n      refreshing: false,\n      isLeftShow: false,\n      screenHight: document.body.clientHeight,\n      popupHeight: \"100%\",\n      searchIcon: require(\"@/assets/image/index/sousuo.png\"),\n      filterIcons: {\n        icon1: require(\"@/assets/image/shop/1.jpg\"),\n        icon2: require(\"@/assets/Argos/2.jpg\"),\n        icon3: require(\"@/assets/Argos/3.jpg\")\n      },\n      categoryList: [],\n      page_no: 0,\n      discount: 0,\n      categoryId: \"\",\n      secondaryCategoryId: \"\",\n      scrollValue: \"\",\n      isLoading: true,\n      filter_list: [this.$t('综合'), this.$t('销量'), this.$t('价格'), this.$t('新品')],\n      filterIndex: 0,\n      page_no: 0,\n      isPrice: 0,\n      newTime: 0,\n      isHot: 0,\n      actions: [],\n      active1: 0,\n      active2: 0,\n      active3: 0,\n      actions1: [{\n        name: this.$t('价格由高到低'),\n        value: 1\n      }, {\n        name: this.$t('价格由低到高'),\n        value: 2\n      }],\n      actions2: [{\n        name: this.$t('销售量由高到低'),\n        value: 1\n      }, {\n        name: this.$t('销售量由低到高'),\n        value: 2\n      }],\n      actions3: [{\n        name: this.$t('时间由远到近'),\n        value: 1\n      }, {\n        name: this.$t('时间由近到远'),\n        value: 2\n      }],\n      shopLoading: true,\n      highLow: 1,\n      itemName: process.env.VUE_APP_ITEM_NAME,\n      mainColor: process.env.VUE_APP_MAIN_COLOR\n    };\n  },\n  components: {\n    [_Skeleton.name]: _Skeleton,\n    [_Empty.name]: _Empty,\n    [_NavBar.name]: _NavBar,\n    [_Tab.name]: _Tab,\n    [_Tabs.name]: _Tabs,\n    [_Icon.name]: _Icon,\n    [_List.name]: _List,\n    [_PullRefresh.name]: _PullRefresh,\n    [_Popup.name]: _Popup,\n    [_Collapse.name]: _Collapse,\n    [_CollapseItem.name]: _CollapseItem\n  },\n  computed: {\n    langIsAr() {\n      return localStorage.getItem('lang') == 'ar';\n    }\n  },\n  mounted() {\n    var _this = this;\n    this.apiCategoryTree();\n    window.addEventListener(\"scroll\", function () {\n      _this.isShowTopBtn = document.documentElement.scrollTop || document.body.scrollTop > 500;\n    });\n  },\n  created() {\n    var tempObj = JSON.parse(sessionStorage.getItem(\"commodityState\"));\n    if (['Argos', 'ArgosShop'].includes(this.itemName)) {\n      this.filter_list = ['', this.$t('销量'), this.$t('价格'), ''];\n      this.selectIndex({}, 1, 3);\n    } else if (this.itemName == 'INT Overstock') {\n      this.selectIndex({}, 1, 3);\n    } else if (tempObj !== null && tempObj !== void 0 && tempObj.filterIndex) {\n      this.filterIndex = tempObj.filterIndex;\n      this.highLow = tempObj.highLow;\n      this.selectIndex({}, tempObj.filterIndex, tempObj.highLow);\n    } else {\n      this.onLoad();\n    }\n  },\n  beforeRouteLeave(to, from, next) {\n    if (from.meta.keepAlive) {\n      this.scrollValue = window.scrollY;\n      localStorage.setItem(\"position\", this.scrollValue);\n    }\n    next();\n  },\n  activated() {\n    var position = localStorage.getItem(\"position\");\n    this.$nextTick(function () {\n      //必须使用nextTick（在下次 DOM 更新循环结束之后执行延迟回调）\n      if (position !== undefined) {\n        window.scroll(0, position);\n      }\n    });\n  },\n  methods: {\n    priceFormat(num) {\n      return priceFormat(num);\n    },\n    toggleTabs() {\n      this.list = [];\n      scrollTo(0, 0);\n      // sessionStorage.removeItem(\"commodity_list\")\n    },\n\n    onRefresh() {\n      this.isLoading = true;\n      // 清空列表数据\n      this.finished = false;\n      this.page_no = 0;\n      // 重新加载数据\n      // 将 loading 设置为 true，表示处于加载状态\n      // this.loading = true;\n      this.onLoad();\n    },\n    //获取分类\n    apiCategoryTree() {\n      var _this2 = this;\n      apiCategoryTree().then(function (res) {\n        _this2.categoryList = res;\n        // .filter(item => {\n        //     if (item.name && item.subList.length > 0) {\n        //         item.subList = item.subList.filter(subItem => subItem.name);\n        //     }\n        //     return item.name;\n        // });\n        _this2.categoryList.unshift({\n          name: _this2.$t('全部商品'),\n          subList: []\n        });\n      });\n      // home_category().then((res) => {\n      //     this.categoryList = res.pageList\n      //     this.categoryList.unshift({ name: this.$t('全部商品'), subList: [] })\n      //     this.categoryList.push({name: '', subList: []})\n      //     this.categoryList.push({name: '', subList: []})\n      // });\n    },\n\n    selectCategory(item, sub) {\n      this.isLoading = true;\n      this.page_no = 0;\n      this.list = [];\n      this.categoryId = item === null || item === void 0 ? void 0 : item.categoryId;\n      if (sub) this.secondaryCategoryId = sub.categoryId;else this.secondaryCategoryId = '';\n      this.isLeftShow = false;\n      this.onLoad();\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n    },\n    onLoad() {\n      this.shopLoading = true;\n      if (this.refreshing) {\n        this.list = [];\n        this.refreshing = false;\n      }\n      this.tuanduimingxi_post();\n    },\n    tuanduimingxi_post() {\n      var _this3 = this;\n      // if (sessionStorage.getItem('commodity_list') && this.page_no == 0 && this.discount != 1) {\n      //     this.list = JSON.parse(sessionStorage.getItem('commodity_list'))\n      //     this.shopLoading = this.loading = false;\n      //     this.loading = this.isLoading = false;\n      // }\n      this.page_no++;\n      var data = {\n        'pageNum': this.page_no,\n        'pageSize': 10,\n        'categoryId': this.$route.query.categoryId,\n        'isPrice': this.isPrice,\n        'newTime': this.newTime,\n        'isHot': this.isHot,\n        discount: this.discount\n      };\n      !data.categoryId && delete data.categoryId;\n      !data.discount && delete data.discount;\n      !data.isHot && delete data.isHot;\n      !data.isPrice && delete data.isPrice;\n      !data.newTime && delete data.newTime;\n      if (this.categoryId) {\n        data.categoryId = this.categoryId;\n      }\n      if (this.secondaryCategoryId) {\n        data.categoryId = this.secondaryCategoryId;\n      }\n      home_sellerGoods(data).then(function (res) {\n        for (var i = 0; i < res.pageList.length; i++) {\n          _this3.list.push(res.pageList[i]);\n        }\n        // if (this.page_no == 1 && this.discount != 1) {\n        //     sessionStorage.setItem(\"commodity_list\", JSON.stringify(this.list))\n        // }\n        _this3.list = deduplication(_this3.list, 'id');\n        _this3.shopLoading = _this3.loading = false;\n        _this3.loading = _this3.isLoading = false;\n        if (res.pageList.length == 0) {\n          _this3.finished = true;\n        }\n      });\n    },\n    openDetails(item) {\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n      this.$router.push(\"/CommodityDetails?sellerGoodsId=\" + item.id);\n    },\n    selectIndex(item, index, highLow) {\n      // sessionStorage.removeItem(\"commodity_list\")\n      this.shopLoading = this.isLoading = true;\n      if (!highLow) {\n        if (this.filterIndex === index) {\n          this.highLow = this.highLow === 2 ? 3 : this.highLow === 3 ? 2 : 2;\n        } else {\n          this.highLow = 2;\n        }\n      } else {\n        this.highLow = highLow;\n      }\n      this.filterIndex = index;\n      if (index == 1) {\n        // this.isPrice = 0\n        // this.newTime = ''\n        this.actions = this.actions2;\n        this.onSelect({\n          value: this.highLow - 1\n        });\n      } else if (index == 2) {\n        this.actions = this.actions1;\n        // this.isPrice = 1\n        // this.newTime = ''\n        this.onSelect({\n          value: this.highLow - 1\n        });\n      } else if (index == 3) {\n        // this.isPrice = 0\n        // this.newTime = 'new'\n        this.actions = this.actions3;\n        this.onSelect({\n          value: this.highLow - 1\n        });\n      } else {\n        this.isPrice = 0;\n        this.newTime = '';\n        this.isPrice = 0;\n        this.newTime = 0;\n        this.isHot = 0;\n        this.page_no = 0;\n        this.list = [];\n        this.onLoad();\n        document.body.scrollTop = 0;\n        document.documentElement.scrollTop = 0;\n      }\n      this.filterIndex = index;\n      sessionStorage.setItem(\"commodityState\", JSON.stringify({\n        filterIndex: this.filterIndex,\n        highLow: this.highLow\n      }));\n    },\n    onSelect(item) {\n      var _this4 = this;\n      if (this.filterIndex == 1) {\n        this.isPrice = 0;\n        this.isHot = item.value;\n        this.newTime = 0;\n        this.actions2.map(function (info) {\n          info.color = '';\n          if (info.value == item.value) {\n            info.color = _this4.mainColor;\n          }\n        });\n      } else if (this.filterIndex == 2) {\n        this.isPrice = item.value;\n        this.isHot = 0;\n        this.newTime = 0;\n        this.actions1.map(function (info) {\n          info.color = '';\n          if (info.value == item.value) {\n            info.color = _this4.mainColor;\n          }\n        });\n      } else {\n        this.isPrice = 0;\n        this.isHot = 0;\n        this.newTime = item.value;\n        this.actions3.map(function (info) {\n          info.color = '';\n          if (info.value == item.value) {\n            info.color = _this4.mainColor;\n          }\n        });\n      }\n      this.page_no = 0;\n      this.list = [];\n      this.onLoad();\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n    },\n    handleToTop() {\n      scrollTo({\n        top: 0,\n        left: 0,\n        behavior: 'smooth'\n      });\n    }\n  },\n  watch: {\n    discount(val) {\n      this.page_no = 0;\n      this.isLoading = true;\n      this.onLoad();\n    },\n    isLeftShow(val) {\n      var _this5 = this;\n      if (val) {\n        this.$nextTick(function () {\n          var el = document.getElementById(\"pop-center\");\n          el.style.height = Math.floor(_this5.screenHight / 23) + \"rem\";\n        });\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAP;MACAQ;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QAAAC;QAAAC;MAAA;QAAAD;QAAAC;MAAA;MACAC;QAAAF;QAAAC;MAAA;QAAAD;QAAAC;MAAA;MACAE;QAAAH;QAAAC;MAAA;QAAAD;QAAAC;MAAA;MACAG;MACAC;MACArC;MACAsC;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EACAC;IACAC;MACA;IACA;EAEA;EACAC;IAAA;IACA;IACAC;MACA;IACA;EAEA;EACAC;IACA;IAEA;MACA;MACA;IACA;MACA;IACA;MACA;MACA;MACA;IACA;MACA;IACA;EAGA;EACAC;IACA;MACA;MACAC;IACA;IACAC;EACA;EACAC;IACA;IAEA;MACA;MACA;QACAL;MACA;IACA;EACA;EACAM;IACAC;MACA;IACA;IACAC;MACA;MACAC;MACA;IACA;;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MACAA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;UAAAtB;UAAAuB;QAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;;IACAC;MACA;MACA;MACA;MACA;MACA,wDACA;MACA;MACA;MACAC;MACAA;IACA;IACAC;MACA;MACA;QACA;QACA;MACA;MACA;IACA;IACAC;MAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA1C;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACAnB;MACA;MACA;QACAA;MACA;MACA8D;QAEA;UACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;UACA;QACA;MAEA;IACA;IACAC;MACAJ;MACAA;MACA;IACA;IACAK;MACA;MACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;QACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;UAAA7B;QAAA;MACA;QACA;QACA;QACA;QACA;UAAAA;QAAA;MACA;QACA;QACA;QACA;QACA;UAAAA;QAAA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAwB;QACAA;MACA;MAEA;MACAM;QAAAxC;QAAAc;MAAA;IACA;IACA2B;MAAA;MACA;QACA;QACA;QACA;QACA;UACAC;UACA;YACAA;UACA;QACA;MACA;QACA;QACA;QACA;QACA;UACAA;UACA;YACAA;UACA;QACA;MACA;QACA;QACA;QACA;QACA;UACAA;UACA;YACAA;UACA;QACA;MACA;MACA;MACA;MACA;MACAR;MACAA;IACA;IACAS;MACAd;QACAe;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACArD;MACA;MACA;MACA;IACA;IACAV;MAAA;MACA;QACA;UACA;UACAgE;QACA;MACA;IACA;EACA;AACA","names":["data","priceFormatInt","itemName","isShowTopBtn","activeName","list","loading","finished","refreshing","isLeftShow","screenHight","popupHeight","searchIcon","filterIcons","icon1","icon2","icon3","categoryList","page_no","discount","categoryId","secondaryCategoryId","scrollValue","isLoading","filter_list","filterIndex","isPrice","newTime","isHot","actions","active1","active2","active3","actions1","name","value","actions2","actions3","shopLoading","highLow","mainColor","components","computed","langIsAr","mounted","window","created","beforeRouteLeave","localStorage","next","activated","methods","priceFormat","toggleTabs","scrollTo","onRefresh","apiCategoryTree","subList","selectCategory","document","onLoad","tuanduimingxi_post","home_sellerGoods","openDetails","selectIndex","sessionStorage","onSelect","info","handleToTop","top","left","behavior","watch","el"],"sourceRoot":"src/page/commodity","sources":["index.vue"],"sourcesContent":["<template>\n    <div class=\"commodity\">\n        <van-nav-bar safe-area-inset-top fixed :title=\"$t('商品')\" />\n        <div style=\"width: 100%;\" class=\"h46\"></div>\n        <div style=\"width: 100%;\" class=\"h46\"></div>\n        <div style=\"width: 100%;\" class=\"h56\"></div>\n        <div class=\"commodity_header\">\n            <div class=\"list_icon\" @click=\"isLeftShow = true\">\n                <img src=\"@/assets/image/commodity/saixuan.png\" alt=\"\" />\n            </div>\n            <van-tabs v-model=\"discount\" @change=\"toggleTabs\" :line-height=\"langIsAr ? 0 : '3px'\">\n                <van-tab :title=\"$t('全部商品')\"></van-tab>\n                <van-tab :title=\"$t('活动折扣')\"></van-tab>\n            </van-tabs>\n            <div class=\"search_icon\" @click=\"$router.push('/search?discount=' + discount)\">\n                <img src=\"@/assets/image/commodity/sousuo.png\" alt=\"\" />\n            </div>\n        </div>\n        <div class=\"filter-div\">\n            <div :class=\"['filter-item', filterIndex == index && 'active']\" v-for=\"(item, index) in filter_list\"\n                :key=\"index\" @click=\"selectIndex(item, index)\">\n                <div>{{ item }}</div>\n                <div class=\"right_icon\" v-if=\"index !== 0 && item\">\n                    <img v-if=\"highLow === 1 || filterIndex !== index\" :src=\"filterIcons.icon1\" alt=\"\">\n                    <img v-if=\"highLow === 2 && filterIndex === index\" :src=\"filterIcons.icon2\" alt=\"\">\n                    <img v-if=\"highLow === 3 && filterIndex === index\" :src=\"filterIcons.icon3\" alt=\"\">\n                </div>\n            </div>\n        </div>\n        <div class=\"padd-15\">\n            <van-skeleton :row=\"8\" class=\"commodity_skeleton skeleton\" :loading=\"isLoading\">\n                <van-pull-refresh style=\"min-height: 100vh\" v-model=\"refreshing\" @refresh=\"onRefresh\"\n                    :pulling-text=\"$t('下拉即可刷新')\" :loosing-text=\"$t('释放即可刷新')\" :loading-text=\"$t('加载中')\">\n                    <van-list v-model=\"loading\" :finished=\"finished\" @load=\"onLoad\" :loading-text=\"$t('加载中')\">\n                        <div class=\"list\">\n                            <div v-for=\"(item, index) in list\" class=\"list-item commodity\" @click=\"openDetails(item)\"\n                                :key=\"index\">\n                                <div class=\"commodity-img\">\n                                    <img :src=\"item.imgUrl1 || $defaultGoodsImage\" alt=\"\" />\n                                </div>\n                                <div class=\"money padd-10\">\n                                    ${{ priceFormat(item.discountPrice || item.sellingPrice) }}\n                                </div>\n                                <div class=\"text padd-10\">\n                                    {{ $t(\"卖出\") }} {{ priceFormatInt(item.soldNum) }}\n                                </div>\n                                <!-- <div class=\"text padd-10\">{{$t('浏览量')}} 8464</div> -->\n                                <div class=\"title padd-10 nowrap2\">{{ $textOmit(item.name) }}</div>\n                                <!-- 活动折扣 -->\n                                <div class=\"discount_box\" v-if=\"item.discountRatio >= 0.01\">\n                                    <span>{{ (item.discountRatio * 100).toFixed(0) }}%</span>\n                                    <span>OFF</span>\n                                </div>\n                            </div>\n                        </div>\n                        <van-empty v-if=\"!list.length\" :description=\"$t('暂无数据')\" />\n                    </van-list>\n                </van-pull-refresh>\n            </van-skeleton>\n        </div>\n        <div style=\"width: 100%; height: 90px\"></div>\n        <van-popup :overlay=\"false\" v-model=\"isLeftShow\" position=\"left\">\n            <div class=\"pop-wrap\">\n                <div class=\"top\"></div>\n                <div class=\"pop-header-wrap\">\n                    <div class=\"pop-header-wrap-left\">\n                        <img src=\"@/assets/image/commodity/saixuan.png\" alt=\"\" />\n                        {{ $t(\"筛选\") }}\n                    </div>\n                    <div class=\"pop-header-wrap-right\" @click=\"isLeftShow = false\">\n                        <img src=\"@/assets/image/commodity/guanbi.png\" alt=\"\" />\n                    </div>\n                </div>\n                <!-- <div class=\"pop-center-wrap\">\n                    <div class=\"center-item\" v-for=\"(item, index) in categoryList\"\n                        :class=\"[item.categoryId == categoryId ? 'active' : '']\" :key=\"index\" @click=\"selectCategory(item)\">\n                        {{ item.name }}\n                    </div>\n                </div> -->\n                <div class=\"pop-center-wrap\" id=\"pop-center\">\n                    <van-collapse v-model=\"activeName\" accordion>\n                  \n                    </van-collapse>\n                </div>\n            </div>\n        </van-popup>\n        <transition name=\"fade\">\n            <van-icon v-show=\"isShowTopBtn\" @click=\"handleToTop\" class=\"to_top\" class-prefix=\"icon\" name=\"huidaodingbu\" />\n        </transition>\n    </div>\n</template>\n<script>\nimport { NavBar, Tab, Tabs, PullRefresh, List, Popup, Skeleton, Empty, Collapse, CollapseItem, Icon } from \"vant\";\nimport { apiCategoryTree, home_sellerGoods, home_category } from \"@/API/home\";\nimport { priceFormat, deduplication, priceFormatInt } from \"@/utils/utis\";\nexport default {\n    data() {\n        return {\n            priceFormatInt,\n            itemName: process.env.VUE_APP_ITEM_NAME,\n            isShowTopBtn: false,\n            activeName: '',\n            list: [],\n            loading: false,\n            finished: false,\n            refreshing: false,\n            isLeftShow: false,\n            screenHight: document.body.clientHeight,\n            popupHeight: \"100%\",\n            searchIcon: require(\"@/assets/image/index/sousuo.png\"),\n            filterIcons: {\n                icon1: require(\"@/assets/image/shop/1.jpg\"),\n                icon2: require(`@/assets/Argos/2.jpg`),\n                icon3: require(`@/assets/Argos/3.jpg`),\n            },\n            categoryList: [],\n            page_no: 0,\n            discount: 0,\n            categoryId: \"\",\n            secondaryCategoryId: \"\",\n            scrollValue: \"\",\n            isLoading: true,\n            filter_list: [this.$t('综合'), this.$t('销量'), this.$t('价格'), this.$t('新品')],\n            filterIndex: 0,\n            page_no: 0,\n            isPrice: 0,\n            newTime: 0,\n            isHot: 0,\n            actions: [],\n            active1: 0,\n            active2: 0,\n            active3: 0,\n            actions1: [{ name: this.$t('价格由高到低'), value: 1 }, { name: this.$t('价格由低到高'), value: 2 }],\n            actions2: [{ name: this.$t('销售量由高到低'), value: 1 }, { name: this.$t('销售量由低到高'), value: 2 }],\n            actions3: [{ name: this.$t('时间由远到近'), value: 1 }, { name: this.$t('时间由近到远'), value: 2 }],\n            shopLoading: true,\n            highLow: 1,\n            itemName: process.env.VUE_APP_ITEM_NAME,\n            mainColor: process.env.VUE_APP_MAIN_COLOR,\n        };\n    },\n    components: {\n        [Skeleton.name]: Skeleton,\n        [Empty.name]: Empty,\n        [NavBar.name]: NavBar,\n        [Tab.name]: Tab,\n        [Tabs.name]: Tabs,\n        [Icon.name]: Icon,\n        [List.name]: List,\n        [PullRefresh.name]: PullRefresh,\n        [Popup.name]: Popup,\n        [Collapse.name]: Collapse,\n        [CollapseItem.name]: CollapseItem,\n    },\n    computed: {\n        langIsAr() {\n            return localStorage.getItem('lang') == 'ar'\n        }\n\n    },\n    mounted() {\n        this.apiCategoryTree();\n        window.addEventListener(\"scroll\", () => {\n            this.isShowTopBtn = document.documentElement.scrollTop || document.body.scrollTop > 500\n        });\n\n    },\n    created() {\n        const tempObj = JSON.parse(sessionStorage.getItem(\"commodityState\"))\n\n        if (['Argos', 'ArgosShop'].includes(this.itemName)) {\n            this.filter_list = ['', this.$t('销量'), this.$t('价格'), ''];\n            this.selectIndex({}, 1, 3)\n        } else if (this.itemName == 'INT Overstock') {\n            this.selectIndex({}, 1, 3)\n        } else if (tempObj?.filterIndex) {\n            this.filterIndex = tempObj.filterIndex\n            this.highLow = tempObj.highLow\n            this.selectIndex({}, tempObj.filterIndex, tempObj.highLow)\n        } else {\n            this.onLoad();\n        }\n\n\n    },\n    beforeRouteLeave(to, from, next) {\n        if (from.meta.keepAlive) {\n            this.scrollValue = window.scrollY;\n            localStorage.setItem(\"position\", this.scrollValue);\n        }\n        next();\n    },\n    activated() {\n        let position = localStorage.getItem(\"position\");\n\n        this.$nextTick(() => {\n            //必须使用nextTick（在下次 DOM 更新循环结束之后执行延迟回调）\n            if (position !== undefined) {\n                window.scroll(0, position);\n            }\n        });\n    },\n    methods: {\n        priceFormat(num) {\n            return priceFormat(num);\n        },\n        toggleTabs() {\n            this.list = [];\n            scrollTo(0, 0);\n            // sessionStorage.removeItem(\"commodity_list\")\n        },\n        onRefresh() {\n            this.isLoading = true\n            // 清空列表数据\n            this.finished = false;\n            this.page_no = 0;\n            // 重新加载数据\n            // 将 loading 设置为 true，表示处于加载状态\n            // this.loading = true;\n            this.onLoad();\n        },\n        //获取分类\n        apiCategoryTree() {\n            apiCategoryTree().then((res) => {\n                this.categoryList = res\n                // .filter(item => {\n                //     if (item.name && item.subList.length > 0) {\n                //         item.subList = item.subList.filter(subItem => subItem.name);\n                //     }\n                //     return item.name;\n                // });\n                this.categoryList.unshift({ name: this.$t('全部商品'), subList: [] })\n            });\n            // home_category().then((res) => {\n            //     this.categoryList = res.pageList\n            //     this.categoryList.unshift({ name: this.$t('全部商品'), subList: [] })\n            //     this.categoryList.push({name: '', subList: []})\n            //     this.categoryList.push({name: '', subList: []})\n            // });\n        },\n        selectCategory(item, sub) {\n            this.isLoading = true\n            this.page_no = 0;\n            this.list = [];\n            this.categoryId = item?.categoryId;\n            if (sub) this.secondaryCategoryId = sub.categoryId;\n            else this.secondaryCategoryId = '';\n            this.isLeftShow = false;\n            this.onLoad();\n            document.body.scrollTop = 0;\n            document.documentElement.scrollTop = 0;\n        },\n        onLoad() {\n            this.shopLoading = true\n            if (this.refreshing) {\n                this.list = [];\n                this.refreshing = false;\n            }\n            this.tuanduimingxi_post()\n        },\n        tuanduimingxi_post() {\n            // if (sessionStorage.getItem('commodity_list') && this.page_no == 0 && this.discount != 1) {\n            //     this.list = JSON.parse(sessionStorage.getItem('commodity_list'))\n            //     this.shopLoading = this.loading = false;\n            //     this.loading = this.isLoading = false;\n            // }\n            this.page_no++;\n            var data = {\n                'pageNum': this.page_no,\n                'pageSize': 10,\n                'categoryId': this.$route.query.categoryId,\n                'isPrice': this.isPrice,\n                'newTime': this.newTime,\n                'isHot': this.isHot,\n                discount: this.discount\n            };\n            !data.categoryId && delete data.categoryId;\n            !data.discount && delete data.discount;\n            !data.isHot && delete data.isHot;\n            !data.isPrice && delete data.isPrice;\n            !data.newTime && delete data.newTime;\n            if (this.categoryId) {\n                data.categoryId = this.categoryId;\n            }\n            if (this.secondaryCategoryId) {\n                data.categoryId = this.secondaryCategoryId;\n            }\n            home_sellerGoods(data).then((res) => {\n\n                for (let i = 0; i < res.pageList.length; i++) {\n                    this.list.push(res.pageList[i]);\n                }\n                // if (this.page_no == 1 && this.discount != 1) {\n                //     sessionStorage.setItem(\"commodity_list\", JSON.stringify(this.list))\n                // }\n                this.list = deduplication(this.list, 'id');\n                this.shopLoading = this.loading = false;\n                this.loading = this.isLoading = false;\n                if (res.pageList.length == 0) {\n                    this.finished = true;\n                }\n\n            });\n        },\n        openDetails(item) {\n            document.body.scrollTop = 0;\n            document.documentElement.scrollTop = 0;\n            this.$router.push(\"/CommodityDetails?sellerGoodsId=\" + item.id);\n        },\n        selectIndex(item, index, highLow) {\n            // sessionStorage.removeItem(\"commodity_list\")\n            this.shopLoading = this.isLoading = true\n            if (!highLow) {\n                if (this.filterIndex === index) {\n                    this.highLow = this.highLow === 2 ? 3 : this.highLow === 3 ? 2 : 2\n                } else {\n                    this.highLow = 2\n                }\n            } else {\n                this.highLow = highLow\n            }\n            this.filterIndex = index;\n            if (index == 1) {\n                // this.isPrice = 0\n                // this.newTime = ''\n                this.actions = this.actions2;\n                this.onSelect({ value: this.highLow - 1 })\n            } else if (index == 2) {\n                this.actions = this.actions1;\n                // this.isPrice = 1\n                // this.newTime = ''\n                this.onSelect({ value: this.highLow - 1 })\n            } else if (index == 3) {\n                // this.isPrice = 0\n                // this.newTime = 'new'\n                this.actions = this.actions3;\n                this.onSelect({ value: this.highLow - 1 })\n            } else {\n                this.isPrice = 0\n                this.newTime = ''\n                this.isPrice = 0;\n                this.newTime = 0;\n                this.isHot = 0;\n                this.page_no = 0;\n                this.list = [];\n                this.onLoad();\n                document.body.scrollTop = 0;\n                document.documentElement.scrollTop = 0;\n            }\n\n            this.filterIndex = index;\n            sessionStorage.setItem(\"commodityState\", JSON.stringify({ filterIndex: this.filterIndex, highLow: this.highLow }))\n        },\n        onSelect(item) {\n            if (this.filterIndex == 1) {\n                this.isPrice = 0\n                this.isHot = item.value\n                this.newTime = 0\n                this.actions2.map(info => {\n                    info.color = ''\n                    if (info.value == item.value) {\n                        info.color = this.mainColor\n                    }\n                })\n            } else if (this.filterIndex == 2) {\n                this.isPrice = item.value\n                this.isHot = 0\n                this.newTime = 0\n                this.actions1.map(info => {\n                    info.color = ''\n                    if (info.value == item.value) {\n                        info.color = this.mainColor\n                    }\n                })\n            } else {\n                this.isPrice = 0\n                this.isHot = 0\n                this.newTime = item.value\n                this.actions3.map(info => {\n                    info.color = ''\n                    if (info.value == item.value) {\n                        info.color = this.mainColor\n                    }\n                })\n            }\n            this.page_no = 0\n            this.list = []\n            this.onLoad();\n            document.body.scrollTop = 0\n            document.documentElement.scrollTop = 0\n        },\n        handleToTop() {\n            scrollTo({\n                top: 0,\n                left: 0,\n                behavior: 'smooth'\n            });\n        },\n    },\n    watch: {\n        discount(val) {\n            this.page_no = 0;\n            this.isLoading = true\n            this.onLoad()\n        },\n        isLeftShow(val) {\n            if (val) {\n                this.$nextTick(() => {\n                    const el = document.getElementById(\"pop-center\");\n                    el.style.height = Math.floor(this.screenHight / 23) + \"rem\";\n                });\n            }\n        },\n    }\n};\n</script>\n<style lang=\"scss\" scoped>\nhtml[dir=\"rtl\"] {\n    .commodity_header /deep/ .van-tab--active {\n        position: relative;\n\n        &::after {\n            content: '';\n            width: 50px;\n            height: 3px;\n            background: var(--main-color);\n            position: absolute;\n            bottom: 0;\n            left: 50%;\n            transform: translateX(-50%);\n            border-radius: 2px;\n        }\n    }\n}\n\n:deep(.van-list__finished-text) {\n    margin-top: 10px;\n}\n\n:deep(.van-cell) {\n    background: transparent;\n    padding: 18px 16px;\n\n    &:active {\n        background-color: transparent;\n    }\n\n    .van-cell__title {\n        font-size: 12px !important;\n    }\n\n    i {\n        font-size: 12px;\n    }\n}\n\n:deep(.van-collapse-item__title--expanded) {\n\n    color: var(--main-color);\n}\n\n:deep(.van-collapse-item__content) {\n    font-size: 12px !important;\n    color: #333333;\n    background: transparent !important;\n    padding: 0;\n\n    .center-item {\n        padding: 0 32px !important;\n        width: 100%;\n    }\n}\n\n.commodity_header {\n    position: fixed;\n    top: 46px;\n    left: 0;\n    z-index: 1888;\n    // margin-top: 13px;\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 10px 15px 0 15px;\n    box-sizing: border-box;\n    background: #fff;\n\n    :deep(.van-tabs) {\n        // flex: 0 0 220px;\n        flex: 1;\n\n        .van-tabs__line {\n            width: 90px;\n            // background: var(--main-color) !important;\n            background: var(--main-color) !important;\n        }\n\n    }\n\n    .search_icon,\n    .list_icon {\n        width: 36px;\n        height: 36px;\n\n        img {\n            width: 100%;\n            height: 100%;\n        }\n    }\n\n    // .search_icon {\n    //     display: flex;\n    //     justify-content: center;\n    //     align-items: center;\n    //     border: 1px solid #F6F6F6;\n    //     border-radius: 50%;\n    //     img {\n    //         width: 12px;\n    //         height: 12px;\n    //     }\n    // }\n}\n\n.commodity {\n    position: relative;\n    background: #fff;\n    min-height: 100%;\n    font-size: 14px;\n\n    .pw1 {\n        width: 375px;\n    }\n\n    .padd-15 {\n        padding: 0 15px;\n        box-sizing: border-box;\n    }\n\n    .padd-10 {\n        padding: 0 10px;\n        box-sizing: border-box;\n    }\n\n    .search-wrap {\n        display: flex;\n        align-items: center;\n        position: fixed;\n        top: 44px;\n        left: 0;\n        width: 100%;\n        z-index: 1;\n        background: #fff;\n\n        .left {\n            width: 36px;\n            height: 36px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n\n            img {\n                width: 36px;\n                height: 36px;\n            }\n        }\n\n        .right {\n            flex: 1;\n\n            .van-search .van-cell {\n                padding: 8px 8px 8px 0;\n            }\n        }\n    }\n\n    .list {\n        margin-top: 15px;\n        display: flex;\n        flex-wrap: wrap;\n        align-items: center;\n        justify-content: space-between;\n\n        .list-item {\n            width: calc(50% - 7px);\n            min-height: 260px;\n            border: 1px solid #eeeeee;\n            margin-bottom: 10px;\n            border-radius: 4px;\n            position: relative;\n\n            .commodity-img {\n                // width: 130px;\n                height: 156px;\n                // height: 160px;\n                padding: 4.8px;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n\n                img {\n                    height: fit-content;\n                    width: auto;\n                    max-height: 100%;\n                    max-width: 100%;\n                }\n            }\n\n            .money {\n\n                color: var(--main-color);\n                font-weight: 500;\n                font-size: 16px;\n                margin-top: 10px;\n            }\n\n            .text {\n                color: #999999;\n                font-size: 12px;\n                margin-top: 3px;\n            }\n\n            .title {\n                min-height: 35px;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-box-orient: vertical;\n                -moz-box-orient: vertical;\n                box-orient: vertical;\n                -webkit-line-clamp: 2;\n                line-clamp: 2;\n                margin-top: 4px;\n            }\n        }\n\n        // .list-item:nth-child(even) {\n        //     margin-left: 10px;\n        // }\n    }\n\n    :deep(.van-popup) {\n        scrollbar-width: none;\n        -ms-overflow-style: none;\n        z-index: 1998 !important;\n        overflow: hidden !important;\n        height: 100%;\n\n        &::-webkit-scrollbar {\n            display: none;\n        }\n    }\n\n    .pop-wrap {\n        box-shadow: 8px 0px 6px -1px rgba(138, 138, 138, 0.16);\n        width: 180px;\n        // height: 600px;\n        height: 87.5vh;\n        position: relative;\n        top: 50px;\n        overflow-y: hidden;\n        scrollbar-width: none;\n        -ms-overflow-style: none;\n        background: #f5f5f7;\n\n        &::-webkit-scrollbar {\n            display: none;\n        }\n\n        .pop-header-wrap {\n            height: 50px;\n            width: 165px;\n            display: flex;\n            align-items: center;\n            border-bottom: 1px solid #e6e6e6;\n            background: #f5f5f7;\n            position: fixed;\n            top: 46px;\n            left: 0;\n            z-index: 1666;\n\n            .pop-header-wrap-left {\n                flex: 1;\n                color: #333333;\n                font-size: 12px;\n                display: flex;\n                align-items: center;\n\n                img {\n                    width: 24px;\n                    height: 24px;\n                    margin-right: 5px;\n                }\n            }\n\n            .pop-header-wrap-right {\n                display: flex;\n                align-items: center;\n\n                img {\n                    width: 24px;\n                    height: 24px;\n                }\n            }\n        }\n\n        .pop-center-wrap {\n            height: 480px;\n            transform: translateY(46px);\n            overflow-y: auto;\n\n            .center-item {\n                display: flex;\n                justify-content: flex-start;\n                align-items: center;\n                height: 45px;\n                padding: 0 18px;\n                font-size: 12px;\n                position: relative;\n            }\n\n            .active {\n                background: #fff;\n\n                color: var(--main-color);\n                // border-left: 2px solid var(--main-color);\n                border-left: 2px solid var(--main-color);\n            }\n\n            .active2 {\n                background: #fff;\n                // border-left: 2px solid var(--main-color);\n                border-left: 2px solid var(--main-color);\n            }\n        }\n    }\n}\n\n/deep/ .van-field__left-icon {\n    display: flex;\n    align-items: center;\n    width: 16px;\n    margin-right: 8px;\n\n    >img {\n        width: 100%;\n        height: auto;\n    }\n}\n\n.filter-div {\n    position: fixed;\n    top: 96px;\n    left: 0;\n    z-index: 99;\n    width: calc(100% - 28px);\n    height: 46px;\n    box-sizing: border-box;\n    background: #fff;\n    margin: 0 14px 0 14px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    overflow-x: auto;\n    scrollbar-width: none;\n    -ms-overflow-style: none;\n\n    &::-webkit-scrollbar {\n        display: none;\n    }\n\n    .right_icon {\n        margin-left: 5px;\n        transform: translateY(-1px);\n\n        img {\n            width: 10px;\n            height: 15px;\n            vertical-align: middle;\n        }\n    }\n\n    .filter-item {\n        margin-left: 20px;\n        font-size: 14px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n\n        &:first-child {\n            margin-left: 0;\n        }\n\n        &.active {\n            color: var(--main-color);\n        }\n\n        div {\n            white-space: nowrap;\n        }\n\n        // .icons {\n        //     display: flex;\n        //     flex-direction: column;\n        //     justify-content: flex-start;\n        //     align-items: center;\n\n        //     .top-icon {\n        //         width: 15px;\n        //         height: 9px;\n        //         margin-left: 3px;\n        //     }\n\n        //     .top-icon1 {\n        //         margin-top: 5px;\n        //     }\n\n        //     .top-bg-icon {\n        //         background: url(\"@/assets/image/shop/top1.png\") center no-repeat;\n        //         background-size: 100% 100%;\n        //     }\n\n        //     .down-bg-icon {\n        //         background: url(\"@/assets/image/shop/top2.png\") center no-repeat;\n        //         background-size: 100% 100%;\n        //     }\n        // }\n    }\n}\n\n/deep/ .van-popup {\n    background: transparent !important;\n    // top: 50px;\n}\n\n/deep/ .van-nav-bar__content {\n    height: 50px;\n}\n</style>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}