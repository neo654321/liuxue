{"ast":null,"code":"import _toConsumableArray from \"/Users/neo/Desktop/liuxue/app-h5/node_modules/.pnpm/@babel+runtime@7.20.7/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"vant/es/pull-refresh/style\";\nimport _PullRefresh from \"vant/es/pull-refresh\";\nimport \"vant/es/swipe-cell/style\";\nimport _SwipeCell from \"vant/es/swipe-cell\";\nimport \"vant/es/empty/style\";\nimport _Empty from \"vant/es/empty\";\nimport \"vant/es/list/style\";\nimport _List from \"vant/es/list\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport GoodsItemTwo from '@/components/GoodsItemTwo/index.vue';\nimport { isLogin } from '@/utils/utis';\nimport { keepGoodsList } from '@/API/user';\nimport { keepGoodsDel } from \"@/API/commodity\";\nexport default {\n  name: 'CollectGoods',\n  components: {\n    [_NavBar.name]: _NavBar,\n    [_List.name]: _List,\n    [_Empty.name]: _Empty,\n    [_SwipeCell.name]: _SwipeCell,\n    [_PullRefresh.name]: _PullRefresh,\n    GoodsItemTwo\n  },\n  data() {\n    return {\n      list: [],\n      loading: false,\n      finished: false,\n      refreshing: false,\n      pageNum: 1,\n      pageSize: 10\n    };\n  },\n  created() {\n    if (!isLogin()) {\n      this.$router.push('/');\n    }\n    // this.onLoad();\n  },\n\n  methods: {\n    onRefresh() {\n      // 清空列表数据\n      this.finished = false;\n      this.pageNum = 1;\n      // 重新加载数据\n      // 将 loading 设置为 true，表示处于加载状态\n      this.loading = true;\n      this.onLoad();\n    },\n    onLoad() {\n      if (this.refreshing) {\n        this.list = [];\n        this.refreshing = false;\n      }\n      this.getTableList();\n    },\n    getTableList() {\n      var _this = this;\n      var params = {\n        pageNum: this.pageNum,\n        pageSize: this.pageSize\n      };\n      keepGoodsList(params).then(function (res) {\n        var pageList = res.pageList;\n        console.log(\"pageList ::->\", pageList);\n        _this.list = _this.pageNum === 1 ? pageList : [].concat(_toConsumableArray(_this.list), _toConsumableArray(pageList));\n        _this.pageNum++;\n        _this.loading = false;\n        if (pageList.length < _this.pageSize) {\n          _this.finished = true;\n        }\n        var obj = {};\n        _this.list = _this.list.reduce(function (prev, cur) {\n          obj[cur.id] ? \"\" : obj[cur.id] = true && prev.push(cur);\n          return prev;\n        }, []);\n      }).catch(function () {\n        _this.loading = false;\n        _this.finished = true;\n      });\n    },\n    delHandle(data) {\n      var _this2 = this;\n      this.refreshing = true;\n      keepGoodsDel({\n        sellerGoodsId: data.id\n      }).then(function () {\n        _this2.onRefresh();\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;AAyBA;AACA;AACA,SACAA,qBACA;AACA;AACA;EACAC;EACAC;IACA;IACA;IACA;IACA;IACA;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACA;IACA;IACA;EACA;;EACAC;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;QACA;QACA;MACA;MACA;IACA;IACAC;MAAA;MACA;QACAN;QACAC;MACA;MAEAV;QACA;QACAgB;QACA;QACA;QACA;QACA;UACA;QACA;QACA;QACA;UACAC;UACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACAC;QAAAC;MAAA;QACA;MACA;IACA;EACA;AACA","names":["keepGoodsList","name","components","GoodsItemTwo","data","list","loading","finished","refreshing","pageNum","pageSize","created","methods","onRefresh","onLoad","getTableList","console","obj","delHandle","keepGoodsDel","sellerGoodsId"],"sourceRoot":"src/page/CollectGoods","sources":["index.vue"],"sourcesContent":["<template>\n    <div class=\"page-content\">\n        <van-nav-bar safe-area-inset-top fixed :title=\"$t('商品收藏')\" left-arrow @click-left=\"() => $router.back()\" />\n        <div style=\"width: 100%;\" class=\"h46\"></div>\n        <van-pull-refresh class=\"pull-content\" v-model=\"refreshing\" @refresh=\"onRefresh\" :pulling-text=\"$t('下拉即可刷新')\"\n            :loosing-text=\"$t('释放即可刷新')\" :loading-text=\"$t('加载中')\">\n            <van-list v-model=\"loading\" :finished=\"finished\" :finished-text=\"list.length ? $t('没有更多了') : ''\"\n                @load=\"onLoad\" :loading-text=\"$t('加载中')\">\n                <div v-if=\"list.length\" class=\"list-content\">\n                    <!-- <goods-item-two v-for=\"item in list\" :key=\"item.sellerGoodsId\" :goods-data=\"item\" /> -->\n                    <van-swipe-cell v-for=\"item in list\" :key=\"item.sellerGoodsId\">\n                        <goods-item-two :goods-data=\"item\" />\n                        <template #right>\n                            <div class=\"btn\" @click.stop=\"delHandle(item)\">{{ $t('删除') }}</div>\n                        </template>\n                    </van-swipe-cell>\n                </div>\n                <van-empty v-else :description=\"$t('暂无数据')\" />\n            </van-list>\n        </van-pull-refresh>\n    </div>\n</template>\n\n<script>\nimport { NavBar, List, PullRefresh, Empty, SwipeCell } from 'vant';\nimport GoodsItemTwo from '@/components/GoodsItemTwo/index.vue'\nimport { isLogin } from '@/utils/utis'\nimport {\n    keepGoodsList\n} from '@/API/user'\nimport { keepGoodsDel } from \"@/API/commodity\";\nexport default {\n    name: 'CollectGoods',\n    components: {\n        [NavBar.name]: NavBar,\n        [List.name]: List,\n        [Empty.name]: Empty,\n        [SwipeCell.name]: SwipeCell,\n        [PullRefresh.name]: PullRefresh,\n        GoodsItemTwo\n    },\n    data() {\n        return {\n            list: [],\n            loading: false,\n            finished: false,\n            refreshing: false,\n            pageNum: 1,\n            pageSize: 10\n        }\n    },\n    created() {\n        if (!isLogin()) {\n            this.$router.push('/')\n        }\n        // this.onLoad();\n    },\n    methods: {\n        onRefresh() {\n            // 清空列表数据\n            this.finished = false;\n            this.pageNum = 1\n            // 重新加载数据\n            // 将 loading 设置为 true，表示处于加载状态\n            this.loading = true;\n            this.onLoad();\n        },\n        onLoad() {\n            if (this.refreshing) {\n                this.list = [];\n                this.refreshing = false;\n            }\n            this.getTableList()\n        },\n        getTableList() {\n            const params = {\n                pageNum: this.pageNum,\n                pageSize: this.pageSize\n            }\n\n            keepGoodsList(params).then(res => {\n                const { pageList } = res\n                console.log(`pageList ::->`, pageList);\n                this.list = this.pageNum === 1 ? pageList : [...this.list, ...pageList]\n                this.pageNum++\n                this.loading = false\n                if (pageList.length < this.pageSize) {\n                    this.finished = true\n                }\n                var obj = {};\n                this.list = this.list.reduce((prev, cur) => {\n                    obj[cur.id] ? \"\" : (obj[cur.id] = true && prev.push(cur));\n                    return prev;\n                }, []);\n            }).catch(() => {\n                this.loading = false\n                this.finished = true\n            })\n        },\n        delHandle(data) {\n            this.refreshing = true\n            keepGoodsDel({ sellerGoodsId: data.id }).then(() => {\n                this.onRefresh()\n            })\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.page-content {\n    width: 100%;\n\n    * {\n        box-sizing: border-box;\n    }\n\n    .list-content {\n        padding: 0 15px;\n    }\n\n    .pull-content {\n        min-height: calc(100vh - 46px);\n    }\n\n    /deep/ .van-swipe-cell__right {\n        display: flex;\n        align-items: center;\n        background-color: #fff;\n\n        >.btn {\n            height: 100%;\n            width: 80px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            color: #fff;\n            font-size: 12px;\n            // background-color: var(--main-color);\n            background: var(--main-color);\n        }\n    }\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}