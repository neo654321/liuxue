{"ast":null,"code":"import _toConsumableArray from \"/Users/neo/Desktop/liuxue/app-h5/node_modules/.pnpm/@babel+runtime@7.20.7/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _objectSpread from \"/Users/neo/Desktop/liuxue/app-h5/node_modules/.pnpm/@babel+runtime@7.20.7/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/empty/style\";\nimport _Empty from \"vant/es/empty\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"vant/es/list/style\";\nimport _List from \"vant/es/list\";\nimport \"vant/es/search/style\";\nimport _Search from \"vant/es/search\";\nimport \"vant/es/pull-refresh/style\";\nimport _PullRefresh from \"vant/es/pull-refresh\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.unshift.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/esnext.set.difference.v2.js\";\nimport \"core-js/modules/esnext.set.intersection.v2.js\";\nimport \"core-js/modules/esnext.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/esnext.set.is-subset-of.v2.js\";\nimport \"core-js/modules/esnext.set.is-superset-of.v2.js\";\nimport \"core-js/modules/esnext.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/esnext.set.union.v2.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport GoodsContentOne from \"@/components/GoodsContentOne/index.vue\";\nimport ShopContentTwo from \"@/components/ShopContentTwo/index.vue\";\nimport { mapGetters } from \"vuex\";\nimport debounce from \"lodash.debounce\";\nimport { searchKeyword, searchKeywordGoods, searchSeller } from \"@/API/common\";\n// import { formatData } from \"@/utils/utis\";\nexport default {\n  name: \"Search\",\n  components: {\n    [_PullRefresh.name]: _PullRefresh,\n    [_Search.name]: _Search,\n    [_List.name]: _List,\n    [_Icon.name]: _Icon,\n    [_Empty.name]: _Empty,\n    [_Toast.name]: _Toast,\n    GoodsContentOne,\n    ShopContentTwo\n  },\n  data() {\n    return {\n      searchIcon: require(\"@/assets/image/index/sousuo.png\"),\n      clearIcon: require(\"@/assets/image/index/shanchu.png\"),\n      keyword: \"\",\n      tipsShow: false,\n      tipsData: [],\n      shopData: [],\n      shopShow: false,\n      listData: [],\n      listShow: false,\n      listLoading: false,\n      loading: false,\n      finished: false,\n      refreshing: false,\n      pageNum: 1,\n      pageSize: 20,\n      currentGoodsId: null,\n      searchHistory1: []\n    };\n  },\n  computed: _objectSpread({}, mapGetters({\n    searchHistory: \"searchHistory\",\n    activeLang: \"language\"\n  })),\n  watch: {\n    $route(to, from) {\n      if (to.path == \"CommodityDetails\") {\n        sessionStorage.setItem(\"searchList\", this.listData);\n      }\n      if (from.path == \"CommodityDetails\") {\n        this.listData = sessionStorage.getItem(\"searchList\");\n      }\n    }\n  },\n  mounted() {\n    // console.log(\"this.$router ->\", this.$router);\n    this.searchHistory1 = JSON.parse(localStorage.getItem(\"searchHistory1\")) || [];\n    this.searchHistory1 = _toConsumableArray(new Set(this.searchHistory1));\n  },\n  methods: {\n    onRefresh() {\n      this.finished = false;\n      this.pageNum = 1;\n      this.loading = true;\n      this.onLoad();\n    },\n    onLoad() {\n      if (this.refreshing) {\n        this.list = [];\n        this.refreshing = false;\n      }\n      this.getListData();\n    },\n    getListData() {\n      var _this = this;\n      if (this.currentGoodsId) {\n        searchKeywordGoods({\n          goodsId: this.currentGoodsId,\n          pageNum: this.pageNum,\n          pageSize: this.pageSize\n        }).then(function (res) {\n          var pageList = res.pageList;\n          _this.listData = _this.pageNum === 1 ? pageList : [].concat(_toConsumableArray(_this.listData), _toConsumableArray(pageList));\n          _this.pageNum++;\n          _this.loading = false;\n          if (pageList.length < _this.pageSize) {\n            _this.finished = true;\n          }\n          _this.listLoading = false;\n          _Toast.clear();\n        }).catch(function () {\n          _this.loading = false;\n          _this.listLoading = false;\n          _Toast.clear();\n        });\n      } else {\n        this.listLoading = false;\n        this.finished = true;\n        _Toast.clear();\n        this.listData = [];\n      }\n    },\n    tipsHandle(data, isShop) {\n      var _this2 = this;\n      _Toast.loading({\n        duration: 0,\n        message: this.$t(\"加载中\")\n      });\n      if (typeof data == \"string\") {\n        this.keyword = data;\n        this.searchHandle();\n        return;\n      }\n      var keyword = String(this.keyword).trim();\n      // keyword = keyword.replace(/'/g, \"\\\\'\");\n      if (isShop) {\n        this.shopShow = true;\n        this.tipsShow = false;\n        this.listShow = false;\n        this.searchHistory1.unshift(data.keyword);\n        this.searchHistory1 = _toConsumableArray(new Set(this.searchHistory1));\n        localStorage.setItem(\"searchHistory1\", JSON.stringify(this.searchHistory1));\n        searchSeller({\n          keyword,\n          isHot: \"0\",\n          isPrice: \"0\",\n          isNew: \"0\"\n        }).then(function (res) {\n          _this2.shopData = res.sellerList;\n          _Toast.clear();\n        });\n      } else {\n        this.searchHistory1.unshift(data.name);\n        this.searchHistory1 = _toConsumableArray(new Set(this.searchHistory1));\n        localStorage.setItem(\"searchHistory1\", JSON.stringify(this.searchHistory1));\n        this.listShow = true;\n        this.tipsShow = false;\n        this.shopShow = false;\n        this.keyword = data.name;\n        this.currentGoodsId = data.goodsId;\n        this.$store.dispatch(\"setSearchHistory\", {\n          name: data.name,\n          goodsId: data.goodsId\n        });\n        _Toast.loading({\n          duration: 0,\n          message: this.$t(\"加载中\")\n        });\n        this.pageNum = 1;\n        this.finished = false;\n        this.loading = true;\n        this.listLoading = true;\n        this.refreshing = true;\n        this.listData = [];\n        this.onLoad();\n      }\n    },\n    clearHandle() {\n      this.tipsShow = false;\n      this.listShow = false;\n      this.shopShow = false;\n      this.keyword = \"\";\n    },\n    inputHandle: debounce(function () {\n      this.searchHandle();\n    }, 1000),\n    searchView() {\n      var _this3 = this;\n      if (this.keyword.trim() == \"\") return this.$notify(this.$t('请输入搜索内容'), \"warning\");\n      _Toast.loading({\n        duration: 0,\n        message: this.$t(\"加载中\")\n      });\n      this.listData = [];\n      this.tipsShow = false;\n      this.listShow = true;\n      this.shopShow = false;\n      this.searchHistory1.unshift(this.keyword.trim());\n      this.searchHistory1 = _toConsumableArray(new Set(this.searchHistory1));\n      localStorage.setItem(\"searchHistory1\", JSON.stringify(this.searchHistory1));\n      var keyword = String(this.keyword).trim();\n      var lang = localStorage.getItem(\"lang\");\n      lang = lang.replace(/\"/g, \"\");\n      searchKeyword({\n        keyword,\n        lang,\n        discount: this.$route.query.discount || 0\n      }).then(function (res) {\n        var pageList = res.pageList,\n          pageInfo = res.pageInfo;\n        _this3.listData = pageList;\n        _Toast.clear();\n      });\n    },\n    // 搜索商品\n    searchHandle() {\n      var _this4 = this;\n      var keyword = String(this.keyword).trim();\n      // keyword = keyword.replace(/'/g, \"\\\\'\");\n\n      if (keyword == \"\") {\n        this.tipsData = [];\n        _Toast(this.$t(\"请输入搜索内容\"));\n      }\n      this.tipsShow = true;\n      this.listShow = false;\n      this.shopShow = false;\n      if (keyword) {\n        // this.searchHistory1.unshift(keyword);\n        // this.searchHistory1 = [...new Set(this.searchHistory1)];\n        // localStorage.setItem(\n        //   \"searchHistory1\",\n        //   JSON.stringify(this.searchHistory1)\n        // );\n        this.tipsData = [];\n        var lang = localStorage.getItem(\"lang\");\n        lang = lang.replace(/\"/g, \"\");\n        searchSeller({\n          keyword,\n          lang,\n          discount: this.$route.query.discount || 0\n        }).then(function (res) {\n          // const { goodsList, sellerList } = res\n          var goodsList = res.goodsList,\n            pageInfo = res.pageInfo;\n          //   if (!goodsList.length) {\n          //     Toast(\n          //       `${this.$t(\"未找到与\")}${keyword}${this.$t(\"相关的商品\")}`\n          //     );\n          //   }\n          var shopItem = {\n            keyword,\n            name: \"\\\"\".concat(keyword, \"\\\" \").concat(_this4.$t(\"相关的店铺\")),\n            isShop: true\n          };\n          _this4.listData = goodsList;\n          _this4.tipsData = [shopItem].concat(_toConsumableArray(goodsList));\n          _Toast.clear();\n        }).catch(function (err) {\n          // Toast(err.message)\n          _Toast.clear();\n        });\n      } else {\n        this.tipsShow = false;\n        this.listShow = false;\n        this.shopShow = false;\n      }\n    },\n    emptyHandle() {\n      this.$store.dispatch(\"clearSearchHistory\");\n      localStorage.removeItem(\"searchHistory1\");\n      this.searchHistory1 = [];\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;AACA,SACAA,eACAC,oBACAC,oBACA;AACA;AACA;EACAC;EACAC;IACA;IACA;IACA;IACA;IACA;IACA;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC,4BACAC;IACAC;IACAC;EACA,GACA;EACAC;IACAC;MACA;QACAC;MACA;MACA;QACA;MACA;IACA;EACA;EACAC;IACA;IACA,sBACAC;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;QACA;QACA;MACA;MACA;IACA;IACAC;MAAA;MACA;QACApC;UACAqC;UACAjB;UACAC;QACA,GACAiB;UACA;UACA,iBACA;UACA;UACA;UACA;YACA;UACA;UACA;UACA;QACA,GACAC;UACA;UACA;UACA;QACA;MACA;QACA;QACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MACA;QACAC;QACAC;MACA;MACA;QACA;QACA;QACA;MACA;MAEA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACAC,qBACA,kBACAX,oCACA;QACA/B;UACAQ;UACAmC;UACAC;UACAC;QACA;UACA;UACA;QACA;MACA;QACA;QACA;QACAH,qBACA,kBACAX,oCACA;QACA;QACA;QACA;QACA;QACA;QACA;UACA9B;UACAmC;QACA;QACA;UACAI;UACAC;QACA;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACAK;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;MACA;QACAR;QACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACAC,qBACA,kBACAX,oCACA;MACA;MACA;MACAkB;MACAnD;QAAAU;QAAAyC;QAAAC;MAAA,GACAb;QACA;UAAAc;QACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;;MAEA;QACA;QACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAH;QACAjD;UAAAQ;UAAAyC;UAAAC;QAAA,GACAb;UACA;UACA;YAAAc;UACA;UACA;UACA;UACA;UACA;UACA;YACA3C;YACAP;YACAoD;UACA;UACA;UACA;UACA;QACA,GACAf;UACA;UACA;QACA;MACA;QACA;QACA;QACA;MACA;IACA;IACAgB;MACA;MACAZ;MACA;IACA;EACA;AACA","names":["searchKeyword","searchKeywordGoods","searchSeller","name","components","GoodsContentOne","ShopContentTwo","data","searchIcon","clearIcon","keyword","tipsShow","tipsData","shopData","shopShow","listData","listShow","listLoading","loading","finished","refreshing","pageNum","pageSize","currentGoodsId","searchHistory1","computed","mapGetters","searchHistory","activeLang","watch","$route","sessionStorage","mounted","JSON","methods","onRefresh","onLoad","getListData","goodsId","then","catch","tipsHandle","duration","message","localStorage","isHot","isPrice","isNew","clearHandle","inputHandle","searchView","lang","discount","pageInfo","searchHandle","isShop","emptyHandle"],"sourceRoot":"src/page/Search","sources":["index.vue"],"sourcesContent":["<template>\n    <div class=\"search-container\" style=\"min-height: 100vh;\">\n        <van-nav-bar safe-area-inset-top fixed left-arrow :right-text=\"$t('搜索')\" @click-right=\"searchView\"\n            @click-left=\"$router.go(-1)\">\n            <template #title>\n                <van-search v-model=\"keyword\" shape=\"round\" :clearable=\"false\" @input=\"inputHandle\"\n                    :placeholder=\"$t('找货源/商品/供应商/求购')\">\n                    <template #left-icon>\n                        <img :src=\"searchIcon\" alt=\"\" class=\"search-icon\" @click=\"searchHandle\" />\n                    </template>\n                    <template #right-icon>\n                        <van-icon v-if=\"keyword\" name=\"cross\" @click=\"clearHandle\" size=\"14\" color=\"#333333\" />\n                    </template>\n                </van-search>\n            </template>\n        </van-nav-bar>\n\n        <div style=\"width: 100%; height: 44px\"></div>\n\n        <div v-if=\"!tipsShow && !shopShow && !listShow\" class=\"search-history\">\n            <div class=\"title\">\n                <p>{{ $t(\"历史搜索\") }}</p>\n                <div v-if=\"searchHistory1.length\" class=\"clear\" @click=\"emptyHandle\">\n                    <img :src=\"clearIcon\" alt=\"\" class=\"search-icon\" />\n                    <p>{{ $t(\"清空\") }}</p>\n                </div>\n            </div>\n            <div v-if=\"searchHistory1.length\" class=\"content\">\n                <div v-for=\"(item, index) in searchHistory1\" :key=\"index\" class=\"item\" @click=\"tipsHandle(item, false)\">\n                    {{ item }}\n                </div>\n            </div>\n            <van-empty v-else :description=\"$t('暂无记录')\" />\n        </div>\n\n        <div v-if=\"tipsShow\" class=\"search-tips-content\">\n            <template v-if=\"tipsData.length\">\n                <div v-for=\"(item, index) in tipsData\" :key=\"index\" class=\"item\" @click=\"tipsHandle(item, item.isShop)\">\n                    <van-icon v-if=\"item.isShop\" name=\"shop-o\" size=\"18\" />\n                    <p>{{ item.name }}</p>\n                </div>\n            </template>\n            <van-empty v-else :description=\"$t('暂无数据')\" />\n        </div>\n\n        <div v-if=\"listShow\" class=\"search-result-content\">\n            <!-- <van-pull-refresh style=\"min-height: 100vh\" v-model=\"refreshing\" @refresh=\"onRefresh\"\n                :pulling-text=\"$t('下拉即可刷新')\" :loosing-text=\"$t('释放即可刷新')\" :loading-text=\"$t('加载中')\"> -->\n            <!-- <van-list v-model=\"loading\" :finished=\"finished\" :loading-text=\"$t('加载中')\" :finished-text=\"listData.length ? $t('没有更多了') : ''\"\n                    @load=\"onLoad\"> -->\n            <div style=\"padding: 0 15px\">\n                <goods-content-one :goods-data=\"listData\" />\n                <van-empty v-if=\"!listData.length && !listLoading && !loading\" :description=\"$t('暂无数据')\" />\n            </div>\n            <!-- </van-list> -->\n            <!-- </van-pull-refresh> -->\n        </div>\n\n        <div v-if=\"shopShow\" class=\"shop-list-content\">\n            <div v-if=\"activeLang === 'en'\" class=\"tips\">\n                Find {{ shopData.length }} <span>\"{{ keyword }}</span>\" related stores for you\n            </div>\n            <div v-else class=\"tips\">\n                {{ $t(\"为您找到\") }} <span>\"{{ keyword }}</span>\" {{ $t(\"相关的店铺\") }} {{ shopData.length || 0 }} {{ $t(\"家\") }}\n            </div>\n            <shop-content-two :shop-data=\"shopData\"></shop-content-two>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { Search, Icon, PullRefresh, List, Empty, Toast } from \"vant\";\nimport GoodsContentOne from \"@/components/GoodsContentOne/index.vue\";\nimport ShopContentTwo from \"@/components/ShopContentTwo/index.vue\";\nimport { mapGetters } from \"vuex\";\nimport debounce from \"lodash.debounce\";\nimport {\n    searchKeyword,\n    searchKeywordGoods,\n    searchSeller,\n} from \"@/API/common\";\n// import { formatData } from \"@/utils/utis\";\nexport default {\n    name: \"Search\",\n    components: {\n        [PullRefresh.name]: PullRefresh,\n        [Search.name]: Search,\n        [List.name]: List,\n        [Icon.name]: Icon,\n        [Empty.name]: Empty,\n        [Toast.name]: Toast,\n        GoodsContentOne,\n        ShopContentTwo,\n    },\n    data() {\n        return {\n            searchIcon: require(\"@/assets/image/index/sousuo.png\"),\n            clearIcon: require(\"@/assets/image/index/shanchu.png\"),\n            keyword: \"\",\n            tipsShow: false,\n            tipsData: [],\n            shopData: [],\n            shopShow: false,\n            listData: [],\n            listShow: false,\n            listLoading: false,\n            loading: false,\n            finished: false,\n            refreshing: false,\n            pageNum: 1,\n            pageSize: 20,\n            currentGoodsId: null,\n            searchHistory1: [],\n        };\n    },\n    computed: {\n        ...mapGetters({\n            searchHistory: \"searchHistory\",\n            activeLang: \"language\",\n        }),\n    },\n    watch: {\n        $route(to, from) {\n            if (to.path == \"CommodityDetails\") {\n                sessionStorage.setItem(\"searchList\", this.listData);\n            }\n            if (from.path == \"CommodityDetails\") {\n                this.listData = sessionStorage.getItem(\"searchList\");\n            }\n        },\n    },\n    mounted() {\n        // console.log(\"this.$router ->\", this.$router);\n        this.searchHistory1 =\n            JSON.parse(localStorage.getItem(\"searchHistory1\")) || [];\n        this.searchHistory1 = [...new Set(this.searchHistory1)];\n    },\n    methods: {\n        onRefresh() {\n            this.finished = false;\n            this.pageNum = 1;\n            this.loading = true;\n            this.onLoad();\n        },\n        onLoad() {\n            if (this.refreshing) {\n                this.list = [];\n                this.refreshing = false;\n            }\n            this.getListData();\n        },\n        getListData() {\n            if (this.currentGoodsId) {\n                searchKeywordGoods({\n                    goodsId: this.currentGoodsId,\n                    pageNum: this.pageNum,\n                    pageSize: this.pageSize,\n                })\n                    .then((res) => {\n                        const { pageList } = res;\n                        this.listData =\n                            this.pageNum === 1 ? pageList : [...this.listData, ...pageList];\n                        this.pageNum++;\n                        this.loading = false;\n                        if (pageList.length < this.pageSize) {\n                            this.finished = true;\n                        }\n                        this.listLoading = false;\n                        Toast.clear();\n                    })\n                    .catch(() => {\n                        this.loading = false;\n                        this.listLoading = false;\n                        Toast.clear();\n                    });\n            } else {\n                this.listLoading = false;\n                this.finished = true;\n                Toast.clear();\n                this.listData = [];\n            }\n        },\n        tipsHandle(data, isShop) {\n            Toast.loading({\n                duration: 0,\n                message: this.$t(\"加载中\"),\n            });\n            if (typeof data == \"string\") {\n                this.keyword = data;\n                this.searchHandle();\n                return;\n            }\n\n            let keyword = String(this.keyword).trim();\n            // keyword = keyword.replace(/'/g, \"\\\\'\");\n            if (isShop) {\n                this.shopShow = true;\n                this.tipsShow = false;\n                this.listShow = false;\n                this.searchHistory1.unshift(data.keyword);\n                this.searchHistory1 = [...new Set(this.searchHistory1)];\n                localStorage.setItem(\n                    \"searchHistory1\",\n                    JSON.stringify(this.searchHistory1)\n                );\n                searchSeller({\n                    keyword,\n                    isHot: \"0\",\n                    isPrice: \"0\",\n                    isNew: \"0\",\n                }).then((res) => {\n                    this.shopData = res.sellerList;\n                    Toast.clear();\n                });\n            } else {\n                this.searchHistory1.unshift(data.name);\n                this.searchHistory1 = [...new Set(this.searchHistory1)];\n                localStorage.setItem(\n                    \"searchHistory1\",\n                    JSON.stringify(this.searchHistory1)\n                );\n                this.listShow = true;\n                this.tipsShow = false;\n                this.shopShow = false;\n                this.keyword = data.name;\n                this.currentGoodsId = data.goodsId;\n                this.$store.dispatch(\"setSearchHistory\", {\n                    name: data.name,\n                    goodsId: data.goodsId,\n                });\n                Toast.loading({\n                    duration: 0,\n                    message: this.$t(\"加载中\"),\n                });\n\n                this.pageNum = 1;\n                this.finished = false;\n                this.loading = true;\n                this.listLoading = true;\n                this.refreshing = true;\n                this.listData = [];\n                this.onLoad();\n            }\n        },\n        clearHandle() {\n            this.tipsShow = false;\n            this.listShow = false;\n            this.shopShow = false;\n            this.keyword = \"\";\n        },\n        inputHandle: debounce(function () {\n            this.searchHandle();\n        }, 1000),\n        searchView() {\n            if (this.keyword.trim() == \"\") return this.$notify(this.$t('请输入搜索内容'), \"warning\");\n            Toast.loading({\n                duration: 0,\n                message: this.$t(\"加载中\"),\n            });\n            this.listData = []\n            this.tipsShow = false;\n            this.listShow = true;\n            this.shopShow = false;\n            this.searchHistory1.unshift(this.keyword.trim());\n            this.searchHistory1 = [...new Set(this.searchHistory1)];\n            localStorage.setItem(\n                \"searchHistory1\",\n                JSON.stringify(this.searchHistory1)\n            );\n            let keyword = String(this.keyword).trim();\n            let lang = localStorage.getItem(\"lang\");\n            lang = lang.replace(/\"/g, \"\");\n            searchKeyword({ keyword, lang, discount: this.$route.query.discount || 0 })\n                .then((res) => {\n                    const { pageList, pageInfo } = res;\n                    this.listData = pageList;\n                    Toast.clear();\n                })\n        },\n        // 搜索商品\n        searchHandle() {\n            let keyword = String(this.keyword).trim();\n            // keyword = keyword.replace(/'/g, \"\\\\'\");\n\n            if (keyword == \"\") {\n                this.tipsData = [];\n                Toast(this.$t(\"请输入搜索内容\"));\n            }\n            this.tipsShow = true;\n            this.listShow = false;\n            this.shopShow = false;\n            if (keyword) {\n                // this.searchHistory1.unshift(keyword);\n                // this.searchHistory1 = [...new Set(this.searchHistory1)];\n                // localStorage.setItem(\n                //   \"searchHistory1\",\n                //   JSON.stringify(this.searchHistory1)\n                // );\n                this.tipsData = [];\n                let lang = localStorage.getItem(\"lang\");\n                lang = lang.replace(/\"/g, \"\");\n                searchSeller({ keyword, lang, discount: this.$route.query.discount || 0 })\n                    .then((res) => {\n                        // const { goodsList, sellerList } = res\n                        const { goodsList, pageInfo } = res;\n                        //   if (!goodsList.length) {\n                        //     Toast(\n                        //       `${this.$t(\"未找到与\")}${keyword}${this.$t(\"相关的商品\")}`\n                        //     );\n                        //   }\n                        const shopItem = {\n                            keyword,\n                            name: `\"${keyword}\" ${this.$t(\"相关的店铺\")}`,\n                            isShop: true,\n                        };\n                        this.listData = goodsList;\n                        this.tipsData = [shopItem, ...goodsList];\n                        Toast.clear();\n                    })\n                    .catch((err) => {\n                        // Toast(err.message)\n                        Toast.clear();\n                    });\n            } else {\n                this.tipsShow = false;\n                this.listShow = false;\n                this.shopShow = false;\n            }\n        },\n        emptyHandle() {\n            this.$store.dispatch(\"clearSearchHistory\");\n            localStorage.removeItem(\"searchHistory1\");\n            this.searchHistory1 = [];\n        },\n    },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.search-container {\n    /deep/ .van-field__left-icon {\n        display: flex;\n        align-items: center;\n        width: 16px;\n        margin-right: 8px;\n\n        >img {\n            width: 100%;\n            height: auto;\n        }\n    }\n\n    /deep/ .van-nav-bar__left {\n        padding-right: 10px !important;\n    }\n\n    /deep/ .van-field__control {\n        font-size: 10px;\n    }\n\n    /deep/ .van-nav-bar__title {\n        width: 100% !important;\n        max-width: 66% !important;\n        position: relative;\n        transform: translateX(-5%);\n    }\n\n    /deep/ .van-search {\n        padding: 0 !important;\n\n        .van-search__content {\n            background-color: #f6f6f6;\n        }\n    }\n\n    .search-btn {\n        font-size: 12px;\n        color: #333;\n    }\n\n    .search-history {\n        padding: 0 15px;\n\n        >.title {\n            padding: 25px 0;\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            font-size: 16px;\n            color: #000;\n\n            >.clear {\n                display: flex;\n                align-items: center;\n\n                >img {\n                    width: 14px;\n                    height: auto;\n                    margin-right: 5px;\n                }\n\n                >p {\n                    font-size: 12px;\n                    color: #333;\n                }\n            }\n        }\n\n        >.content {\n            overflow: hidden;\n            display: flex;\n            flex-wrap: wrap;\n            justify-content: flex-start;\n\n            &.no {\n                display: flex;\n                justify-content: center;\n                font-size: 14px;\n                color: #999;\n            }\n\n            >.item {\n                float: left;\n                padding: 8px 15px;\n                background-color: #f6f6f6;\n                border-radius: 5px;\n                color: #999;\n                font-size: 12px;\n                margin-right: 14px;\n                margin-bottom: 22px;\n                max-width: 60px;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n        }\n    }\n\n    .search-tips-content {\n        >.item {\n            padding: 23px 15px;\n            border-bottom: 1px solid #eee;\n            display: flex;\n            align-items: center;\n\n            .van-icon {\n                margin-right: 5px;\n            }\n\n            >p {\n                color: #333;\n                font-size: 12px;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n        }\n    }\n\n    .shop-list-content {\n        padding: 20px 15px;\n\n        >.tips {\n            font-size: 12px;\n            color: #333;\n\n            >span {\n\n                color: var(--main-color);\n            }\n        }\n    }\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}