{"ast":null,"code":"import _defineProperty from \"/Users/neo/Desktop/mallV2/app-h5/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"vant/es/skeleton/style\";\nimport _Skeleton from \"vant/es/skeleton\";\nimport \"vant/es/action-sheet/style\";\nimport _ActionSheet from \"vant/es/action-sheet\";\nimport \"vant/es/pull-refresh/style\";\nimport _PullRefresh from \"vant/es/pull-refresh\";\nimport \"vant/es/list/style\";\nimport _List from \"vant/es/list\";\nimport \"vant/es/tabs/style\";\nimport _Tabs from \"vant/es/tabs\";\nimport \"vant/es/empty/style\";\nimport _Empty from \"vant/es/empty\";\nimport \"vant/es/tab/style\";\nimport _Tab from \"vant/es/tab\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nvar _components;\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport { home_sellerGoods } from \"@/API/home\";\nimport { priceFormat } from '@/utils/utis';\n// import { throws } from 'assert';\nexport default {\n  data: function data() {\n    return {\n      mainColor: process.env.VUE_APP_MAIN_COLOR,\n      priceFormat: priceFormat,\n      highLow: 1,\n      list: [],\n      loading: false,\n      finished: false,\n      show: false,\n      refreshing: false,\n      filter_list: [this.$t('综合'), this.$t('销量'), this.$t('价格'), this.$t('新品')],\n      filterIndex: 0,\n      page_no: 0,\n      isPrice: 0,\n      newTime: 0,\n      isHot: 0,\n      actions: [],\n      active1: 0,\n      active2: 0,\n      active3: 0,\n      actions1: [{\n        name: this.$t('价格由高到低'),\n        value: 1\n      }, {\n        name: this.$t('价格由低到高'),\n        value: 2\n      }],\n      actions2: [{\n        name: this.$t('销售量由高到低'),\n        value: 1\n      }, {\n        name: this.$t('销售量由低到高'),\n        value: 2\n      }],\n      actions3: [{\n        name: this.$t('时间由远到近'),\n        value: 1\n      }, {\n        name: this.$t('时间由近到远'),\n        value: 2\n      }],\n      shopLoading: true,\n      itemName: process.env.VUE_APP_ITEM_NAME\n    };\n  },\n  components: (_components = {}, _defineProperty(_components, _NavBar.name, _NavBar), _defineProperty(_components, _Tab.name, _Tab), _defineProperty(_components, _Empty.name, _Empty), _defineProperty(_components, _Tabs.name, _Tabs), _defineProperty(_components, _List.name, _List), _defineProperty(_components, _PullRefresh.name, _PullRefresh), _defineProperty(_components, _ActionSheet.name, _ActionSheet), _defineProperty(_components, _Skeleton.name, _Skeleton), _components),\n  // mounted() {\n  //     console.log(`$route.query.className ::->`, this.$route.query);\n  // },\n  created: function created() {\n    var tempObj = JSON.parse(sessionStorage.getItem(\"classificationState\"));\n    if (['Argos', 'ArgosShop'].includes(this.itemName)) {\n      this.filter_list = ['', this.$t('销量'), this.$t('价格'), ''];\n      this.selectIndex({}, 1, 3);\n    } else if (tempObj !== null && tempObj !== void 0 && tempObj.filterIndex) {\n      this.filterIndex = tempObj.filterIndex;\n      this.highLow = tempObj.highLow;\n      this.selectIndex({}, tempObj.filterIndex, tempObj.highLow);\n    } else {\n      this.onLoad();\n    }\n  },\n  methods: {\n    onRefresh: function onRefresh() {\n      // 清空列表数据\n      this.finished = false;\n      this.page_no = 0;\n      // 重新加载数据\n      // 将 loading 设置为 true，表示处于加载状态\n      this.shopLoading = this.loading = true;\n      this.onLoad();\n    },\n    onSelect: function onSelect(item) {\n      var _this = this;\n      if (this.filterIndex == 1) {\n        this.isPrice = 0;\n        this.isHot = item.value;\n        this.newTime = 0;\n        this.actions2.map(function (info) {\n          info.color = '';\n          if (info.value == item.value) {\n            info.color = _this.mainColor;\n          }\n        });\n      } else if (this.filterIndex == 2) {\n        this.isPrice = item.value;\n        this.isHot = 0;\n        this.newTime = 0;\n        this.actions1.map(function (info) {\n          info.color = '';\n          if (info.value == item.value) {\n            info.color = _this.mainColor;\n          }\n        });\n      } else {\n        this.isPrice = 0;\n        this.isHot = 0;\n        this.newTime = item.value;\n        this.actions3.map(function (info) {\n          info.color = '';\n          if (info.value == item.value) {\n            info.color = _this.mainColor;\n          }\n        });\n      }\n      this.page_no = 0;\n      this.list = [];\n      this.onLoad();\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n    },\n    onCancel: function onCancel() {\n      if (this.filterIndex == 1) {\n        this.actions1.map(function (info) {\n          info.color = '';\n        });\n        this.isPrice = 0;\n      } else if (this.filterIndex == 2) {\n        this.actions2.map(function (info) {\n          info.color = '';\n        });\n        this.isHot = 0;\n      } else {\n        this.actions3.map(function (info) {\n          info.color = '';\n        });\n        this.newTime = 0;\n      }\n      this.page_no = 0;\n      this.list = [];\n      this.onLoad();\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n    },\n    onLoad: function onLoad() {\n      // this.shopLoading = true\n      if (this.refreshing) {\n        this.list = [];\n        this.refreshing = false;\n      }\n      this.tuanduimingxi_post();\n    },\n    tuanduimingxi_post: function tuanduimingxi_post() {\n      var _this2 = this;\n      this.page_no++;\n      var data = {\n        'pageNum': this.page_no,\n        'pageSize': 10,\n        'categoryId': this.$route.query.categoryId,\n        'isPrice': this.isPrice,\n        'newTime': this.newTime,\n        'isHot': this.isHot\n      };\n      !data.categoryId && delete data.categoryId;\n      !data.isHot && delete data.isHot;\n      !data.isPrice && delete data.isPrice;\n      !data.newTime && delete data.newTime;\n      home_sellerGoods(data).then(function (res) {\n        for (var i = 0; i < res.pageList.length; i++) {\n          _this2.list.push(res.pageList[i]);\n        }\n        _this2.shopLoading = _this2.loading = false;\n        if (res.pageList.length == 0) {\n          _this2.finished = true;\n        }\n      });\n    },\n    openDetails: function openDetails(item) {\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n      this.$router.push('/CommodityDetails?sellerGoodsId=' + item.id);\n    },\n    onClickLeft: function onClickLeft() {\n      this.$router.back();\n    },\n    selectIndex: function selectIndex(item, index, highLow) {\n      this.shopLoading = true;\n      if (!highLow) {\n        if (this.filterIndex === index) {\n          this.highLow = this.highLow === 2 ? 3 : this.highLow === 3 ? 2 : 2;\n        } else {\n          this.highLow = 2;\n        }\n      } else {\n        this.highLow = highLow;\n      }\n      this.filterIndex = index;\n      if (index == 1) {\n        // this.isPrice = 0\n        // this.newTime = ''\n        this.actions = this.actions2;\n        this.onSelect({\n          value: this.highLow - 1\n        });\n      } else if (index == 2) {\n        this.actions = this.actions1;\n        // this.isPrice = 1\n        // this.newTime = ''\n        this.onSelect({\n          value: this.highLow - 1\n        });\n      } else if (index == 3) {\n        // this.isPrice = 0\n        // this.newTime = 'new'\n        this.actions = this.actions3;\n        this.onSelect({\n          value: this.highLow - 1\n        });\n      } else {\n        this.isPrice = 0;\n        this.newTime = '';\n        this.isPrice = 0;\n        this.newTime = 0;\n        this.isHot = 0;\n        this.page_no = 0;\n        this.list = [];\n        this.onLoad();\n        document.body.scrollTop = 0;\n        document.documentElement.scrollTop = 0;\n      }\n      this.filterIndex = index;\n      sessionStorage.setItem(\"classificationState\", JSON.stringify({\n        filterIndex: this.filterIndex,\n        highLow: this.highLow\n      }));\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}