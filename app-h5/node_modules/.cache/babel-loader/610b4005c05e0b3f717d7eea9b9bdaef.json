{"ast":null,"code":"import _defineProperty from \"/Users/neo/Desktop/mallV2/app-h5/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"vant/es/popup/style\";\nimport _Popup from \"vant/es/popup\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nvar _components;\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport EnterPassword from \"@/components/EnterPassword/index.vue\";\nimport { huoquyue_post, shifoushzhi_zijinmima_post } from \"@/API/user\";\nimport { orderPay } from \"@/API/commodity\";\nimport { priceFormat } from '@/utils/utis';\nexport default {\n  data: function data() {\n    return {\n      money: 0,\n      pwtStatus: false,\n      orderList: [],\n      total: 0,\n      payMethod: [{\n        name: this.$t('余额'),\n        balance: '',\n        selected: true\n      }, {\n        name: 'PayPal',\n        balance: this.$t('您所在的地区尚未开放'),\n        selected: false\n      }, {\n        name: 'Visa',\n        balance: this.$t('您所在的地区尚未开放'),\n        selected: false\n      }, {\n        name: 'Mastercard',\n        balance: this.$t('您所在的地区尚未开放'),\n        selected: false\n      }],\n      icons: [require('@/assets/image/public/qianbao.png'), require('@/assets/image/public/pay.png'), require('@/assets/image/public/visa.png'), require('@/assets/image/public/master.png')],\n      priceFormat: priceFormat\n    };\n  },\n  components: (_components = {}, _defineProperty(_components, _NavBar.name, _NavBar), _defineProperty(_components, _Popup.name, _Popup), _defineProperty(_components, EnterPassword.name, EnterPassword), _components),\n  mounted: function mounted() {\n    this.getMoneyInfo();\n    this.orderList = JSON.parse(this.$route.query.orderList);\n    this.total = this.$route.query.total;\n    localStorage.removeItem(\"cartList\");\n    //   localStorage.removeItem(\"productList\");\n    // console.log(\n    //   \" 比较->\",\n    //   this.RemoveSameItem(\n    //     this.$ls.get(\"cartList\"),\n    //     this.orderList,\n    //     \"checkedAll\"\n    //   )\n    // );\n  },\n  created: function created() {},\n  methods: {\n    // RemoveSameItem(listOne, listTwo, key) {\n    //   let newList = [];\n    //   loop: for (let itemOne of listOne) {\n    //     for (let itemTwo of listTwo) {\n    //       if (itemOne[key] == itemTwo[key]) {\n    //         continue loop;\n    //       }\n    //     }\n    //     newList.push(itemOne);\n    //   }\n    //   return newList.concat(listTwo);\n    // },\n    clear: function clear() {\n      // const list=[]\n      // this.$ls.get(\"cartList\") = list;\n    },\n    onClickLeft: function onClickLeft() {\n      history.go(-2);\n    },\n    //获取资金密码\n    getMoneyInfo: function getMoneyInfo() {\n      var _this = this;\n      huoquyue_post().then(function (res) {\n        _this.money = res.money;\n      });\n    },\n    //pay\n    handlePay: function handlePay() {\n      var _this2 = this;\n      shifoushzhi_zijinmima_post({}).then(function (res) {\n        if (res.safeword == 1) {\n          _this2.pwtStatus = true;\n        } else {\n          _this2.$router.push({\n            path: \"/FundPasswordSettings\"\n          });\n        }\n      });\n    },\n    //输入完密码\n    getPassword: function getPassword(value) {\n      var _this3 = this;\n      var data = {\n        safeword: value.substring(0, 6),\n        orderId: \"\"\n      };\n      this.orderList.forEach(function (item) {\n        data.orderId += item.orderId + \",\";\n      });\n      var productList = this.$ls.get(\"productList\") || [];\n      var ids = this.$route.query.ids || [];\n      // 购物车多个物品时\n      // 我也不知道为啥循环一次删不完  就多循环两次...\n      productList.forEach(function (item, index) {\n        if (ids !== null && ids !== void 0 && ids.includes(item.id)) {\n          productList.splice(index, 1);\n        }\n      });\n      // 我也不知道为啥循环一次删不完  就多循环两次...\n      productList.forEach(function (item, index) {\n        if (ids !== null && ids !== void 0 && ids.includes(item.id)) {\n          productList.splice(index, 1);\n        }\n      });\n      // 我也不知道为啥循环一次删不完  就多循环两次...\n      productList.forEach(function (item, index) {\n        if (ids !== null && ids !== void 0 && ids.includes(item.id)) {\n          productList.splice(index, 1);\n        }\n      });\n      orderPay(data).then(function () {\n        var _this3$$route$query;\n        // 如果购物车物品跟单独购买的商品一样时会把购物车那个商品清了, \n        // 如果不需要这个判断isCart=0是单独购买 isCart=1是购物车点进来的购买\n        _this3.$ls.set(\"productList\", productList);\n        _this3.$router.push({\n          path: \"/SuccessfulOperation\",\n          query: {\n            orderId: data.orderId,\n            isCart: ((_this3$$route$query = _this3.$route.query) === null || _this3$$route$query === void 0 ? void 0 : _this3$$route$query.isCart) || 0\n          }\n        });\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}