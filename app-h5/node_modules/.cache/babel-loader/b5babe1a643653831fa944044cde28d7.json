{"ast":null,"code":"import _regeneratorRuntime from \"/Users/neo/Desktop/liuxue/app-h5/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/neo/Desktop/liuxue/app-h5/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\nimport { updateOldAndNewPsw } from \"@/API/user\";\nimport { isLogin } from '@/utils/utis';\nimport Vcode from \"vue-puzzle-vcode\";\nimport router from '@/router/router';\nexport default {\n  data() {\n    return {\n      img1: require('@/assets/image/slider/1.png'),\n      img2: require('@/assets/image/slider/2.png'),\n      img3: require('@/assets/image/slider/3.png'),\n      img4: require('@/assets/image/slider/4.png'),\n      img5: require('@/assets/image/slider/5.png'),\n      show: false,\n      it: {\n        input1: '',\n        input2: '',\n        input3: ''\n      }\n    };\n  },\n  components: {\n    [_NavBar.name]: _NavBar,\n    Vcode\n  },\n  created() {\n    if (!isLogin()) {\n      this.$router.push('/');\n    }\n  },\n  methods: {\n    onClickLeft() {\n      this.$router.push({\n        path: '/Setting',\n        dir: 'left'\n      });\n    },\n    biaodantijiao() {\n      var t = this;\n      if (t.it.input1 === '') {\n        _Toast(t.$t('请输入原密码'));\n        return;\n      }\n      if (t.it.input2 === '') {\n        _Toast(t.$t('请输入新密码'));\n        return;\n      }\n      var reg = /^[a-zA-Z0-9!@#$%^&*()_+{}\\[\\]:;'\"\\\\|,.<>?~`\\-=/]{6,12}$/;\n      if (!reg.test(t.it.input2)) {\n        _Toast(t.$t('请输入 6-12 位由数字或字母组成的密码'));\n        return;\n      }\n      if (t.it.input3 !== t.it.input2) {\n        _Toast(t.$t('两次密码输入不一致'));\n        return;\n      }\n      this.submitHandle();\n      //   this.show = true\n    },\n    onSuccess() {\n      this.submitHandle();\n      this.show = false;\n    },\n    submitHandle() {\n      var _this = this;\n      _Toast.loading({\n        duration: 0,\n        message: this.$t('提交中'),\n        forbidClick: true\n      });\n      var params = {\n        old_password: encodeURIComponent(this.it.input1),\n        password: encodeURIComponent(this.it.input2),\n        re_password: encodeURIComponent(this.it.input3)\n      };\n      updateOldAndNewPsw(params).then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _Toast.success(_this.$t('修改成功'));\n              _context.next = 3;\n              return _this.$store.dispatch('getUserInfo');\n            case 3:\n              _this.onClickLeft();\n              // localStorage.removeItem('token')\n              // this.$router.push('/login')\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))).catch(function (err) {\n        _Toast.clear();\n        // Toast.fail(err.msg)\n      });\n    }\n  }\n};","map":{"version":3,"names":["updateOldAndNewPsw","isLogin","Vcode","router","data","img1","require","img2","img3","img4","img5","show","it","input1","input2","input3","components","_NavBar","name","created","$router","push","methods","onClickLeft","path","dir","biaodantijiao","t","_Toast","$t","reg","test","submitHandle","onSuccess","_this","loading","duration","message","forbidClick","params","old_password","encodeURIComponent","password","re_password","then","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","success","$store","dispatch","stop","catch","err","clear"],"sources":["src/page/LoginPasswordReset/index.vue"],"sourcesContent":["<template>\n    <div class=\"LoginPasswordReset\" style=\"min-height: 100vh;\">\n        <Vcode style=\"direction: ltr;\" :imgs=\"[img1, img2, img3, img4, img5]\" :show=\"show\" @success=\"onSuccess\" :canvasHeight=\"200\"\n            @close=\"show = false;\" :sliderText=\"$t('拖动滑块以完成拼图')\" :successText=\"$t('验证通过!')\" :failText=\"$t('验证失败,请重试')\" />\n\n        <van-nav-bar safe-area-inset-top fixed :title=\" $t('重置密码') \" left-arrow @click-left=\" onClickLeft \" />\n        <div style=\"width: 100%;\" class=\"h46\"></div>\n        <div class=\"nr\">\n            <div class=\"biaoti\">{{ $t('原密码') }}</div>\n            <div class=\"shuru\">\n                <el-input :placeholder=\" $t('请输入原密码') \" maxlength=\"16\" v-model=\" it.input1 \" show-password clearable>\n                </el-input>\n            </div>\n            <div class=\"biaoti\">{{ $t('新密码') }}</div>\n            <div class=\"shuru\">\n                <el-input :placeholder=\" $t('请输入新密码') \" maxlength=\"16\" v-model=\" it.input2 \" show-password clearable>\n                </el-input>\n            </div>\n            <div class=\"biaoti\">{{ $t('再次输入新密码') }}</div>\n            <div class=\"shuru\">\n                <el-input :placeholder=\" $t('请再次输入新密码') \" maxlength=\"16\" v-model=\" it.input3 \" show-password clearable>\n                </el-input>\n            </div>\n            <div class=\"tijiao\" @click=\" biaodantijiao \">{{ $t('提交') }}</div>\n        </div>\n    </div>\n</template>\n<script>\nimport { NavBar, Toast } from 'vant';\nimport { updateOldAndNewPsw } from \"@/API/user\";\nimport { isLogin } from '@/utils/utis'\nimport Vcode from \"vue-puzzle-vcode\";\nimport router from '@/router/router';\nexport default {\n    data() {\n        return {\n            img1: require('@/assets/image/slider/1.png'),\n            img2: require('@/assets/image/slider/2.png'),\n            img3: require('@/assets/image/slider/3.png'),\n            img4: require('@/assets/image/slider/4.png'),\n            img5: require('@/assets/image/slider/5.png'),\n            show: false,\n            it: {\n                input1: '',\n                input2: '',\n                input3: '',\n            }\n        }\n    },\n    components: {\n        [NavBar.name]: NavBar,\n        Vcode\n    },\n    created() {\n        if (!isLogin()) {\n            this.$router.push('/')\n        }\n    },\n    methods: {\n        onClickLeft() {\n            this.$router.push({ path: '/Setting', dir: 'left' })\n        },\n\n        biaodantijiao() {\n            const t = this\n            if (t.it.input1 === '') {\n                Toast(t.$t('请输入原密码'));\n                return\n            }\n            if (t.it.input2 === '') {\n                Toast(t.$t('请输入新密码'));\n                return\n            }\n            const reg = /^[a-zA-Z0-9!@#$%^&*()_+{}\\[\\]:;'\"\\\\|,.<>?~`\\-=/]{6,12}$/;\n            if (!reg.test(t.it.input2)) {\n                Toast(t.$t('请输入 6-12 位由数字或字母组成的密码'));\n                return;\n            }\n            if (t.it.input3 !== t.it.input2) {\n                Toast(t.$t('两次密码输入不一致'));\n                return\n            }\n            this.submitHandle()\n            //   this.show = true\n        },\n\n        onSuccess() {\n            this.submitHandle()\n            this.show = false\n        },\n\n        submitHandle() {\n            Toast.loading({\n                duration: 0,\n                message: this.$t('提交中'),\n                forbidClick: true,\n            })\n\n            const params = {\n                old_password: encodeURIComponent(this.it.input1),\n                password: encodeURIComponent(this.it.input2),\n                re_password: encodeURIComponent(this.it.input3)\n            }\n            updateOldAndNewPsw(params).then(async () => {\n                Toast.success(this.$t('修改成功'))\n                await this.$store.dispatch('getUserInfo')\n                this.onClickLeft()\n                // localStorage.removeItem('token')\n                // this.$router.push('/login')\n            }).catch(err => {\n                Toast.clear()\n                // Toast.fail(err.msg)\n            })\n        }\n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n.LoginPasswordReset {\n    width: 100%;\n\n    /deep/ .el-input {\n        input:focus {\n            //   border-color: var(--main-color);\n            border-color: var(--main-color);\n        }\n    }\n\n    .nr {\n        width: 100%;\n        padding: 0 15px;\n        box-sizing: border-box;\n\n        .biaoti {\n            margin-top: 20px;\n            font-style: normal;\n            font-weight: 400;\n            font-size: 12px;\n            line-height: 16px;\n            color: #333333;\n        }\n\n        .shuru {\n            width: 100%;\n            margin-top: 5px;\n        }\n\n        .tijiao {\n            margin-top: 40px;\n            width: 100%;\n            height: 44px;\n            background: var(--main-color);\n            border-radius: 4px;\n            font-style: normal;\n            font-weight: 400;\n            font-size: 16px;\n            line-height: 44px;\n            /* identical to box height, or 100% */\n\n            text-align: center;\n\n            color: #FFFFFF;\n        }\n    }\n}\n</style>\n"],"mappings":";;;;;;;;;AA6BA,SAAAA,kBAAA;AACA,SAAAC,OAAA;AACA,OAAAC,KAAA;AACA,OAAAC,MAAA;AACA;EACAC,KAAA;IACA;MACAC,IAAA,EAAAC,OAAA;MACAC,IAAA,EAAAD,OAAA;MACAE,IAAA,EAAAF,OAAA;MACAG,IAAA,EAAAH,OAAA;MACAI,IAAA,EAAAJ,OAAA;MACAK,IAAA;MACAC,EAAA;QACAC,MAAA;QACAC,MAAA;QACAC,MAAA;MACA;IACA;EACA;EACAC,UAAA;IACA,CAAAC,OAAA,CAAAC,IAAA,GAAAD,OAAA;IACAf;EACA;EACAiB,QAAA;IACA,KAAAlB,OAAA;MACA,KAAAmB,OAAA,CAAAC,IAAA;IACA;EACA;EACAC,OAAA;IACAC,YAAA;MACA,KAAAH,OAAA,CAAAC,IAAA;QAAAG,IAAA;QAAAC,GAAA;MAAA;IACA;IAEAC,cAAA;MACA,IAAAC,CAAA;MACA,IAAAA,CAAA,CAAAf,EAAA,CAAAC,MAAA;QACAe,MAAA,CAAAD,CAAA,CAAAE,EAAA;QACA;MACA;MACA,IAAAF,CAAA,CAAAf,EAAA,CAAAE,MAAA;QACAc,MAAA,CAAAD,CAAA,CAAAE,EAAA;QACA;MACA;MACA,IAAAC,GAAA;MACA,KAAAA,GAAA,CAAAC,IAAA,CAAAJ,CAAA,CAAAf,EAAA,CAAAE,MAAA;QACAc,MAAA,CAAAD,CAAA,CAAAE,EAAA;QACA;MACA;MACA,IAAAF,CAAA,CAAAf,EAAA,CAAAG,MAAA,KAAAY,CAAA,CAAAf,EAAA,CAAAE,MAAA;QACAc,MAAA,CAAAD,CAAA,CAAAE,EAAA;QACA;MACA;MACA,KAAAG,YAAA;MACA;IACA;IAEAC,UAAA;MACA,KAAAD,YAAA;MACA,KAAArB,IAAA;IACA;IAEAqB,aAAA;MAAA,IAAAE,KAAA;MACAN,MAAA,CAAAO,OAAA;QACAC,QAAA;QACAC,OAAA,OAAAR,EAAA;QACAS,WAAA;MACA;MAEA,IAAAC,MAAA;QACAC,YAAA,EAAAC,kBAAA,MAAA7B,EAAA,CAAAC,MAAA;QACA6B,QAAA,EAAAD,kBAAA,MAAA7B,EAAA,CAAAE,MAAA;QACA6B,WAAA,EAAAF,kBAAA,MAAA7B,EAAA,CAAAG,MAAA;MACA;MACAf,kBAAA,CAAAuC,MAAA,EAAAK,IAAA,eAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACAzB,MAAA,CAAA0B,OAAA,CAAApB,KAAA,CAAAL,EAAA;cAAAsB,QAAA,CAAAE,IAAA;cAAA,OACAnB,KAAA,CAAAqB,MAAA,CAAAC,QAAA;YAAA;cACAtB,KAAA,CAAAX,WAAA;cACA;cACA;YAAA;YAAA;cAAA,OAAA4B,QAAA,CAAAM,IAAA;UAAA;QAAA,GAAAT,OAAA;MAAA,CACA,IAAAU,KAAA,WAAAC,GAAA;QACA/B,MAAA,CAAAgC,KAAA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module"}