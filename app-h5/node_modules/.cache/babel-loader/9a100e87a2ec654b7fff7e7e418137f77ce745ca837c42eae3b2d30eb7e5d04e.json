{"ast":null,"code":"import _toConsumableArray from \"/Users/neo/Desktop/node/liuxue/app-h5/node_modules/.pnpm/@babel+runtime@7.20.7/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nvar getStorgeSearchData = function getStorgeSearchData() {\n  var storgeData = localStorage.getItem('searchHistory');\n  return storgeData && storgeData.length ? JSON.parse(storgeData) : [];\n};\nvar hasInArr = function hasInArr(arr, val) {\n  if (arr.length) {\n    for (var i = 0; i < arr.length; i++) {\n      if (arr[i].goodsId === val.goodsId) {\n        return true;\n      }\n    }\n    return false;\n  } else {\n    return false;\n  }\n};\nexport default {\n  state: {\n    searchHistory: []\n  },\n  getters: {\n    searchHistory: function searchHistory(state) {\n      return state.searchHistory.length ? state.searchHistory : getStorgeSearchData();\n    }\n  },\n  mutations: {\n    SET_SEARCH_HISTORY: function SET_SEARCH_HISTORY(state, arr) {\n      var arrStr = JSON.stringify(arr);\n      state.searchHistory = arr;\n      localStorage.setItem('searchHistory', arrStr);\n    },\n    CLEAR_SEARCH_HISTORY: function CLEAR_SEARCH_HISTORY(state) {\n      state.searchHistory = [];\n      localStorage.removeItem('searchHistory');\n    }\n  },\n  actions: {\n    setSearchHistory: function setSearchHistory(_ref, val) {\n      var commit = _ref.commit,\n        state = _ref.state;\n      var storeData = state.searchHistory.length ? state.searchHistory : getStorgeSearchData();\n      var data = _toConsumableArray(storeData);\n      if (!hasInArr(storeData, val)) {\n        data.push(val);\n      }\n      commit('SET_SEARCH_HISTORY', data);\n    },\n    clearSearchHistory: function clearSearchHistory(_ref2) {\n      var commit = _ref2.commit;\n      commit('CLEAR_SEARCH_HISTORY');\n    }\n  }\n};","map":{"version":3,"names":["getStorgeSearchData","storgeData","localStorage","getItem","length","JSON","parse","hasInArr","arr","val","i","goodsId","state","searchHistory","getters","mutations","SET_SEARCH_HISTORY","arrStr","stringify","setItem","CLEAR_SEARCH_HISTORY","removeItem","actions","setSearchHistory","commit","storeData","data","push","clearSearchHistory"],"sources":["/Users/neo/Desktop/node/liuxue/app-h5/src/store/modules/app.js"],"sourcesContent":["const getStorgeSearchData = () => {\n  const storgeData = localStorage.getItem('searchHistory')\n  return (storgeData && storgeData.length) ? JSON.parse(storgeData) : []\n}\n\nconst hasInArr = (arr, val) => {\n  if (arr.length) {\n    for (let i = 0; i < arr.length; i++) {\n      if (arr[i].goodsId === val.goodsId) {\n        return true\n      }\n    }\n    return false\n  } else {\n    return false\n  }\n}\n\nexport default {\n  state: {\n    searchHistory: []\n  },\n  getters: {\n    searchHistory: (state) => {\n      return state.searchHistory.length ? state.searchHistory : getStorgeSearchData()\n    }\n  },\n  mutations: {\n    SET_SEARCH_HISTORY: (state, arr) => {\n      const arrStr = JSON.stringify(arr)\n      state.searchHistory = arr\n      localStorage.setItem('searchHistory', arrStr)\n    },\n    CLEAR_SEARCH_HISTORY: (state) => {\n      state.searchHistory = []\n      localStorage.removeItem('searchHistory')\n    }\n  },\n  actions: {\n    setSearchHistory: ({commit, state}, val) => {\n      const storeData = state.searchHistory.length ? state.searchHistory : getStorgeSearchData()\n      const data = [...storeData]\n      if (!hasInArr(storeData, val)) {\n        data.push(val)\n      }\n      commit('SET_SEARCH_HISTORY', data)\n    },\n    clearSearchHistory: ({commit}) => {\n      commit('CLEAR_SEARCH_HISTORY')\n    }\n  }\n}\n"],"mappings":";;;;AAAA,IAAMA,mBAAmB,GAAG,SAAtBA,mBAAmB,GAAS;EAChC,IAAMC,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC;EACxD,OAAQF,UAAU,IAAIA,UAAU,CAACG,MAAM,GAAIC,IAAI,CAACC,KAAK,CAACL,UAAU,CAAC,GAAG,EAAE;AACxE,CAAC;AAED,IAAMM,QAAQ,GAAG,SAAXA,QAAQ,CAAIC,GAAG,EAAEC,GAAG,EAAK;EAC7B,IAAID,GAAG,CAACJ,MAAM,EAAE;IACd,KAAK,IAAIM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,GAAG,CAACJ,MAAM,EAAEM,CAAC,EAAE,EAAE;MACnC,IAAIF,GAAG,CAACE,CAAC,CAAC,CAACC,OAAO,KAAKF,GAAG,CAACE,OAAO,EAAE;QAClC,OAAO,IAAI;MACb;IACF;IACA,OAAO,KAAK;EACd,CAAC,MAAM;IACL,OAAO,KAAK;EACd;AACF,CAAC;AAED,eAAe;EACbC,KAAK,EAAE;IACLC,aAAa,EAAE;EACjB,CAAC;EACDC,OAAO,EAAE;IACPD,aAAa,EAAE,uBAACD,KAAK,EAAK;MACxB,OAAOA,KAAK,CAACC,aAAa,CAACT,MAAM,GAAGQ,KAAK,CAACC,aAAa,GAAGb,mBAAmB,EAAE;IACjF;EACF,CAAC;EACDe,SAAS,EAAE;IACTC,kBAAkB,EAAE,4BAACJ,KAAK,EAAEJ,GAAG,EAAK;MAClC,IAAMS,MAAM,GAAGZ,IAAI,CAACa,SAAS,CAACV,GAAG,CAAC;MAClCI,KAAK,CAACC,aAAa,GAAGL,GAAG;MACzBN,YAAY,CAACiB,OAAO,CAAC,eAAe,EAAEF,MAAM,CAAC;IAC/C,CAAC;IACDG,oBAAoB,EAAE,8BAACR,KAAK,EAAK;MAC/BA,KAAK,CAACC,aAAa,GAAG,EAAE;MACxBX,YAAY,CAACmB,UAAU,CAAC,eAAe,CAAC;IAC1C;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,gBAAgB,EAAE,gCAAkBd,GAAG,EAAK;MAAA,IAAxBe,MAAM,QAANA,MAAM;QAAEZ,KAAK,QAALA,KAAK;MAC/B,IAAMa,SAAS,GAAGb,KAAK,CAACC,aAAa,CAACT,MAAM,GAAGQ,KAAK,CAACC,aAAa,GAAGb,mBAAmB,EAAE;MAC1F,IAAM0B,IAAI,sBAAOD,SAAS,CAAC;MAC3B,IAAI,CAAClB,QAAQ,CAACkB,SAAS,EAAEhB,GAAG,CAAC,EAAE;QAC7BiB,IAAI,CAACC,IAAI,CAAClB,GAAG,CAAC;MAChB;MACAe,MAAM,CAAC,oBAAoB,EAAEE,IAAI,CAAC;IACpC,CAAC;IACDE,kBAAkB,EAAE,mCAAc;MAAA,IAAZJ,MAAM,SAANA,MAAM;MAC1BA,MAAM,CAAC,sBAAsB,CAAC;IAChC;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}