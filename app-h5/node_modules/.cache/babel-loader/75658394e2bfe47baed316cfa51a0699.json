{"ast":null,"code":"import _objectSpread from \"/Users/neo/Desktop/mallV2/app-h5/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"core-js/modules/es.array.concat.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"CustomerService\",\n  data() {\n    return {\n      isFirstRequest: true,\n      token: \"\",\n      serviceUrl: \"\",\n      pageHeight: \"\",\n      lang: \"\",\n      sellerId: \"\",\n      storeName: \"\",\n      isApp: window.plus ? true : false,\n      path: \"\",\n      localIsList: false,\n      isShowIcon: false\n    };\n  },\n  components: {\n    [_Icon.name]: _Icon\n  },\n  computed: _objectSpread({}, mapGetters({\n    userInfo: \"userInfo\"\n  })),\n  mounted() {\n    var _this = this;\n    // this.$refs.header.$refs.navBar.offsetHeight - 44;\n    this.init();\n    // this.localIsList = this.$route.query?.path == 'contacts'\n    // 监听 message 事件\n    window.addEventListener('message', function (e) {\n      e.data == 'back' && _this.$router.push('/');\n      // this.localIsList = this.isShowIcon = e.data == '/h5/message/yellow'\n    });\n  },\n  methods: {\n    onClickLeft() {\n      // 返回\n      this.$router.push('/');\n    },\n    onClickRight() {\n      var base_url = process.env.VUE_APP_IS_APP ? this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME].app_url : location.origin;\n      this.$refs.frame.contentWindow.postMessage('toContacts', base_url);\n      // this.$refs.frame.contentWindow.postMessage('toContacts', 'https://thsjbvh.site');\n\n      // this.$refs.frame.contentWindow.postMessage('toContacts', 'http://localhost:3000');\n    },\n    init() {\n      var _this$$route$query, _this$$route$query2, _this$$route$query3, _this$$route$query4, _this$$route$query5, _this$userInfo;\n      this.token = localStorage.getItem(\"token\");\n      this.lang = localStorage.getItem(\"lang\");\n      // this.lang = this.lang?.replace('\"', \"\")?.replace('\"', \"\");\n      this.pageHeight = document.documentElement.clientHeight - 44;\n      this.sellerId = (_this$$route$query = this.$route.query) !== null && _this$$route$query !== void 0 && _this$$route$query.path ? '' : localStorage.getItem(\"sellerId\");\n      this.storeName = (_this$$route$query2 = this.$route.query) !== null && _this$$route$query2 !== void 0 && _this$$route$query2.path ? '' : localStorage.getItem(\"storeName\");\n      // this.lang = this.lang == \"cn\" ? \"cn\" : this.lang == \"en\" ? \"en\" : \"tw\";\n      var shopName = (_this$$route$query3 = this.$route.query) !== null && _this$$route$query3 !== void 0 && _this$$route$query3.path ? this.$t('消息') : sessionStorage.getItem('shopName');\n      var goodsId = (_this$$route$query4 = this.$route.query) === null || _this$$route$query4 === void 0 ? void 0 : _this$$route$query4.goodsId;\n      var base_url = process.env.VUE_APP_IS_APP ? this.$store.state.multiItem[process.env.VUE_APP_ITEM_NAME].app_url : location.origin;\n      var qs = this.sellerId ? \"?partyid=\".concat(this.sellerId, \"&name=\").concat(this.storeName, \"&token=\").concat(this.token, \"&lang=\").concat(this.lang, \"&height=\").concat(this.pageHeight, \"px\") : \"?token=\".concat(this.token, \"&lang=\").concat(this.lang, \"&height=100%\");\n      this.serviceUrl = \"\".concat(base_url, \"/chat/#/h5/\").concat(((_this$$route$query5 = this.$route.query) === null || _this$$route$query5 === void 0 ? void 0 : _this$$route$query5.path) || \"message\", \"/yellow\").concat(qs, \"&loginType=user&nohead=true&isH5=true&selfimg=\").concat(((_this$userInfo = this.userInfo) === null || _this$userInfo === void 0 ? void 0 : _this$userInfo.avatar) || 1).concat(shopName && '&shopName=' + shopName).concat(goodsId && goodsId != 'undefined' ? '&productId=' + goodsId : '');\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}