{"ast":null,"code":"import _objectSpread from \"/Users/neo/Desktop/mallV2/app-h5/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _defineProperty from \"/Users/neo/Desktop/mallV2/app-h5/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"vant/es/empty/style\";\nimport _Empty from \"vant/es/empty\";\nimport \"vant/es/rate/style\";\nimport _Rate from \"vant/es/rate\";\nimport \"vant/es/cell-group/style\";\nimport _CellGroup from \"vant/es/cell-group\";\nimport \"vant/es/field/style\";\nimport _Field from \"vant/es/field\";\nimport \"vant/es/tabs/style\";\nimport _Tabs from \"vant/es/tabs\";\nimport \"vant/es/tab/style\";\nimport _Tab from \"vant/es/tab\";\nimport \"vant/es/popup/style\";\nimport _popup from \"vant/es/popup\";\nimport \"vant/es/picker/style\";\nimport _Picker from \"vant/es/picker\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"vant/es/pull-refresh/style\";\nimport _PullRefresh from \"vant/es/pull-refresh\";\nimport \"vant/es/list/style\";\nimport _List from \"vant/es/list\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"vant/es/image-preview/style\";\nimport _ImagePreview from \"vant/es/image-preview\";\nvar _components;\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport { getEvaluationList, apiEvaluationCountType } from \"@/API/commodity\";\nimport { getStorage, formatZoneDate } from \"@/utils/utis\";\nexport default {\n  data: function data() {\n    return {\n      formatZoneDate: formatZoneDate,\n      itemName: process.env.VUE_APP_ITEM_NAME,\n      mainColor: process.env.VUE_APP_MAIN_COLOR,\n      sort_index: '',\n      list: [],\n      page_no: 0,\n      refreshing: false,\n      loading: false,\n      finished: false,\n      evaluationNum: 0,\n      defaultAvatar: require('@/assets/image/default_avatar.png'),\n      havePicture: '0',\n      mediumReview: '0',\n      negativeComment: '0',\n      positiveComments: '0',\n      ImagePreview: _ImagePreview,\n      isEn: getStorage('lang') == 'en'\n    };\n  },\n  components: (_components = {}, _defineProperty(_components, _NavBar.name, _NavBar), _defineProperty(_components, _List.name, _List), _defineProperty(_components, _PullRefresh.name, _PullRefresh), _defineProperty(_components, _Icon.name, _Icon), _defineProperty(_components, _Picker.name, _Picker), _defineProperty(_components, _popup.name, _popup), _defineProperty(_components, _Tab.name, _Tab), _defineProperty(_components, _Tabs.name, _Tabs), _defineProperty(_components, _Field.name, _Field), _defineProperty(_components, _CellGroup.name, _CellGroup), _defineProperty(_components, _Rate.name, _Rate), _defineProperty(_components, _Empty.name, _Empty), _components),\n  created: function created() {\n    var _this = this;\n    this.list = [\n      // {createTime:'12:00',content:132,rating:3.5,partyName:'娃哈哈哈哈哈'}\n    ];\n    // 获取中评差评数量\n    apiEvaluationCountType({\n      goodId: this.$route.query.sellerGoodsId\n    }).then(function (res) {\n      var havePicture = res.havePicture,\n        mediumReview = res.mediumReview,\n        negativeComment = res.negativeComment,\n        positiveComments = res.positiveComments;\n      _this.havePicture = havePicture;\n      _this.mediumReview = mediumReview;\n      _this.negativeComment = negativeComment;\n      _this.positiveComments = positiveComments;\n    });\n    this.getList();\n  },\n  methods: {\n    handleList: function handleList(item) {\n      var arr = [];\n      Object.keys(item).forEach(function (key) {\n        if (key.indexOf('imgUrl') !== -1 && item[key]) {\n          arr.push(item[key]);\n        }\n      });\n      return arr;\n    },\n    getList: function getList() {\n      var _this2 = this;\n      this.page_no++;\n      var dataJson = {\n        sellerGoodsId: this.$route.query.sellerGoodsId,\n        pageNum: this.page_no,\n        pageSize: 10,\n        evaluationType: this.sort_index\n      };\n      getEvaluationList(dataJson).then(function (res) {\n        _this2.evaluationNum = res.evaluationNum;\n        for (var i = 0; i < res.pageList.length; i++) {\n          _this2.list.push(res.pageList[i]);\n        }\n        _this2.list = _this2.list.map(function (item) {\n          var images = [item.imgUrl1, item.imgUrl2, item.imgUrl3, item.imgUrl4, item.imgUrl5, item.imgUrl6, item.imgUrl7, item.imgUrl8, item.imgUrl9];\n          return _objectSpread(_objectSpread({}, item), {}, {\n            images: images.filter(function (url) {\n              return !!url;\n            })\n          });\n        });\n        _this2.loading = false;\n        if (res.pageList.length == 0) {\n          _this2.finished = true;\n        }\n      });\n    },\n    onRefresh: function onRefresh() {\n      // 清空列表数据\n      this.finished = false;\n      this.page_no = 0;\n      // 重新加载数据\n      // 将 loading 设置为 true，表示处于加载状态\n      this.loading = true;\n      this.onLoad();\n    },\n    onLoad: function onLoad() {\n      if (this.refreshing) {\n        this.list = [];\n        this.refreshing = false;\n      }\n      this.getList();\n    },\n    onClickLeft: function onClickLeft() {\n      this.$router.go(-1);\n    }\n  },\n  watch: {\n    sort_index: function sort_index() {\n      this.list = [];\n      this.page_no = 0;\n      this.getList();\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module"}